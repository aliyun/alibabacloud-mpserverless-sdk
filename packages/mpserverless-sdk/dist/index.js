!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.MPServerless=e():t.MPServerless=e()}(this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=46)}([function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"f",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return u}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function a(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function a(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}},function(t,e,n){"use strict";var r=n(14);n.d(e,"BasementClientError",(function(){return r.a}));var i=n(31);n.o(i,"BaseDecoder")&&n.d(e,"BaseDecoder",(function(){return i.BaseDecoder})),n.o(i,"BaseEncoder")&&n.d(e,"BaseEncoder",(function(){return i.BaseEncoder})),n.o(i,"ErrorCode")&&n.d(e,"ErrorCode",(function(){return i.ErrorCode})),n.o(i,"ErrorName")&&n.d(e,"ErrorName",(function(){return i.ErrorName})),n.o(i,"ErrorType")&&n.d(e,"ErrorType",(function(){return i.ErrorType})),n.o(i,"PERMISSION")&&n.d(e,"PERMISSION",(function(){return i.PERMISSION})),n.o(i,"REGEXP_FLAGS")&&n.d(e,"REGEXP_FLAGS",(function(){return i.REGEXP_FLAGS})),n.o(i,"Validator")&&n.d(e,"Validator",(function(){return i.Validator})),n.o(i,"assert")&&n.d(e,"assert",(function(){return i.assert}));var o=n(10);n.d(e,"Validator",(function(){return o.a})),n.d(e,"assert",(function(){return o.b}));var s=n(6);n.d(e,"ErrorCode",(function(){return s.a})),n.d(e,"ErrorName",(function(){return s.c})),n.d(e,"ErrorType",(function(){return s.d})),n.d(e,"PERMISSION",(function(){return s.j})),n.d(e,"REGEXP_FLAGS",(function(){return s.k}));var a=n(19);n.d(e,"BaseDecoder",(function(){return a.a})),n.d(e,"BaseEncoder",(function(){return a.b}));n(32),n(33),n(34)},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"t",(function(){return a})),n.d(e,"d",(function(){return c})),n.d(e,"v",(function(){return u})),n.d(e,"g",(function(){return p})),n.d(e,"u",(function(){return f})),n.d(e,"e",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"k",(function(){return h})),n.d(e,"l",(function(){return m})),n.d(e,"a",(function(){return y})),n.d(e,"c",(function(){return b})),n.d(e,"j",(function(){return g})),n.d(e,"p",(function(){return O})),n.d(e,"q",(function(){return v})),n.d(e,"r",(function(){return j})),n.d(e,"s",(function(){return E})),n.d(e,"o",(function(){return T})),n.d(e,"x",(function(){return x})),n.d(e,"y",(function(){return I})),n.d(e,"n",(function(){return _})),n.d(e,"w",(function(){return w})),n.d(e,"m",(function(){return S})),n.d(e,"h",(function(){return A})),n.d(e,"i",(function(){return R}));var r=n(0),i=n(1),o=n(11),s=function(){function t(t){this._schema={},this._argMap={},this._argMap=t,this._argMap.options||(this._argMap.options={})}return Object.defineProperty(t.prototype,"permission",{get:function(){switch(this._permission){case i.PERMISSION.CREATE:case i.PERMISSION.UPDATE:case i.PERMISSION.DELETE:return i.PERMISSION.WRITE;default:return this._permission}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"argMap",{get:function(){return this._argMap},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return this._schema},enumerable:!1,configurable:!0}),t.prototype.augmentOptions=function(t){this.argMap.options=Object.assign({},this.argMap.options,t)},t.prototype.inspect=function(){var t=function t(e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object(o.c)(e[i])&&(0===Object.keys(e[i]).length?"query"===i&&"{}"===JSON.stringify(e[i])||delete e[i]:t(e[i])),void 0===e[i]&&delete e[i]}return e}(JSON.parse(JSON.stringify(this.argMap)));return Object(r.a)(Object(r.a)({},t),{command:this.name})},t}(),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="collections",e._permission=i.PERMISSION.COLLECTION,e}return Object(r.d)(e,t),e}(s),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="create",e._schema={name:"collectionName",options:{type:"object",required:!1}},e._permission=i.PERMISSION.COLLECTION,e}return Object(r.d)(e,t),e}(s),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="rename",e._schema={newName:"collectionName",options:{type:"object",required:!1}},e._permission=i.PERMISSION.COLLECTION,e}return Object(r.d)(e,t),e}(s),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="drop",e._permission=i.PERMISSION.COLLECTION,e}return Object(r.d)(e,t),e}(s),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="listIndexes",e._schema={options:{type:"object",required:!1}},e._permission=i.PERMISSION.INDEX,e}return Object(r.d)(e,t),e}(s),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="createIndex",e._schema={field:"field",options:{type:"object",required:!1}},e._permission=i.PERMISSION.INDEX,e}return Object(r.d)(e,t),e}(s),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="createIndexes",e._schema={fields:"fields",options:{type:"object",required:!1}},e._permission=i.PERMISSION.INDEX,e}return Object(r.d)(e,t),e}(s),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="dropIndex",e._schema={indexName:"field",options:{type:"object",required:!1}},e._permission=i.PERMISSION.INDEX,e}return Object(r.d)(e,t),e}(s),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="dropIndexes",e._schema={options:{type:"object",required:!1}},e._permission=i.PERMISSION.INDEX,e}return Object(r.d)(e,t),e}(s),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="aggregate",e._schema={pipeline:"array",options:{type:"object",required:!1}},e._permission=i.PERMISSION.AGGREGATE,e}return Object(r.d)(e,t),e}(s),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="count",e._schema={query:"object",options:{type:"object",required:!1}},e._permission=i.PERMISSION.READ,e}return Object(r.d)(e,t),e}(s),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="distinct",e._schema={key:"string",query:"object",options:{type:"object",required:!1}},e._permission=i.PERMISSION.READ,e}return Object(r.d)(e,t),e}(s),O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="findOne",e._schema={query:"object",options:{type:"object",required:!1}},e._permission=i.PERMISSION.READ,e}return Object(r.d)(e,t),e}(s),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="find",e._schema={query:{type:"object",required:!1},options:{type:"object",required:!1}},e._permission=i.PERMISSION.READ,e}return Object(r.d)(e,t),e}(s),j=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="insertOne",e._schema={doc:"field",options:{type:"object",required:!1}},e._permission=i.PERMISSION.CREATE,e}return Object(r.d)(e,t),e}(s),E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="insertMany",e._schema={docs:"fields",options:{type:"object",required:!1}},e._permission=i.PERMISSION.CREATE,e}return Object(r.d)(e,t),e}(s),T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="findOneAndUpdate",e._schema={filter:"object",update:"object",options:{type:"object",required:!1}},e._permission=i.PERMISSION.UPDATE,e}return Object(r.d)(e,t),e}(s),x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="updateOne",e._schema={filter:"object",update:"object",options:{type:"object",required:!1}},e._permission=i.PERMISSION.UPDATE,e}return Object(r.d)(e,t),e}(s),I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="updateMany",e._schema={filter:"object",update:"object",options:{type:"object",required:!1}},e._permission=i.PERMISSION.UPDATE,e}return Object(r.d)(e,t),e}(s),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="findOneAndReplace",e._schema={filter:"object",replacement:"object",options:{type:"object",required:!1}},e._permission=i.PERMISSION.UPDATE,e}return Object(r.d)(e,t),e}(s),w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="replaceOne",e._schema={filter:"object",doc:"object",options:{type:"object",required:!1}},e._permission=i.PERMISSION.UPDATE,e}return Object(r.d)(e,t),e}(s),S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="findOneAndDelete",e._schema={filter:"object",options:{type:"object",required:!1}},e._permission=i.PERMISSION.DELETE,e}return Object(r.d)(e,t),e}(s),A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="deleteOne",e._schema={filter:"object",options:{type:"object",required:!1}},e._permission=i.PERMISSION.DELETE,e}return Object(r.d)(e,t),e}(s),R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="deleteMany",e._schema={filter:{type:"object",required:!1},options:{type:"object",required:!1}},e._permission=i.PERMISSION.DELETE,e}return Object(r.d)(e,t),e}(s)},function(t,e,n){"use strict";var r=n(12);n.d(e,"BuiltInError",(function(){return r.b}));var i=n(22);n.o(i,"BaseService")&&n.d(e,"BaseService",(function(){return i.BaseService})),n.o(i,"Basement")&&n.d(e,"Basement",(function(){return i.Basement})),n.o(i,"ErrorCode")&&n.d(e,"ErrorCode",(function(){return i.ErrorCode})),n.o(i,"ErrorName")&&n.d(e,"ErrorName",(function(){return i.ErrorName})),n.o(i,"ErrorType")&&n.d(e,"ErrorType",(function(){return i.ErrorType})),n.o(i,"HTTPRequestEncoder")&&n.d(e,"HTTPRequestEncoder",(function(){return i.HTTPRequestEncoder})),n.o(i,"HTTPResponseDecoder")&&n.d(e,"HTTPResponseDecoder",(function(){return i.HTTPResponseDecoder})),n.o(i,"HTTPTransport")&&n.d(e,"HTTPTransport",(function(){return i.HTTPTransport})),n.o(i,"HTTP_UNAUTHORIZED")&&n.d(e,"HTTP_UNAUTHORIZED",(function(){return i.HTTP_UNAUTHORIZED})),n.o(i,"OSSUploadHeaderList")&&n.d(e,"OSSUploadHeaderList",(function(){return i.OSSUploadHeaderList})),n.o(i,"OSSUploadResponseFormat")&&n.d(e,"OSSUploadResponseFormat",(function(){return i.OSSUploadResponseFormat})),n.o(i,"PREFIX")&&n.d(e,"PREFIX",(function(){return i.PREFIX})),n.o(i,"WHITELIST_EXTENSIONS")&&n.d(e,"WHITELIST_EXTENSIONS",(function(){return i.WHITELIST_EXTENSIONS})),n.o(i,"assert")&&n.d(e,"assert",(function(){return i.assert}));var o=n(8);n.d(e,"OSSUploadResponseFormat",(function(){return o.a})),n.d(e,"assert",(function(){return o.b}));var s=n(4);n.d(e,"ErrorCode",(function(){return s.a})),n.d(e,"ErrorName",(function(){return s.c})),n.d(e,"ErrorType",(function(){return s.d})),n.d(e,"HTTP_UNAUTHORIZED",(function(){return s.f})),n.d(e,"OSSUploadHeaderList",(function(){return s.k})),n.d(e,"PREFIX",(function(){return s.l})),n.d(e,"WHITELIST_EXTENSIONS",(function(){return s.o}));var a=n(17);n.d(e,"HTTPRequestEncoder",(function(){return a.a})),n.d(e,"HTTPResponseDecoder",(function(){return a.b}));var c=n(24);n.d(e,"HTTPTransport",(function(){return c.a}));var u=n(25);n.d(e,"BaseService",(function(){return u.a}));var p=n(26);n.d(e,"Basement",(function(){return p.a}))},function(t,e,n){"use strict";var r,i;n.d(e,"e",(function(){return r})),n.d(e,"n",(function(){return i})),n.d(e,"m",(function(){return a})),n.d(e,"l",(function(){return o})),n.d(e,"k",(function(){return u})),n.d(e,"o",(function(){return p})),n.d(e,"f",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"a",(function(){return l})),n.d(e,"d",(function(){return d})),n.d(e,"i",(function(){return m})),n.d(e,"j",(function(){return y})),n.d(e,"h",(function(){return b})),n.d(e,"g",(function(){return g})),n.d(e,"b",(function(){return O})),function(t){t.GET="GET",t.DEL="DELETE",t.POST="POST"}(r||(r={})),function(t){t.HTTP="HTTP"}(i||(i={}));var o,s,a="x-serverless-";!function(t){t.CLIENT="/client",t.SERVER="/server",t.ANTCLOUD="/antcloud",t.ANTOPENANTCLOUD="/antopen/antcloud"}(o||(o={})),function(t){t.PUBLIC="public",t.PRIVATE="private"}(s||(s={}));var c,u=["Expires","Cache-Control","Content-Type","Content-Encoding","Content-Disposition"],p=["jpg","jpeg","png","gif","webp","svg","image","mp3","mp4","ogg","webm"];!function(t){t.READ=".read",t.WRITE=".write",t.CREATE="document.create",t.UPDATE="document.update",t.DELETE="document.delete",t.AGGREGATE=".aggregate",t.INDEX=".index",t.COLLECTION="collection.manage",t.DATABASE="database.manage",t.SYSTEM="system.manage"}(c||(c={}));var f,l,d,h=401;!function(t){t.VALIDATION_ERROR="ValidationError",t.UNSUPPORTED_ERROR="UnsupportedError",t.UNAUTHORIZED_ERROR="UnauthorizedError",t.INTERFACE_ERROR="InterfaceError",t.IDE_ERROR="IDEError"}(f||(f={})),function(t){t.COMMAND_MISSING="CommandMissing",t.VALIDATION_FAILED="ValidationFailed",t.AUTHENTICATION_FAILED="AuthenticationFailed",t.UNAUTHENTICATION="Unauthentication",t.INTERFACE_RESPONSE_FAILED="InterfaceResponseError"}(l||(l={})),function(t){t.COMMON_ERROR="CommonError",t.IDE_ERROR="IDEError"}(d||(d={}));var m=64,y=120,b=["admin","system","basement"],g=["basement"],O={INVALID_TYPE:"field type is invalid",NOT_STRING:"field is not a string",NOT_ARRAY:"field is not an array",NOT_EMPTY:"field should not be empty",TOO_LONG:"field is too long",ILLEGAL:"field should not contain illegal character",SYSTEM:"field is in conflict with system names"}},function(t,e,n){"use strict";var r,i;n.d(e,"e",(function(){return r})),n.d(e,"l",(function(){return i})),n.d(e,"k",(function(){return a})),n.d(e,"j",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return p})),n.d(e,"d",(function(){return f})),n.d(e,"h",(function(){return l})),n.d(e,"i",(function(){return d})),n.d(e,"g",(function(){return h})),n.d(e,"f",(function(){return m})),n.d(e,"b",(function(){return y})),function(t){t.GET="GET",t.DEL="DELETE",t.POST="POST"}(r||(r={})),function(t){t.HTTP="HTTP"}(i||(i={}));var o,s,a="x-serverless-";!function(t){t.CLIENT="/client",t.SERVER="/server",t.ANTCLOUD="/antcloud",t.ANTOPENANTCLOUD="/antopen/antcloud"}(o||(o={})),function(t){t.PUBLIC="public",t.PRIVATE="private"}(s||(s={}));var c;!function(t){t.READ=".read",t.WRITE=".write",t.CREATE="document.create",t.UPDATE="document.update",t.DELETE="document.delete",t.AGGREGATE=".aggregate",t.INDEX=".index",t.COLLECTION="collection.manage",t.DATABASE="database.manage",t.SYSTEM="system.manage"}(c||(c={}));var u,p,f;!function(t){t.VALIDATION_ERROR="ValidationError",t.UNSUPPORTED_ERROR="UnsupportedError",t.UNAUTHORIZED_ERROR="UnauthorizedError",t.INTERFACE_ERROR="InterfaceError",t.IDE_ERROR="IDEError"}(u||(u={})),function(t){t.COMMAND_MISSING="CommandMissing",t.VALIDATION_FAILED="ValidationFailed",t.AUTHENTICATION_FAILED="AuthenticationFailed",t.UNAUTHENTICATION="Unauthentication",t.INTERFACE_RESPONSE_FAILED="InterfaceResponseError"}(p||(p={})),function(t){t.COMMON_ERROR="CommonError",t.IDE_ERROR="IDEError"}(f||(f={}));var l=64,d=120,h=["admin","system","basement"],m=["basement"],y={INVALID_TYPE:"field type is invalid",NOT_STRING:"field is not a string",NOT_ARRAY:"field is not an array",NOT_EMPTY:"field should not be empty",TOO_LONG:"field is too long",ILLEGAL:"field should not contain illegal character",SYSTEM:"field is in conflict with system names"}},function(t,e,n){"use strict";var r,i;n.d(e,"e",(function(){return r})),n.d(e,"m",(function(){return i})),n.d(e,"l",(function(){return a})),n.d(e,"j",(function(){return c})),n.d(e,"k",(function(){return l})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return p})),n.d(e,"d",(function(){return f})),n.d(e,"h",(function(){return d})),n.d(e,"i",(function(){return h})),n.d(e,"g",(function(){return m})),n.d(e,"f",(function(){return y})),n.d(e,"b",(function(){return b})),function(t){t.GET="GET",t.DEL="DELETE",t.POST="POST"}(r||(r={})),function(t){t.HTTP="HTTP"}(i||(i={}));var o,s,a="x-serverless-";!function(t){t.CLIENT="/client",t.SERVER="/server",t.ANTCLOUD="/antcloud",t.ANTOPENANTCLOUD="/antopen/antcloud"}(o||(o={})),function(t){t.PUBLIC="public",t.PRIVATE="private"}(s||(s={}));var c;!function(t){t.READ=".read",t.WRITE=".write",t.CREATE="document.create",t.UPDATE="document.update",t.DELETE="document.delete",t.AGGREGATE=".aggregate",t.INDEX=".index",t.COLLECTION="collection.manage",t.DATABASE="database.manage",t.SYSTEM="system.manage"}(c||(c={}));var u,p,f,l=["i","m","u","g"];!function(t){t.VALIDATION_ERROR="ValidationError",t.UNSUPPORTED_ERROR="UnsupportedError",t.UNAUTHORIZED_ERROR="UnauthorizedError",t.INTERFACE_ERROR="InterfaceError",t.IDE_ERROR="IDEError"}(u||(u={})),function(t){t.COMMAND_MISSING="CommandMissing",t.VALIDATION_FAILED="ValidationFailed",t.AUTHENTICATION_FAILED="AuthenticationFailed",t.UNAUTHENTICATION="Unauthentication",t.INTERFACE_RESPONSE_FAILED="InterfaceResponseError"}(p||(p={})),function(t){t.COMMON_ERROR="CommonError",t.IDE_ERROR="IDEError"}(f||(f={}));var d=64,h=120,m=["admin","system","basement"],y=["basement"],b={INVALID_TYPE:"field type is invalid",NOT_STRING:"field is not a string",NOT_ARRAY:"field is not an array",NOT_EMPTY:"field should not be empty",TOO_LONG:"field is too long",ILLEGAL:"field should not contain illegal character",SYSTEM:"field is in conflict with system names"}},function(t,e,n){"use strict";var r=n(13);n.d(e,"BasementClientError",(function(){return r.a}));var i=n(27);n.o(i,"BaseService")&&n.d(e,"BaseService",(function(){return i.BaseService})),n.o(i,"ErrorCode")&&n.d(e,"ErrorCode",(function(){return i.ErrorCode})),n.o(i,"ErrorName")&&n.d(e,"ErrorName",(function(){return i.ErrorName})),n.o(i,"ErrorType")&&n.d(e,"ErrorType",(function(){return i.ErrorType})),n.o(i,"OSSEnv")&&n.d(e,"OSSEnv",(function(){return i.OSSEnv}));n(9);var o=n(5);n.d(e,"ErrorCode",(function(){return o.a})),n.d(e,"ErrorName",(function(){return o.c})),n.d(e,"ErrorType",(function(){return o.d})),n.d(e,"OSSEnv",(function(){return o.j}));n(18),n(28);var s=n(29);n.d(e,"BaseService",(function(){return s.a}));n(30)},function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return y})),n.d(e,"a",(function(){return b}));var r={};n.r(r),n.d(r,"ruleOfField",(function(){return u})),n.d(r,"ruleOfFields",(function(){return p})),n.d(r,"ruleOfDatabaseName",(function(){return f})),n.d(r,"ruleOfCollectionName",(function(){return l}));var i={log:function(){},info:function(){},warn:function(){},error:function(){},debug:function(){}},o=n(15),s=n.n(o),a=n(0),c=n(4);function u(t,e){function n(t){if(/[\.\$]/.test(t))return c.b.ILLEGAL}if(!Array.isArray(e)){if("string"==typeof e)return n(e);for(var r=null,i=0,o=Object.keys(e);i<o.length;i++){var s=o[i];if("string"==typeof(r=n(s)))return r;if("object"==typeof e[s])return u(t,e[s])}return null===r?c.b.INVALID_TYPE:void 0}}function p(t,e){if(!Array.isArray(e))return c.b.NOT_ARRAY;for(var n,r=0;!n&&r<e.length;)n=u(null,e[r]),r++;return n}function f(t,e){return"string"!=typeof e?c.b.NOT_STRING:0===e.trim().length?c.b.NOT_EMPTY:e.length>c.i?c.b.TOO_LONG:/[\/\\\.\ \"\$]/.test(e)?c.b.ILLEGAL:c.h.indexOf(e)>-1?c.b.SYSTEM:void 0}function l(t,e){if("string"!=typeof e)return c.b.NOT_STRING;if(0===e.trim().length)return c.b.NOT_EMPTY;if(e.length>c.j)return c.b.TOO_LONG;if(e.indexOf("$")>-1)return c.b.ILLEGAL;var n=e.split(".").shift();return c.g.indexOf(n)>=0?c.b.ILLEGAL:/^[_a-z]/i.test(e)?void 0:c.b.ILLEGAL}var d=Object(a.a)({},r),h=n(12);!function(){function t(t){this.p=new s.a(t);for(var e=0,n=Object.keys(d);e<n.length;e++){var r=n[e],i=r.match(/ruleOf([a-zA-Z]+)/)[1];this.p.addRule(i[0].toLowerCase()+i.slice(1),d[r])}}t.prototype.validate=function(t,e){"object"!=typeof e&&"string"==typeof t&&(e={field:e},t={field:t});var n=this.p.validate(t,e);if(!n)return null;var r=n.map((function(t){if(t.field){for(var n=JSON.parse(JSON.stringify(e)),r=t.field.match(/[^\.\[\]]+/g);r.length;){var i=r.shift();if(!n.hasOwnProperty(i))break;n=n[i]}t.value=n}return t}));throw new h.a(c.c.VALIDATION_ERROR,c.a.VALIDATION_FAILED,c.d.COMMON_ERROR,function t(e){return Array.isArray(e)?e.map(t).join("; "):e.field+" "+e.message}(r))}}();function m(t,e){if(!t)throw new h.a(c.c.VALIDATION_ERROR,c.a.VALIDATION_FAILED,c.d.COMMON_ERROR,e)}function y(t){return t.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))}function b(t){return{id:t.id,key:t.ossPath,host:t.host,policy:t.policy,Signature:t.signature,OSSAccessKeyId:t.accessKeyId,securityToken:t.securityToken,cdnDomain:t.cdnDomain}}},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return y}));var r={};n.r(r),n.d(r,"ruleOfField",(function(){return u})),n.d(r,"ruleOfFields",(function(){return p})),n.d(r,"ruleOfDatabaseName",(function(){return f})),n.d(r,"ruleOfCollectionName",(function(){return l}));var i={log:function(){},info:function(){},warn:function(){},error:function(){},debug:function(){}},o=n(15),s=n.n(o),a=n(0),c=n(5);function u(t,e){function n(t){if(/[\.\$]/.test(t))return c.b.ILLEGAL}if(!Array.isArray(e)){if("string"==typeof e)return n(e);for(var r=null,i=0,o=Object.keys(e);i<o.length;i++){var s=o[i];if("string"==typeof(r=n(s)))return r;if("object"==typeof e[s])return u(t,e[s])}return null===r?c.b.INVALID_TYPE:void 0}}function p(t,e){if(!Array.isArray(e))return c.b.NOT_ARRAY;for(var n,r=0;!n&&r<e.length;)n=u(null,e[r]),r++;return n}function f(t,e){return"string"!=typeof e?c.b.NOT_STRING:0===e.trim().length?c.b.NOT_EMPTY:e.length>c.h?c.b.TOO_LONG:/[\/\\\.\ \"\$]/.test(e)?c.b.ILLEGAL:c.g.indexOf(e)>-1?c.b.SYSTEM:void 0}function l(t,e){if("string"!=typeof e)return c.b.NOT_STRING;if(0===e.trim().length)return c.b.NOT_EMPTY;if(e.length>c.i)return c.b.TOO_LONG;if(e.indexOf("$")>-1)return c.b.ILLEGAL;var n=e.split(".").shift();return c.f.indexOf(n)>=0?c.b.ILLEGAL:/^[_a-z]/i.test(e)?void 0:c.b.ILLEGAL}var d=Object(a.a)({},r),h=n(13);!function(){function t(t){this.p=new s.a(t);for(var e=0,n=Object.keys(d);e<n.length;e++){var r=n[e],i=r.match(/ruleOf([a-zA-Z]+)/)[1];this.p.addRule(i[0].toLowerCase()+i.slice(1),d[r])}}t.prototype.validate=function(t,e){"object"!=typeof e&&"string"==typeof t&&(e={field:e},t={field:t});var n=this.p.validate(t,e);if(!n)return null;var r=n.map((function(t){if(t.field){for(var n=JSON.parse(JSON.stringify(e)),r=t.field.match(/[^\.\[\]]+/g);r.length;){var i=r.shift();if(!n.hasOwnProperty(i))break;n=n[i]}t.value=n}return t}));throw new h.a(c.c.VALIDATION_ERROR,c.a.VALIDATION_FAILED,c.d.COMMON_ERROR,function t(e){return Array.isArray(e)?e.map(t).join("; "):e.field+" "+e.message}(r))}}();function m(t,e){if(!t)throw new h.a(c.c.VALIDATION_ERROR,c.a.VALIDATION_FAILED,c.d.COMMON_ERROR,e)}function y(t){return t.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))}},function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return y})),n.d(e,"c",(function(){return b}));var r={};n.r(r),n.d(r,"ruleOfField",(function(){return u})),n.d(r,"ruleOfFields",(function(){return p})),n.d(r,"ruleOfDatabaseName",(function(){return f})),n.d(r,"ruleOfCollectionName",(function(){return l}));var i={log:function(){},info:function(){},warn:function(){},error:function(){},debug:function(){}},o=n(15),s=n.n(o),a=n(0),c=n(6);function u(t,e){function n(t){if(/[\.\$]/.test(t))return c.b.ILLEGAL}if(!Array.isArray(e)){if("string"==typeof e)return n(e);for(var r=null,i=0,o=Object.keys(e);i<o.length;i++){var s=o[i];if("string"==typeof(r=n(s)))return r;if("object"==typeof e[s])return u(t,e[s])}return null===r?c.b.INVALID_TYPE:void 0}}function p(t,e){if(!Array.isArray(e))return c.b.NOT_ARRAY;for(var n,r=0;!n&&r<e.length;)n=u(null,e[r]),r++;return n}function f(t,e){return"string"!=typeof e?c.b.NOT_STRING:0===e.trim().length?c.b.NOT_EMPTY:e.length>c.h?c.b.TOO_LONG:/[\/\\\.\ \"\$]/.test(e)?c.b.ILLEGAL:c.g.indexOf(e)>-1?c.b.SYSTEM:void 0}function l(t,e){if("string"!=typeof e)return c.b.NOT_STRING;if(0===e.trim().length)return c.b.NOT_EMPTY;if(e.length>c.i)return c.b.TOO_LONG;if(e.indexOf("$")>-1)return c.b.ILLEGAL;var n=e.split(".").shift();return c.f.indexOf(n)>=0?c.b.ILLEGAL:/^[_a-z]/i.test(e)?void 0:c.b.ILLEGAL}var d=Object(a.a)({},r),h=n(14),m=function(){function t(t){this.p=new s.a(t);for(var e=0,n=Object.keys(d);e<n.length;e++){var r=n[e],i=r.match(/ruleOf([a-zA-Z]+)/)[1];this.p.addRule(i[0].toLowerCase()+i.slice(1),d[r])}}return t.prototype.validate=function(t,e){"object"!=typeof e&&"string"==typeof t&&(e={field:e},t={field:t});var n=this.p.validate(t,e);if(!n)return null;var r=n.map((function(t){if(t.field){for(var n=JSON.parse(JSON.stringify(e)),r=t.field.match(/[^\.\[\]]+/g);r.length;){var i=r.shift();if(!n.hasOwnProperty(i))break;n=n[i]}t.value=n}return t}));throw new h.a(c.c.VALIDATION_ERROR,c.a.VALIDATION_FAILED,c.d.COMMON_ERROR,function t(e){return Array.isArray(e)?e.map(t).join("; "):e.field+" "+e.message}(r))},t}();function y(t,e){if(!t)throw new h.a(c.c.VALIDATION_ERROR,c.a.VALIDATION_FAILED,c.d.COMMON_ERROR,e)}function b(t){return t.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))}},function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return u}));var r=n(0),i=n(1);function o(t){return Array.isArray(t)}function s(t){return null!==t&&"object"==typeof t&&!o(t)}function a(t){return"string"==typeof t||function(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}(t,"String")}var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.encode=function(t){var e=this;return t instanceof RegExp?this.toRegexp(t):t instanceof Date?this.toDate(t):o(t)?t.map((function(t){return e.encode(t)})):s(t)?Object.keys(t).reduce((function(n,r){return n[r]=e.encode(t[r]),n}),{}):t},e.prototype.toDate=function(t){return t.toISOString()},e.prototype.toRegexp=function(t){return"/"+t.source.replace(/\\\//g,"/")+"/"+t.flags},e}(i.BaseEncoder),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.d)(e,t),e.prototype.decode=function(t){var e=this;return this.isRegexp(t)?this.toRegexp(t):this.isDate(t)?this.toDate(t):o(t)?t.map((function(t){return e.decode(t)})):s(t)?Object.keys(t).reduce((function(n,r){return n[r]=e.decode(t[r]),n}),{}):t},e.prototype.isDate=function(t){return a(t)&&/^\d{4}\-\d{2}\-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/.test(t)&&!isNaN(Date.parse(t))},e.prototype.isRegexp=function(t){if(a(t)){var e=!0,n=t.split("/"),r=n[n.length-1];return r&&(e=r.split("").reduce((function(t,e){return!0===t&&i.REGEXP_FLAGS.indexOf(e)>-1}),!0)),n.length>=2&&e}return!1},e.prototype.toDate=function(t){return new Date(t)},e.prototype.toRegexp=function(t){var e=t.indexOf("/"),n=t.lastIndexOf("/");return new RegExp(t.slice(e+1,n),t.slice(n+1))},e}(i.BaseDecoder)},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=n(0),i=function(t){this.message=t,Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this)},o=function(t){function e(e,n,r,i){var o=t.call(this,i)||this;return o.name=e,o.code=n,o.type=r,o.message=i,o}return Object(r.d)(e,t),e.from=function(t){return new e(t.name,t.code,t.type,t.message)},e}(i)},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0),i=function(t){function e(e,n,r,i){var o=t.call(this,i)||this;return o.name=e,o.code=n,o.type=r,o.message=i,o}return Object(r.d)(e,t),e.from=function(t){return new e(t.name,t.code,t.type,t.message)},e}((function(t){this.message=t,Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this)}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(0),i=function(t){function e(e,n,r,i){var o=t.call(this,i)||this;return o.name=e,o.code=n,o.type=r,o.message=i,o}return Object(r.d)(e,t),e.from=function(t){return new e(t.name,t.code,t.type,t.message)},e}((function(t){this.message=t,Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this)}))},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=n(20),s=/^\d{4}\-\d{2}\-\d{2}$/,a=/^\d{4}\-\d{2}\-\d{2} \d{2}:\d{2}:\d{2}$/,c=/^\d+$/,u=/^[a-z0-9\!\#\$\%\&\'\*\+\/\=\?\^\_\`\{\|\}\~\-]+(?:\.[a-z0-9\!\#\$\%\&\'\*\+\/\=\?\^\_\`\{\|\}\~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?$/i,p=/^[\w\`\~\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\]\{\}\|\;\:\'\"\,\<\.\>\/\?]+$/,f=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/i,l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"function"==typeof(e=e||{}).translate&&(this.translate=e.translate),e.validateRoot&&(this.validateRoot=!0),e.convert&&(this.convert=!0),e.widelyUndefined&&(this.widelyUndefined=!0)}return i(t,[{key:"t",value:function(){var t=Array.prototype.slice.call(arguments);return"function"==typeof this.translate?this.translate.apply(this,t):o.format.apply(o,t)}},{key:"validate",value:function(t,e){if("object"!==(void 0===t?"undefined":r(t)))throw new TypeError("need object type rule");if(this.validateRoot&&("object"!==(void 0===e?"undefined":r(e))||!e))return[{message:this.t("the validated value should be a object"),code:this.t("invalid"),field:void 0}];var n=[];for(var i in t){var o=m(t[i]),s=e[i];"string"==typeof s&&!0===o.trim&&(s=e[i]=s.trim());var a=this.widelyUndefined;if("widelyUndefined"in o&&(a=o.widelyUndefined),a&&(""===s||null===s||Number.isNaN(s))&&(s=e[i]=void 0),null!=s){var c=d[o.type];if(!c)throw new TypeError("rule type must be one of "+Object.keys(d).join(", ")+", but the following type was passed: "+o.type);y(o,e,i,this.convert);var u=c.call(this,o,e[i],e);"string"==typeof u&&n.push({message:u,code:this.t("invalid"),field:i}),Array.isArray(u)&&u.forEach((function(t){var e="object"===o.type?".":"";t.field=i+e+t.field,n.push(t)}))}else!1!==o.required&&n.push({message:this.t("required"),field:i,code:this.t("missing_field")}),"default"in o&&(e[i]=o.default)}return n.length?n:void 0}}]),t}();t.exports=l,l.prototype.addRule=l.addRule=function(t,e,n,r){if(!t)throw new TypeError("`type` required");if("string"!=typeof n&&"function"!=typeof n||(r=n,n=!0),"boolean"!=typeof n&&(n=!0),!n&&d[t])throw new TypeError("rule `"+t+"` exists");if(r){if("string"!=typeof r&&"function"!=typeof r)throw new TypeError("convertType should be string or function");l.CONVERT_MAP[t]=r}if("function"!=typeof e){if(!(e instanceof RegExp))throw new TypeError("check must be function or regexp");d[t]=function(t,n){return g.call(this,{format:e},n)}}else d[t]=e};var d=l.TYPE_MAP={number:function(t,e){if("number"!=typeof e||isNaN(e))return this.t("should be a number");if(t.hasOwnProperty("max")&&e>t.max)return this.t("should smaller than %s",t.max);if(t.hasOwnProperty("min")&&e<t.min)return this.t("should bigger than %s",t.min)},int:b,integer:b,string:g,id:function(t,e){return g.call(this,{format:c,allowEmpty:t.allowEmpty},e)},date:function(t,e){return g.call(this,{format:s,allowEmpty:t.allowEmpty},e)},dateTime:O,datetime:O,boolean:v,bool:v,array:function(t,e){if(!Array.isArray(e))return this.t("should be an array");if(t.hasOwnProperty("max")&&e.length>t.max)return this.t("length should smaller than %s",t.max);if(t.hasOwnProperty("min")&&e.length<t.min)return this.t("length should bigger than %s",t.min);if(!t.itemType)return;var n=this,r=d[t.itemType];if(!r)throw new TypeError("rule type must be one of "+Object.keys(d).join(", ")+", but the following type was passed: "+t.itemType);var i=[],o="object"===t.itemType?t:t.rule||m(t.itemType);return e.forEach((function(t,e){var s="["+e+"]",a=r.call(n,o,t);"string"==typeof a&&i.push({field:s,message:a,code:n.t("invalid")}),Array.isArray(a)&&(i=i.concat(a.map((function(t){return t.field=s+"."+t.field,t.message=t.message,t}))))})),i},object:function(t,e){if("object"!==(void 0===e?"undefined":r(e)))return this.t("should be an object");if(t.rule)return this.validate(t.rule,e)},enum:function(t,e){if(!Array.isArray(t.values))throw new TypeError("check enum need array type values");if(-1===t.values.indexOf(e))return this.t("should be one of %s",t.values.join(", "))},email:function(t,e){return g.call(this,{format:u,message:t.message||this.t("should be an email"),allowEmpty:t.allowEmpty},e)},password:function(t,e,n){t.min||(t.min=6);t.format=p;var r=g.call(this,t,e);if(r)return r;if(t.compare&&n[t.compare]!==e)return this.t("should equal to %s",t.compare)},url:function(t,e){return g.call(this,{format:f,message:t.message||this.t("should be a url"),allowEmpty:t.allowEmpty},e)}},h=l.CONVERT_MAP={number:"number",int:"int",integer:"int",string:"string",id:"string",date:"string",dateTime:"string",datetime:"string",boolean:"bool",bool:"bool",email:"string",password:"string",url:"string"};function m(t){return"string"==typeof(t=t||{})?t={type:t}:Array.isArray(t)?t={type:"enum",values:t}:t instanceof RegExp&&(t={type:"string",format:t}),t.type&&"?"===t.type[t.type.length-1]&&(t.type=t.type.slice(0,-1),t.required=!1),t}function y(t,e,n,i){var o;if(i&&(o=h[t.type]),t.convertType&&(o=t.convertType),o){var s=e[n];if("object"!==(void 0===s?"undefined":r(s)))if("function"!=typeof o)switch(o){case"int":e[n]=parseInt(s,10);break;case"string":e[n]=String(s);break;case"number":e[n]=Number(e[n]);break;case"bool":case"boolean":e[n]=!!s;break;default:"function"==typeof h[o]&&(e[n]=h[t.type](e[n]))}else e[n]=o(s,e)}}function b(t,e){return"number"!=typeof e||e%1!=0?this.t("should be an integer"):t.hasOwnProperty("max")&&e>t.max?this.t("should smaller than %s",t.max):t.hasOwnProperty("min")&&e<t.min?this.t("should bigger than %s",t.min):void 0}function g(t,e){if("string"!=typeof e)return this.t("should be a string");t.hasOwnProperty("allowEmpty")||!1!==t.required||(t.allowEmpty=!0);var n=t.hasOwnProperty("allowEmpty")?t.allowEmpty:t.empty;if(!e){if(n)return;return this.t("should not be empty")}return t.hasOwnProperty("max")&&e.length>t.max?this.t("length should smaller than %s",t.max):t.hasOwnProperty("min")&&e.length<t.min?this.t("length should bigger than %s",t.min):t.format&&!t.format.test(e)?t.message||this.t("should match %s",t.format):void 0}function O(t,e){return g.call(this,{format:a,allowEmpty:t.allowEmpty},e)}function v(t,e){if("boolean"!=typeof e)return this.t("should be a boolean")}},function(t,e,n){var r;t.exports=(r=r||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),r={},i=r.lib={},o=i.Base={extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=s<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)e[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,r=[],i=function(e){e=e;var n=987654321,r=4294967295;return function(){var i=((n=36969*(65535&n)+(n>>16)&r)<<16)+(e=18e3*(65535&e)+(e>>16)&r)&r;return i/=4294967296,(i+=.5)*(t.random()>.5?1:-1)}},o=0;o<e;o+=4){var a=i(4294967296*(n||t.random()));n=987654071*a(),r.push(4294967296*a()|0)}return new s.init(r,e)}}),a=r.enc={},c=a.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new s.init(n,e/2)}},u=a.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new s.init(n,e)}},p=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},f=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=p.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o),c=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*o,u=t.min(4*c,i);if(c){for(var p=0;p<c;p+=o)this._doProcessBlock(r,p);var f=r.splice(0,c);n.sigBytes-=u}return new s.init(f,u)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),l=(i.Hasher=f.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new l.HMAC.init(t,n).finalize(e)}}}),r.algo={});return r}(Math),r)},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return c}));var r=n(0),i=n(4),o=n(8),s=function(t){function e(e,n){var r=t.call(this)||this;return r.endpoint=e,r.body={},r.query={},r.method=i.e.POST,r.prefix="",r.baseHeaders={},r.serviceHeaders={},r.serverlessHeaders={},n&&(r.prefix=n),r}return Object(r.d)(e,t),Object.defineProperty(e.prototype,"url",{get:function(){return[this.endpoint+this.prefix].filter((function(t){return!!t})).join("?")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){var t=this,e=Object.keys(this.serverlessHeaders).reduce((function(e,n){return e[""+i.m+Object(o.c)(n)]=t.serverlessHeaders[n],e}),{});return Object(r.a)(Object(r.a)({},this.baseHeaders),e)},enumerable:!1,configurable:!0}),e.prototype.setBodyField=function(t){return this.body=Object.assign({},this.body,Object(r.a)({},t)),this},e.prototype.setUserId=function(t){return this.setBodyField({userId:t}),this},e.prototype.setBaseHeaders=function(t){return void 0===t&&(t={}),this.baseHeaders=Object(r.a)(Object(r.a)({},this.baseHeaders),Object.keys(t).reduce((function(e,n){return t[n]&&(e[n]=t[n].toString()),e}),{})),this},e.prototype.setServerlessHeaders=function(t){return void 0===t&&(t={}),this.serverlessHeaders=Object(r.a)(Object(r.a)({},this.serverlessHeaders),Object.keys(t).reduce((function(e,n){return t[n]&&(e[n]=t[n].toString()),e}),{})),this},e.prototype.encode=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.body.params&&(this.body.params=JSON.stringify(this.body.params)),{url:this.url,body:this.body,method:this.method,headers:this.headers}},e}((function(){})),a=n(12),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.DEMARCATION_STATUS=400,e._body={},e._headers={},e}return Object(r.d)(e,t),e.prototype.setHeaders=function(t){this._headers=Object(r.a)(Object(r.a)({},this._headers),t)},e.prototype.setStatusAndBody=function(t,e){this._status=t,this._body=e,t>=this.DEMARCATION_STATUS&&(this._error=a.a.from(e))},e.prototype.setErrorMessage=function(t){this._error=new Error(t)},e.prototype.setErrorObject=function(t){this._error=t},e.prototype.decode=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return{body:this._body||{},error:this._error,status:this._status,headers:this._headers}},e}((function(){}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return c}));var r=n(0),i=n(5),o=n(9),s=function(t){function e(e,n){var r=t.call(this)||this;return r.endpoint=e,r.body={},r.query={},r.method=i.e.POST,r.prefix="",r.baseHeaders={},r.serviceHeaders={},r.serverlessHeaders={},n&&(r.prefix=n),r}return Object(r.d)(e,t),Object.defineProperty(e.prototype,"url",{get:function(){return[this.endpoint+this.prefix].filter((function(t){return!!t})).join("?")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){var t=this,e=Object.keys(this.serverlessHeaders).reduce((function(e,n){return e[""+i.k+Object(o.b)(n)]=t.serverlessHeaders[n],e}),{});return Object(r.a)(Object(r.a)({},this.baseHeaders),e)},enumerable:!1,configurable:!0}),e.prototype.setBodyField=function(t){return this.body=Object.assign({},this.body,Object(r.a)({},t)),this},e.prototype.setUserId=function(t){return this.setBodyField({userId:t}),this},e.prototype.setBaseHeaders=function(t){return void 0===t&&(t={}),this.baseHeaders=Object(r.a)(Object(r.a)({},this.baseHeaders),Object.keys(t).reduce((function(e,n){return t[n]&&(e[n]=t[n].toString()),e}),{})),this},e.prototype.setServerlessHeaders=function(t){return void 0===t&&(t={}),this.serverlessHeaders=Object(r.a)(Object(r.a)({},this.serverlessHeaders),Object.keys(t).reduce((function(e,n){return t[n]&&(e[n]=t[n].toString()),e}),{})),this},e.prototype.encode=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.body.params&&(this.body.params=JSON.stringify(this.body.params)),{url:this.url,body:this.body,method:this.method,headers:this.headers}},e}((function(){})),a=n(13),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.DEMARCATION_STATUS=400,e._body={},e._headers={},e}return Object(r.d)(e,t),e.prototype.setHeaders=function(t){this._headers=Object(r.a)(Object(r.a)({},this._headers),t)},e.prototype.setStatusAndBody=function(t,e){this._status=t,this._body=e,t>=this.DEMARCATION_STATUS&&(this._error=a.a.from(e))},e.prototype.setErrorMessage=function(t){this._error=new Error(t)},e.prototype.setErrorObject=function(t){this._error=t},e.prototype.decode=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return{body:this._body||{},error:this._error,status:this._status,headers:this._headers}},e}((function(){}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return u})),n.d(e,"d",(function(){return p}));var r=n(0),i=n(6),o=n(10),s=function(){},a=function(t){function e(e,n){var r=t.call(this)||this;return r.endpoint=e,r.body={},r.query={},r.method=i.e.POST,r.prefix="",r.baseHeaders={},r.serviceHeaders={},r.serverlessHeaders={},n&&(r.prefix=n),r}return Object(r.d)(e,t),Object.defineProperty(e.prototype,"url",{get:function(){return[this.endpoint+this.prefix].filter((function(t){return!!t})).join("?")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){var t=this,e=Object.keys(this.serverlessHeaders).reduce((function(e,n){return e[""+i.l+Object(o.c)(n)]=t.serverlessHeaders[n],e}),{});return Object(r.a)(Object(r.a)({},this.baseHeaders),e)},enumerable:!1,configurable:!0}),e.prototype.setBodyField=function(t){return this.body=Object.assign({},this.body,Object(r.a)({},t)),this},e.prototype.setUserId=function(t){return this.setBodyField({userId:t}),this},e.prototype.setBaseHeaders=function(t){return void 0===t&&(t={}),this.baseHeaders=Object(r.a)(Object(r.a)({},this.baseHeaders),Object.keys(t).reduce((function(e,n){return t[n]&&(e[n]=t[n].toString()),e}),{})),this},e.prototype.setServerlessHeaders=function(t){return void 0===t&&(t={}),this.serverlessHeaders=Object(r.a)(Object(r.a)({},this.serverlessHeaders),Object.keys(t).reduce((function(e,n){return t[n]&&(e[n]=t[n].toString()),e}),{})),this},e.prototype.encode=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.body.params&&(this.body.params=JSON.stringify(this.body.params)),{url:this.url,body:this.body,method:this.method,headers:this.headers}},e}(s),c=n(14),u=function(){},p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.DEMARCATION_STATUS=400,e._body={},e._headers={},e}return Object(r.d)(e,t),e.prototype.setHeaders=function(t){this._headers=Object(r.a)(Object(r.a)({},this._headers),t)},e.prototype.setStatusAndBody=function(t,e){this._status=t,this._body=e,t>=this.DEMARCATION_STATUS&&(this._error=c.a.from(e))},e.prototype.setErrorMessage=function(t){this._error=new Error(t)},e.prototype.setErrorObject=function(t){this._error=t},e.prototype.decode=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return{body:this._body||{},error:this._error,status:this._status,headers:this._headers}},e}(u)},function(t,e,n){(function(t){var r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},i=/%[sdj%]/g;e.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,s=String(t).replace(i,(function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),c=r[n];n<o;c=r[++n])m(c)||!v(c)?s+=" "+c:s+=" "+a(c);return s},e.deprecate=function(n,r){if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var o,s={};function a(t,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(n)?r.showHidden=n:n&&e._extend(r,n),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),p(r,t,r.depth)}function c(t,e){var n=a.styles[e];return n?"["+a.colors[n][0]+"m"+t+"["+a.colors[n][1]+"m":t}function u(t,e){return t}function p(t,n,r){if(t.customInspect&&n&&T(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return b(i)||(i=p(t,i,r)),i}var o=function(t,e){if(g(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(y(e))return t.stylize(""+e,"number");if(h(e))return t.stylize(""+e,"boolean");if(m(e))return t.stylize("null","null")}(t,n);if(o)return o;var s=Object.keys(n),a=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),E(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(n);if(0===s.length){if(T(n)){var c=n.name?": "+n.name:"";return t.stylize("[Function"+c+"]","special")}if(O(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(j(n))return t.stylize(Date.prototype.toString.call(n),"date");if(E(n))return f(n)}var u,v="",x=!1,I=["{","}"];(d(n)&&(x=!0,I=["[","]"]),T(n))&&(v=" [Function"+(n.name?": "+n.name:"")+"]");return O(n)&&(v=" "+RegExp.prototype.toString.call(n)),j(n)&&(v=" "+Date.prototype.toUTCString.call(n)),E(n)&&(v=" "+f(n)),0!==s.length||x&&0!=n.length?r<0?O(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),u=x?function(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)S(e,String(s))?o.push(l(t,e,n,r,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(l(t,e,n,r,i,!0))})),o}(t,n,r,a,s):s.map((function(e){return l(t,n,r,a,e,x)})),t.seen.pop(),function(t,e,n){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(u,v,I)):I[0]+v+I[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,n,r,i,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),S(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=m(n)?p(t,c.value,null):p(t,c.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),g(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function d(t){return Array.isArray(t)}function h(t){return"boolean"==typeof t}function m(t){return null===t}function y(t){return"number"==typeof t}function b(t){return"string"==typeof t}function g(t){return void 0===t}function O(t){return v(t)&&"[object RegExp]"===x(t)}function v(t){return"object"==typeof t&&null!==t}function j(t){return v(t)&&"[object Date]"===x(t)}function E(t){return v(t)&&("[object Error]"===x(t)||t instanceof Error)}function T(t){return"function"==typeof t}function x(t){return Object.prototype.toString.call(t)}function I(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(g(o)&&(o=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var r=t.pid;s[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,r,t)}}else s[n]=function(){};return s[n]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=h,e.isNull=m,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=b,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=g,e.isRegExp=O,e.isObject=v,e.isDate=j,e.isError=E,e.isFunction=T,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(39);var _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function w(){var t=new Date,e=[I(t.getHours()),I(t.getMinutes()),I(t.getSeconds())].join(":");return[t.getDate(),_[t.getMonth()],e].join(" ")}function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",w(),e.format.apply(e,arguments))},e.inherits=n(40),e._extend=function(t,e){if(!e||!v(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var A="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function R(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(A&&t[A]){var e;if("function"!=typeof(e=t[A]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,A,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,r=new Promise((function(t,r){e=t,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,r){t?n(t):e(r)}));try{t.apply(this,i)}catch(t){n(t)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),A&&Object.defineProperty(e,A,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=A,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};e.apply(this,n).then((function(e){t.nextTick(s,null,e)}),(function(e){t.nextTick(R,e,s)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,r(e)),n}}).call(this,n(23))},function(t,e,n){"use strict";var r=n(44);t.exports=new r(n(45))},function(t,e){},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var c,u=[],p=!1,f=-1;function l(){p&&c&&(p=!1,c.length?u=c.concat(u):f=-1,u.length&&d())}function d(){if(!p){var t=a(l);p=!0;for(var e=u.length;e;){for(c=u,u=[];++f<e;)c&&c[f].run();f=-1,e=u.length}c=null,p=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new h(t,e)),1!==u.length||p||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(0),i=n(4),o=n(17),s=function(){function t(t,e){this.endpoint=t,this.library=e,this.protocol=i.n.HTTP}return t.prototype.getEncoder=function(t){return new o.a(this.endpoint,t)},t.prototype.setAppId=function(t){this.appId=t},t.prototype.setIsvAppId=function(t){t&&(this.isvAppId=t)},t.prototype.setAppSecret=function(t){return this.appSecret=t,this},t.prototype.setUA=function(t){return this.ua=t,this},t.prototype.setLogger=function(t){this.logger=t},t.prototype.setTimeout=function(t){if(void 0===t&&(t="5s"),"string"==typeof t){if(t.indexOf("ms")>=0)return void(this.timeout=parseInt(t,10));if(t.indexOf("s")>=0)return void(this.timeout=1e3*parseInt(t,10))}else if("number"==typeof t)return void(this.timeout=t);this.timeout=5e3},t.prototype.setSpaceId=function(t){this.spaceId=t},t.prototype.request=function(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(t){return[2,(new o.b).decode()]}))}))},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(t){this.transport=t}return t.prototype.getEncoder=function(t){return this.transport.getEncoder(t)},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(8),i=function(){function t(t){Object(r.b)(t,"options is required"),Object(r.b)(t.spaceId,"spaceId is required"),Object(r.b)(t.endpoint,"endpoint is required"),Object(r.b)(t.httpClient,"http client is required"),this._debug=!1,this._logger=t.logger||r.d,this.options=t,this.createTransport(t)}return t.prototype.setDebugFlag=function(t){this._debug=t,this.transport.setLogger(this.logger)},Object.defineProperty(t.prototype,"debug",{get:function(){return this._debug},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logger",{get:function(){return this._debug?this._logger:r.d},enumerable:!1,configurable:!0}),t.prototype.createTransport=function(t){var e=t.httpTransport;this.transport=new e(t.endpoint,t.httpClient),this.transport.setAppId(t.appId),this.transport.setLogger(this.logger),this.transport.setSpaceId(t.spaceId),this.transport.setTimeout(t.timeout),this.transport.setIsvAppId(t.isvAppId)},t}()},function(t,e){},function(t,e,n){"use strict";var r=n(0),i=n(5),o=n(18);!function(){function t(t,e){this.endpoint=t,this.library=e,this.protocol=i.l.HTTP}t.prototype.getEncoder=function(t){return new o.a(this.endpoint,t)},t.prototype.setAppId=function(t){this.appId=t},t.prototype.setIsvAppId=function(t){t&&(this.isvAppId=t)},t.prototype.setAppSecret=function(t){return this.appSecret=t,this},t.prototype.setUA=function(t){return this.ua=t,this},t.prototype.setLogger=function(t){this.logger=t},t.prototype.setTimeout=function(t){if(void 0===t&&(t="5s"),"string"==typeof t){if(t.indexOf("ms")>=0)return void(this.timeout=parseInt(t,10));if(t.indexOf("s")>=0)return void(this.timeout=1e3*parseInt(t,10))}else if("number"==typeof t)return void(this.timeout=t);this.timeout=5e3},t.prototype.setSpaceId=function(t){this.spaceId=t},t.prototype.request=function(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(t){return[2,(new o.b).decode()]}))}))}}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(t){this.transport=t}return t.prototype.getEncoder=function(t){return this.transport.getEncoder(t)},t}()},function(t,e,n){"use strict";var r=n(9);!function(){function t(t){Object(r.a)(t,"options is required"),Object(r.a)(t.spaceId,"spaceId is required"),Object(r.a)(t.endpoint,"endpoint is required"),Object(r.a)(t.httpClient,"http client is required"),this._debug=!1,this._logger=t.logger||r.c,this.options=t,this.createTransport(t)}t.prototype.setDebugFlag=function(t){this._debug=t,this.transport.setLogger(this.logger)},Object.defineProperty(t.prototype,"debug",{get:function(){return this._debug},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logger",{get:function(){return this._debug?this._logger:r.c},enumerable:!1,configurable:!0}),t.prototype.createTransport=function(t){var e=t.httpTransport;this.transport=new e(t.endpoint,t.httpClient),this.transport.setAppId(t.appId),this.transport.setLogger(this.logger),this.transport.setSpaceId(t.spaceId),this.transport.setTimeout(t.timeout),this.transport.setIsvAppId(t.isvAppId)}}()},function(t,e){},function(t,e,n){"use strict";var r=n(0),i=n(6),o=n(19);!function(){function t(t,e){this.endpoint=t,this.library=e,this.protocol=i.m.HTTP}t.prototype.getEncoder=function(t){return new o.c(this.endpoint,t)},t.prototype.setAppId=function(t){this.appId=t},t.prototype.setIsvAppId=function(t){t&&(this.isvAppId=t)},t.prototype.setAppSecret=function(t){return this.appSecret=t,this},t.prototype.setUA=function(t){return this.ua=t,this},t.prototype.setLogger=function(t){this.logger=t},t.prototype.setTimeout=function(t){if(void 0===t&&(t="5s"),"string"==typeof t){if(t.indexOf("ms")>=0)return void(this.timeout=parseInt(t,10));if(t.indexOf("s")>=0)return void(this.timeout=1e3*parseInt(t,10))}else if("number"==typeof t)return void(this.timeout=t);this.timeout=5e3},t.prototype.setSpaceId=function(t){this.spaceId=t},t.prototype.request=function(t){return Object(r.b)(this,void 0,void 0,(function(){return Object(r.e)(this,(function(t){return[2,(new o.d).decode()]}))}))}}()},function(t,e,n){"use strict";!function(){function t(t){this.transport=t}t.prototype.getEncoder=function(t){return this.transport.getEncoder(t)}}()},function(t,e,n){"use strict";var r=n(10);!function(){function t(t){Object(r.b)(t,"options is required"),Object(r.b)(t.spaceId,"spaceId is required"),Object(r.b)(t.endpoint,"endpoint is required"),Object(r.b)(t.httpClient,"http client is required"),this._debug=!1,this._logger=t.logger||r.d,this.options=t,this.createTransport(t)}t.prototype.setDebugFlag=function(t){this._debug=t,this.transport.setLogger(this.logger)},Object.defineProperty(t.prototype,"debug",{get:function(){return this._debug},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logger",{get:function(){return this._debug?this._logger:r.d},enumerable:!1,configurable:!0}),t.prototype.createTransport=function(t){var e=t.httpTransport;this.transport=new e(t.endpoint,t.httpClient),this.transport.setAppId(t.appId),this.transport.setLogger(this.logger),this.transport.setSpaceId(t.spaceId),this.transport.setTimeout(t.timeout),this.transport.setIsvAppId(t.isvAppId)}}()},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return u}));var r=n(0),i=(n(41),n(1)),o=n(11),s=n(37),a=n(2),c=t.Reflect,u=function(){function t(){this.encoder=new o.b,this.decoder=new o.a}return t.prototype.collection=function(t){return this.coll=new s.a(t),this},t.prototype.aggregate=function(t,e){return this.comm=new a.a({pipeline:t,options:e}),this.execute()},t.prototype.count=function(t,e){return this.comm=new a.c({query:t,options:e}),this.execute()},t.prototype.distinct=function(t,e,n){return this.comm=new a.j({key:t,query:e,options:n}),this.execute()},t.prototype.findOne=function(t,e){return this.comm=new a.p({query:t,options:e}),this.execute()},t.prototype.find=function(t,e){return this.comm=new a.q({query:t,options:e}),this.execute()},t.prototype.insertOne=function(t,e){return this.comm=new a.r({doc:t,options:e}),this.execute()},t.prototype.insertMany=function(t,e){return this.comm=new a.s({docs:t,options:e}),this.execute()},t.prototype.findOneAndUpdate=function(t,e,n){return this.comm=new a.o({filter:t,update:e,options:n}),this.execute()},t.prototype.updateOne=function(t,e,n){return this.comm=new a.x({filter:t,update:e,options:n}),this.execute()},t.prototype.updateMany=function(t,e,n){return this.comm=new a.y({filter:t,update:e,options:n}),this.execute()},t.prototype.findOneAndReplace=function(t,e,n){return this.comm=new a.n({filter:t,replacement:e,options:n}),this.execute()},t.prototype.replaceOne=function(t,e,n){return this.comm=new a.w({filter:t,doc:e,options:n}),this.execute()},t.prototype.findOneAndDelete=function(t,e){return this.comm=new a.m({filter:t,options:e}),this.execute()},t.prototype.deleteOne=function(t,e){return this.comm=new a.h({filter:t,options:e}),this.execute()},t.prototype.deleteMany=function(t,e){return this.comm=new a.i({filter:t,options:e}),this.execute()},t.prototype.validate=function(){(new i.Validator).validate(this.comm.schema,this.encoder.encode(this.comm.argMap))},t.prototype.execute=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.e)(this,(function(e){switch(Object(i.assert)(this.comm,"command is missing"),this.validate(),this.comm.permission){case i.PERMISSION.AGGREGATE:case i.PERMISSION.INDEX:case i.PERMISSION.WRITE:case i.PERMISSION.READ:Object(i.assert)(this.collection,"collection is missing")}return t=Object.assign({},this.coll&&this.coll.inspect(),this.comm.inspect()),[2,this.encoder.encode(t)]}))}))},t.fromRawResponse=function(e){Object(i.assert)(e&&e.command,"malformed request");var n=new t,r=Object.getPrototypeOf(n),o=Object.getOwnPropertyNames(r).filter((function(t){return c.hasMetadata("commandClass",n,t)}));if(e.collection&&(n=n.collection(e.collection)),o.indexOf(e.command)>=0){var s=c.getMetadata("commandClass",n,e.command);return Object(i.assert)(a.b.isPrototypeOf(s),"invalid command"),delete e.collection,delete e.command,n.comm=new s(n.decoder.decode(e)),n.validate(),n}throw new i.BasementClientError(i.ErrorName.VALIDATION_ERROR,i.ErrorCode.COMMAND_MISSING,i.ErrorType.COMMON_ERROR,"command is missing")},Object(r.c)([c.metadata("commandClass",a.a),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Array,Object]),Object(r.f)("design:returntype",Promise)],t.prototype,"aggregate",null),Object(r.c)([c.metadata("commandClass",a.c),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Object,Object]),Object(r.f)("design:returntype",Promise)],t.prototype,"count",null),Object(r.c)([c.metadata("commandClass",a.j),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[String,Object,Object]),Object(r.f)("design:returntype",Promise)],t.prototype,"distinct",null),Object(r.c)([c.metadata("commandClass",a.p),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Object,Object]),Object(r.f)("design:returntype",Promise)],t.prototype,"findOne",null),Object(r.c)([c.metadata("commandClass",a.q),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Object,Object]),Object(r.f)("design:returntype",Promise)],t.prototype,"find",null),Object(r.c)([c.metadata("commandClass",a.r),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Object,Object]),Object(r.f)("design:returntype",Promise)],t.prototype,"insertOne",null),Object(r.c)([c.metadata("commandClass",a.s),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Array,Object]),Object(r.f)("design:returntype",Promise)],t.prototype,"insertMany",null),Object(r.c)([c.metadata("commandClass",a.o),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Object,Object,Object]),Object(r.f)("design:returntype",Promise)],t.prototype,"findOneAndUpdate",null),Object(r.c)([c.metadata("commandClass",a.x),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Object,Object,Object]),Object(r.f)("design:returntype",Promise)],t.prototype,"updateOne",null),Object(r.c)([c.metadata("commandClass",a.y),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Object,Object,Object]),Object(r.f)("design:returntype",Promise)],t.prototype,"updateMany",null),Object(r.c)([c.metadata("commandClass",a.n),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Object,Object,Object]),Object(r.f)("design:returntype",Promise)],t.prototype,"findOneAndReplace",null),Object(r.c)([c.metadata("commandClass",a.w),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Object,Object,Object]),Object(r.f)("design:returntype",Promise)],t.prototype,"replaceOne",null),Object(r.c)([c.metadata("commandClass",a.m),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Object,Object]),Object(r.f)("design:returntype",Promise)],t.prototype,"findOneAndDelete",null),Object(r.c)([c.metadata("commandClass",a.h),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Object,Object]),Object(r.f)("design:returntype",Promise)],t.prototype,"deleteOne",null),Object(r.c)([c.metadata("commandClass",a.i),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Object,Object]),Object(r.f)("design:returntype",Promise)],t.prototype,"deleteMany",null),t}();!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Object(r.d)(e,t),e.prototype.collections=function(){return this.comm=new a.t({}),this.execute()},e.prototype.createCollection=function(t,e){return this.comm=new a.d({name:t,options:e}),this.execute()},e.prototype.rename=function(t,e){return Object(i.assert)(this.coll,"collection must exist"),this.comm=new a.v({newName:t,options:e}),this.execute()},e.prototype.drop=function(t){return Object(i.assert)(this.coll,"collection must exist"),this.comm=new a.g({options:t}),this.execute()},e.prototype.listIndexes=function(t){return this.comm=new a.u({options:t}),this.execute()},e.prototype.createIndex=function(t,e){return this.comm=new a.e({field:t,options:e}),this.execute()},e.prototype.createIndexes=function(t,e){return this.comm=new a.f({fields:t,options:e}),this.execute()},e.prototype.dropIndex=function(t,e){return this.comm=new a.k({indexName:t,options:e}),this.execute()},e.prototype.dropIndexes=function(t){return this.comm=new a.l({options:t}),this.execute()},Object(r.c)([c.metadata("commandClass",a.t),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[]),Object(r.f)("design:returntype",Promise)],e.prototype,"collections",null),Object(r.c)([c.metadata("commandClass",a.d),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[String,Object]),Object(r.f)("design:returntype",Promise)],e.prototype,"createCollection",null),Object(r.c)([c.metadata("commandClass",a.v),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[String,Object]),Object(r.f)("design:returntype",Promise)],e.prototype,"rename",null),Object(r.c)([c.metadata("commandClass",a.g),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Object]),Object(r.f)("design:returntype",Promise)],e.prototype,"drop",null),Object(r.c)([c.metadata("commandClass",a.u),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Object]),Object(r.f)("design:returntype",Promise)],e.prototype,"listIndexes",null),Object(r.c)([c.metadata("commandClass",a.e),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Object,Object]),Object(r.f)("design:returntype",Promise)],e.prototype,"createIndex",null),Object(r.c)([c.metadata("commandClass",a.f),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Array,Object]),Object(r.f)("design:returntype",Promise)],e.prototype,"createIndexes",null),Object(r.c)([c.metadata("commandClass",a.k),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Object,Object]),Object(r.f)("design:returntype",Promise)],e.prototype,"dropIndex",null),Object(r.c)([c.metadata("commandClass",a.l),Object(r.f)("design:type",Function),Object(r.f)("design:paramtypes",[Object]),Object(r.f)("design:returntype",Promise)],e.prototype,"dropIndexes",null)}(u)}).call(this,n(36))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(1),i=function(){function t(t){(new r.Validator).validate("collectionName",t),this.name=t}return t.prototype.setDatabase=function(t){this.database=t},t.prototype.inspect=function(){return{collection:this.name}},t}()},function(t,e,n){var r;t.exports=(r=n(16),n(42),n(43),r.HmacMD5)},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){(function(t,e){
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n;!function(n){!function(r){var i="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=s(n);function s(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===i.Reflect?i.Reflect=n:o=s(i.Reflect,o),function(e){var n=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,i=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,a={__proto__:[]}instanceof Array,c=!s&&!a,u={create:s?function(){return L(Object.create(null))}:a?function(){return L({__proto__:null})}:function(){return L({})},has:c?function(t,e){return n.call(t,e)}:function(t,e){return e in t},get:c?function(t,e){return n.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},p=Object.getPrototypeOf(Function),f="object"==typeof t&&t.env&&"true"===t.env.REFLECT_METADATA_USE_MAP_POLYFILL,l=f||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[o]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,i)},e.prototype.entries=function(){return new n(this._keys,this._values,s)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[o]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function i(t,e){return e}function s(t,e){return[t,e]}}():Map,d=f||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new l}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[o]=function(){return this.keys()},t}():Set,h=new(f||"function"!=typeof WeakMap?function(){var t=u.create(),e=r();return function(){function t(){this._key=r()}return t.prototype.has=function(t){var e=i(t,!1);return void 0!==e&&u.has(e,this._key)},t.prototype.get=function(t){var e=i(t,!1);return void 0!==e?u.get(e,this._key):void 0},t.prototype.set=function(t,e){return i(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=i(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=r()},t}();function r(){var e;do{e="@@WeakMap@@"+s()}while(u.has(t,e));return t[e]=!0,e}function i(t,r){if(!n.call(t,e)){if(!r)return;Object.defineProperty(t,e,{value:u.create()})}return t[e]}function o(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function s(){var t,e=(t=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):o(new Uint8Array(t),t):o(new Array(t),t));e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<16;++r){var i=e[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}():WeakMap);function m(t,e,n){var r=h.get(t);if(j(r)){if(!n)return;r=new l,h.set(t,r)}var i=r.get(e);if(j(i)){if(!n)return;i=new l,r.set(e,i)}return i}function y(t,e,n){var r=m(e,n,!1);return!j(r)&&!!r.has(t)}function b(t,e,n){var r=m(e,n,!1);if(!j(r))return r.get(t)}function g(t,e,n,r){m(n,r,!0).set(t,e)}function O(t,e){var n=[],r=m(t,e,!1);if(j(r))return n;for(var i=function(t){var e=A(t,o);if(!w(e))throw new TypeError;var n=e.call(t);if(!T(n))throw new TypeError;return n}(r.keys()),s=0;;){var a=R(i);if(!a)return n.length=s,n;var c=a.value;try{n[s]=c}catch(t){try{N(i)}finally{throw t}}s++}}function v(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function j(t){return void 0===t}function E(t){return null===t}function T(t){return"object"==typeof t?null!==t:"function"==typeof t}function x(t,e){switch(v(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",r=A(t,i);if(void 0!==r){var o=r.call(t,n);if(T(o))throw new TypeError;return o}return function(t,e){if("string"===e){var n=t.toString;if(w(n))if(!T(i=n.call(t)))return i;if(w(r=t.valueOf))if(!T(i=r.call(t)))return i}else{var r;if(w(r=t.valueOf))if(!T(i=r.call(t)))return i;var i,o=t.toString;if(w(o))if(!T(i=o.call(t)))return i}throw new TypeError}(t,"default"===n?"number":n)}function I(t){var e=x(t,3);return"symbol"==typeof e?e:function(t){return""+t}(e)}function _(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function w(t){return"function"==typeof t}function S(t){return"function"==typeof t}function A(t,e){var n=t[e];if(null!=n){if(!w(n))throw new TypeError;return n}}function R(t){var e=t.next();return!e.done&&e}function N(t){var e=t.return;e&&e.call(t)}function P(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===p)return e;if(e!==p)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var i=r.constructor;return"function"!=typeof i||i===t?e:i}function L(t){return t.__=void 0,delete t.__,t}e("decorate",(function(t,e,n,r){if(j(n)){if(!_(t))throw new TypeError;if(!S(e))throw new TypeError;return function(t,e){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e);if(!j(r)&&!E(r)){if(!S(r))throw new TypeError;e=r}}return e}(t,e)}if(!_(t))throw new TypeError;if(!T(e))throw new TypeError;if(!T(r)&&!j(r)&&!E(r))throw new TypeError;return E(r)&&(r=void 0),function(t,e,n,r){for(var i=t.length-1;i>=0;--i){var o=(0,t[i])(e,n,r);if(!j(o)&&!E(o)){if(!T(o))throw new TypeError;r=o}}return r}(t,e,n=I(n),r)})),e("metadata",(function(t,e){return function(n,r){if(!T(n))throw new TypeError;if(!j(r)&&!function(t){switch(v(t)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;g(t,e,n,r)}})),e("defineMetadata",(function(t,e,n,r){if(!T(n))throw new TypeError;return j(r)||(r=I(r)),g(t,e,n,r)})),e("hasMetadata",(function(t,e,n){if(!T(e))throw new TypeError;return j(n)||(n=I(n)),function t(e,n,r){if(y(e,n,r))return!0;var i=P(n);return!E(i)&&t(e,i,r)}(t,e,n)})),e("hasOwnMetadata",(function(t,e,n){if(!T(e))throw new TypeError;return j(n)||(n=I(n)),y(t,e,n)})),e("getMetadata",(function(t,e,n){if(!T(e))throw new TypeError;return j(n)||(n=I(n)),function t(e,n,r){if(y(e,n,r))return b(e,n,r);var i=P(n);return E(i)?void 0:t(e,i,r)}(t,e,n)})),e("getOwnMetadata",(function(t,e,n){if(!T(e))throw new TypeError;return j(n)||(n=I(n)),b(t,e,n)})),e("getMetadataKeys",(function(t,e){if(!T(t))throw new TypeError;return j(e)||(e=I(e)),function t(e,n){var r=O(e,n),i=P(e);if(null===i)return r;var o=t(i,n);if(o.length<=0)return r;if(r.length<=0)return o;for(var s=new d,a=[],c=0,u=r;c<u.length;c++){var p=u[c];s.has(p)||(s.add(p),a.push(p))}for(var f=0,l=o;f<l.length;f++){p=l[f];s.has(p)||(s.add(p),a.push(p))}return a}(t,e)})),e("getOwnMetadataKeys",(function(t,e){if(!T(t))throw new TypeError;return j(e)||(e=I(e)),O(t,e)})),e("deleteMetadata",(function(t,e,n){if(!T(e))throw new TypeError;j(n)||(n=I(n));var r=m(e,n,!1);if(j(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var i=h.get(e);return i.delete(n),i.size>0||h.delete(e),!0}))}(o)}()}(n||(n={}))}).call(this,n(23),n(36))},function(t,e,n){var r;t.exports=(r=n(16),function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,s=e.algo,a=[];!function(){for(var e=0;e<64;e++)a[e]=4294967296*t.abs(t.sin(e+1))|0}();var c=s.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,i=t[r];t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,s=t[e+0],c=t[e+1],d=t[e+2],h=t[e+3],m=t[e+4],y=t[e+5],b=t[e+6],g=t[e+7],O=t[e+8],v=t[e+9],j=t[e+10],E=t[e+11],T=t[e+12],x=t[e+13],I=t[e+14],_=t[e+15],w=o[0],S=o[1],A=o[2],R=o[3];w=u(w,S,A,R,s,7,a[0]),R=u(R,w,S,A,c,12,a[1]),A=u(A,R,w,S,d,17,a[2]),S=u(S,A,R,w,h,22,a[3]),w=u(w,S,A,R,m,7,a[4]),R=u(R,w,S,A,y,12,a[5]),A=u(A,R,w,S,b,17,a[6]),S=u(S,A,R,w,g,22,a[7]),w=u(w,S,A,R,O,7,a[8]),R=u(R,w,S,A,v,12,a[9]),A=u(A,R,w,S,j,17,a[10]),S=u(S,A,R,w,E,22,a[11]),w=u(w,S,A,R,T,7,a[12]),R=u(R,w,S,A,x,12,a[13]),A=u(A,R,w,S,I,17,a[14]),w=p(w,S=u(S,A,R,w,_,22,a[15]),A,R,c,5,a[16]),R=p(R,w,S,A,b,9,a[17]),A=p(A,R,w,S,E,14,a[18]),S=p(S,A,R,w,s,20,a[19]),w=p(w,S,A,R,y,5,a[20]),R=p(R,w,S,A,j,9,a[21]),A=p(A,R,w,S,_,14,a[22]),S=p(S,A,R,w,m,20,a[23]),w=p(w,S,A,R,v,5,a[24]),R=p(R,w,S,A,I,9,a[25]),A=p(A,R,w,S,h,14,a[26]),S=p(S,A,R,w,O,20,a[27]),w=p(w,S,A,R,x,5,a[28]),R=p(R,w,S,A,d,9,a[29]),A=p(A,R,w,S,g,14,a[30]),w=f(w,S=p(S,A,R,w,T,20,a[31]),A,R,y,4,a[32]),R=f(R,w,S,A,O,11,a[33]),A=f(A,R,w,S,E,16,a[34]),S=f(S,A,R,w,I,23,a[35]),w=f(w,S,A,R,c,4,a[36]),R=f(R,w,S,A,m,11,a[37]),A=f(A,R,w,S,g,16,a[38]),S=f(S,A,R,w,j,23,a[39]),w=f(w,S,A,R,x,4,a[40]),R=f(R,w,S,A,s,11,a[41]),A=f(A,R,w,S,h,16,a[42]),S=f(S,A,R,w,b,23,a[43]),w=f(w,S,A,R,v,4,a[44]),R=f(R,w,S,A,T,11,a[45]),A=f(A,R,w,S,_,16,a[46]),w=l(w,S=f(S,A,R,w,d,23,a[47]),A,R,s,6,a[48]),R=l(R,w,S,A,g,10,a[49]),A=l(A,R,w,S,I,15,a[50]),S=l(S,A,R,w,y,21,a[51]),w=l(w,S,A,R,T,6,a[52]),R=l(R,w,S,A,h,10,a[53]),A=l(A,R,w,S,j,15,a[54]),S=l(S,A,R,w,c,21,a[55]),w=l(w,S,A,R,O,6,a[56]),R=l(R,w,S,A,_,10,a[57]),A=l(A,R,w,S,b,15,a[58]),S=l(S,A,R,w,x,21,a[59]),w=l(w,S,A,R,m,6,a[60]),R=l(R,w,S,A,E,10,a[61]),A=l(A,R,w,S,d,15,a[62]),S=l(S,A,R,w,v,21,a[63]),o[0]=o[0]+w|0,o[1]=o[1]+S|0,o[2]=o[2]+A|0,o[3]=o[3]+R|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var o=t.floor(r/4294967296),s=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,c=a.words,u=0;u<4;u++){var p=c[u];c[u]=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8)}return a},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function u(t,e,n,r,i,o,s){var a=t+(e&n|~e&r)+i+s;return(a<<o|a>>>32-o)+e}function p(t,e,n,r,i,o,s){var a=t+(e&r|n&~r)+i+s;return(a<<o|a>>>32-o)+e}function f(t,e,n,r,i,o,s){var a=t+(e^n^r)+i+s;return(a<<o|a>>>32-o)+e}function l(t,e,n,r,i,o,s){var a=t+(n^(e|~r))+i+s;return(a<<o|a>>>32-o)+e}e.MD5=o._createHelper(c),e.HmacMD5=o._createHmacHelper(c)}(Math),r.MD5)},function(t,e,n){var r,i,o,s;t.exports=(r=n(16),o=(i=r).lib.Base,s=i.enc.Utf8,void(i.algo.HMAC=o.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=s.parse(e));var n=t.blockSize,r=4*n;e.sigBytes>r&&(e=t.finalize(e)),e.clamp();for(var i=this._oKey=e.clone(),o=this._iKey=e.clone(),a=i.words,c=o.words,u=0;u<n;u++)a[u]^=1549556828,c[u]^=909522486;i.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})))},function(t,e,n){"use strict";function r(){this._types=Object.create(null),this._extensions=Object.create(null);for(var t=0;t<arguments.length;t++)this.define(arguments[t]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}r.prototype.define=function(t,e){for(var n in t){var r=t[n].map((function(t){return t.toLowerCase()}));n=n.toLowerCase();for(var i=0;i<r.length;i++){if("*"!=(o=r[i])[0]){if(!e&&o in this._types)throw new Error('Attempt to change mapping for "'+o+'" extension from "'+this._types[o]+'" to "'+n+'". Pass `force=true` to allow this, otherwise remove "'+o+'" from the list of extensions for "'+n+'".');this._types[o]=n}}if(e||!this._extensions[n]){var o=r[0];this._extensions[n]="*"!=o[0]?o:o.substr(1)}}},r.prototype.getType=function(t){var e=(t=String(t)).replace(/^.*[/\\]/,"").toLowerCase(),n=e.replace(/^.*\./,"").toLowerCase(),r=e.length<t.length;return(n.length<e.length-1||!r)&&this._types[n]||null},r.prototype.getExtension=function(t){return(t=/^\s*([^;\s]*)/.test(t)&&RegExp.$1)&&this._extensions[t.toLowerCase()]||null},t.exports=r},function(t,e){t.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma","es"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/mrb-consumer+xml":["*xdf"],"application/mrb-publish+xml":["*xdf"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["*xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/ttml+xml":["ttml"],"application/urc-ressheet+xml":["rsheet"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-error+xml":["xer"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}},function(t,e,n){"use strict";n.r(e),n.d(e,"MPServerless",(function(){return S}));var r,i=n(0),o=n(3),s=n(7),a=n(11),c=n(35),u=function(){function t(t){this.encoder=new a.b,this.decoder=new a.a,this.raw=this.decoder.decode(t)}return t.prototype.inspect=function(){return this.raw},t}(),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.d)(e,t),e.prototype.execute=function(){return Object(i.b)(this,void 0,void 0,(function(){var e,n,r;return Object(i.e)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.execute.call(this)];case 1:return e=i.sent(),n=this.getEncoder().setBodyField({method:"serverless.db.default.execute",params:e}),[4,this.getTransport().request(n)];case 2:return r=i.sent(),[2,new u(r.body).inspect()]}}))}))},e}(c.a),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.d)(e,t),e.prototype.collection=function(t){var e=this,n=(new p).collection(t);return n.getEncoder=function(){return e.getEncoder()},n.getTransport=function(){return e.transport},n},e}(s.BaseService),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.d)(e,t),e.prototype.deleteFile=function(t){return Object(i.b)(this,void 0,void 0,(function(){var e;return Object(i.e)(this,(function(n){switch(n.label){case 0:return(e=this.getEncoder()).setBodyField({method:"serverless.file.resource.delete",params:{id:t}}),[4,this.transport.request(e)];case 1:return[2,n.sent().body]}}))}))},e.prototype.uploadFile=function(t){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.e)(this,(function(t){throw new s.BasementClientError(s.ErrorName.UNSUPPORTED_ERROR,"",s.ErrorType.COMMON_ERROR,"children implementation required")}))}))},e.prototype.getOSSUploadOptionsFromPath=function(t,e,n){return Object(i.b)(this,void 0,void 0,(function(){var r,o;return Object(i.e)(this,(function(i){switch(i.label){case 0:return(r={env:s.OSSEnv.PUBLIC}).filename=t.split("/").pop(),r.size=n,e&&(r.targetPath=e),(o=this.getEncoder()).setBodyField({method:"serverless.file.resource.generateProximalSign",params:r}),[4,this.transport.request(o)];case 1:return[2,i.sent().body]}}))}))},e.prototype.reportOSSUpload=function(t,e){return Object(i.b)(this,void 0,void 0,(function(){var n,r;return Object(i.e)(this,(function(i){switch(i.label){case 0:return n=this.transport.getEncoder(),r={id:t},e&&(r.contentType=e),n.setBodyField({method:"serverless.file.resource.report",params:r}),[4,this.transport.request(n)];case 1:return i.sent(),[2]}}))}))},e}(s.BaseService),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.d)(e,t),e.prototype.getInfo=function(t){return Object(i.b)(this,void 0,void 0,(function(){var e,n;return Object(i.e)(this,(function(r){switch(r.label){case 0:return e=this.getEncoder(),n={},t&&(n=Object(i.a)({},t)),this.transport.authType&&(n={authType:this.transport.authType}),e.setBodyField({method:"serverless.auth.user.getProfileInfo",params:n}),[4,this.transport.request(e)];case 1:return[2,r.sent().body]}}))}))},e}(s.BaseService),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.d)(e,t),e.prototype.invoke=function(t,e){return void 0===e&&(e={}),Object(i.b)(this,void 0,void 0,(function(){var n,r;return Object(i.e)(this,(function(o){switch(o.label){case 0:return(n=this.getEncoder()).setBodyField({method:"serverless.function.runtime.invoke",params:{functionTarget:t,functionArgs:e}}),[4,this.transport.request(n)];case 1:return r=o.sent(),[2,Object(i.a)(Object(i.a)({},r.body),{requestId:r.headers["request-id"]})]}}))}))},e}(s.BaseService),m=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Object(i.d)(e,t),e.prototype.exec=function(t,e){return void 0===e&&(e={}),Object(i.b)(this,void 0,void 0,(function(){var n;return Object(i.e)(this,(function(r){switch(r.label){case 0:return(n=this.getEncoder()).setBodyField({method:"antopen",params:{method:t,params:e}}),[4,this.transport.request(n)];case 1:return[2,r.sent().body]}}))}))}}(s.BaseService),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Object(i.d)(e,t),e.prototype.invoke=function(t,e){return Object(i.b)(this,void 0,void 0,(function(){var n,r,o,a,c,u,p,f,l,d,h,m,y,b;return Object(i.e)(this,(function(g){switch(g.label){case 0:if(n=e.method,r=void 0===n?"":n,o=e.path,a=void 0===o?"":o,c=e.header,u=void 0===c?{}:c,p=e.params,f=void 0===p?{}:p,l=e.query,d=void 0===l?{}:l,h=e.body,m=void 0===h?{}:h,!t||!e||!r)throw new s.BasementClientError(s.ErrorName.VALIDATION_ERROR,s.ErrorCode.VALIDATION_FAILED,s.ErrorType.COMMON_ERROR,"missing method or target");return(y=this.getEncoder()).setBodyField({method:"serverless.appService.runtime.invoke",params:{sasHTTPMethod:r,sasTarget:t,sasPath:a,sasHeader:u,sasParams:f,sasQuery:d,sasBody:m}}),[4,this.transport.request(y)];case 1:return b=g.sent(),[2,Object(i.a)(Object(i.a)({},b.body),{requestId:b.headers["request-id"]})]}}))}))}}(s.BaseService),n(16)),y=n.n(m),b=n(38),g=n.n(b),O=n(20),v=function(t){function e(e,n,r,i){var o=t.call(this,i)||this;return o.name=e,o.code=n,o.type=r,o.message=i,o}return Object(i.d)(e,t),e.from=function(t){return new e(t.name,t.code,t.type,t.message)},e}(o.BuiltInError),j=function(t){function e(e,n){var r=t.call(this,e)||this;return r.spaceId=n,r.prefix=o.PREFIX.CLIENT,r.serviceHeaders={},r.setBodyField({spaceId:n}),r}return Object(i.d)(e,t),e.prototype.sign=function(t){var e=this.body,n=e.spaceId,r=e.method,i=e.params,o=e.token,s=e.userId,a=Date.now();this.setBodyField({timestamp:a});var c="",u={spaceId:n,timestamp:a,method:r,params:JSON.stringify(i),token:o,userId:s};Object.keys(u).sort().forEach((function(t){u[t]&&(c=c+"&"+t+"="+u[t])})),c=c.slice(1);var p=g()(c,t).toString(y.a.enc.Hex);this.setServerlessHeaders({sign:p})},e.prototype.encodeAsHTTPRequestObject=function(t){return this.body.params&&(this.body.params=JSON.stringify(this.body.params)),Object(i.a)({url:this.url,data:this.body,method:this.method,headers:this.headers,header:this.headers,dataType:"json"},t)},e.prototype.clone=function(){var t=new e(this.endpoint,this.spaceId);return t.setBodyField(this.body),t.setBaseHeaders(this.baseHeaders),t.setServerlessHeaders(this.serverlessHeaders),t},e}(o.HTTPRequestEncoder),E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ERROR_CODES=[11,12,13,14,19,20],e}return Object(i.d)(e,t),e.prototype.setStatusAndBody=function(e,n){t.prototype.setStatusAndBody.call(this,e,n),this.ERROR_CODES.indexOf(e)>=0&&(this._error=v.from({name:o.ErrorName.IDE_ERROR,code:e.toString(),type:o.ErrorType.IDE_ERROR,message:"request error from Alipay IDE"}))},e.prototype.decode=function(e){this.setHeaders(e.headers||{});var n=e.data||e.body;if("string"==typeof n&&(n=JSON.parse(n)),n&&n.data&&(Object(O.isNumber)(n.data.affectedDocs)?n=Object.assign({},n,Object(i.a)({},n.data)):"[object Object]"===Object.prototype.toString.call(n.data)?n.result=Object.assign({},n.data):"[object Array]"===Object.prototype.toString.call(n.data)?n.result=n.data.slice(0):n.result=n.data,delete n.data),/^request:fail+/.test(e.errMsg))return this.setErrorMessage(e.errMsg),t.prototype.decode.call(this);var r=parseInt(e.error,10);if(r)return this.setStatusAndBody(r,n),t.prototype.decode.call(this);var o=e.err;if(o)return this.setErrorMessage(o),t.prototype.decode.call(this);if(e instanceof Error)return this.setErrorObject(e),t.prototype.decode.call(this);if(n&&"object"==typeof n.error)return this.setErrorObject(n.error),t.prototype.decode.call(this);var s=parseInt(e.status||e.statusCode,10);return s?(this.setStatusAndBody(s,n),t.prototype.decode.call(this)):(this.setStatusAndBody(200,e),t.prototype.decode.call(this))},e}(o.HTTPResponseDecoder);!function(t){t.ANONYMOUS="anonymous",t.DEFAULT=""}(r||(r={}));var T=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scope="auth_base",Object(o.assert)(n.uploadFile,"missing uploadFile"),Object(o.assert)(n.getAuthCode,"missing getAuthCode"),Object(o.assert)(n.request,"missing request"),r.uploadFile=r.wrap(n.uploadFile),r.getAuthCode=r.wrap(n.getAuthCode),r.httpRequest=r.wrap(n.request),n.getFileInfo&&(r.getFileInfo=r.wrap(n.getFileInfo)),n.getImageInfo&&(r.getImageInfo=r.wrap(n.getImageInfo)),r}return Object(i.d)(e,t),e.prototype.getEncoder=function(){return new j(this.endpoint,this.spaceId)},e.prototype.request=function(t,e){return void 0===e&&(e=!1),Object(i.b)(this,void 0,void 0,(function(){var n,r,s,a;return Object(i.e)(this,(function(i){switch(i.label){case 0:return n=t.clone(),[4,this.getAccessToken()];case 1:r=i.sent(),t.setBodyField({token:r}),t.sign(this.appSecret),t.setBaseHeaders({"Content-Type":"application/json","x-basement-token":r}),this.ua&&t.setBaseHeaders({"x-serverless-ua":this.ua}),i.label=2;case 2:return i.trys.push([2,4,,8]),s=t.encodeAsHTTPRequestObject({timeout:this.timeout,dataType:"json"}),this.logger.info("request encode data",s),[4,this.httpRequest(s)];case 3:return[2,i.sent()];case 4:if(a=i.sent(),this.logger.error("request error",a),!("GATEWAY_INVALID_TOKEN"===a.error.code||"InvalidParameter.InvalidToken"===a.error.code||a.status===o.HTTP_UNAUTHORIZED))return[3,7];if(e)throw new v(o.ErrorName.UNAUTHORIZED_ERROR,o.ErrorCode.AUTHENTICATION_FAILED,o.ErrorType.COMMON_ERROR,"authentication failed");return[4,this.getAccessToken(!0)];case 5:return i.sent(),[4,this.request(n,!0)];case 6:return[2,i.sent()];case 7:if(a.error)throw a.error;throw a;case 8:return[2]}}))}))},e.prototype.hasToken=function(){return!!this.accessToken},Object.defineProperty(e.prototype,"authType",{get:function(){return this.currentAuthType},enumerable:!1,configurable:!0}),e.prototype.authorize=function(t){return Object(i.b)(this,void 0,void 0,(function(){var e=this;return Object(i.e)(this,(function(n){return this.pendingRequest=this.getAuthCode({scopes:this.scope}).then((function(t){return e.logger.info("Request authcode is "+(t.body.authCode||t.body.code)+" "),t.body.authCode||t.body.code})).then((function(n){var r=e.getEncoder();r.setBodyField({method:"serverless.auth.user.authorize",params:{authProvider:t.authProvider||"alipay_openapi",clientIdentifier:e.appId,authCode:n,isvAppId:e.isvAppId}}),r.sign(e.appSecret),r.setBaseHeaders({"Content-Type":"application/json"}),e.ua&&r.setBaseHeaders({"x-serverless-ua":e.ua});var i=r.encodeAsHTTPRequestObject({timeout:e.timeout,dataType:"json"});return e.httpRequest(i)})).then((function(n){return e.logger.info("Request accessToken "+(n.body.success?"success":"failed")),n.body&&n.body.result&&(e.authorizeOptions=t,e.accessToken=n.body.result.accessToken,e.currentAuthType=r.DEFAULT),e.pendingRequest=null,Promise.resolve(e.accessToken)})),[2,this.pendingRequest]}))}))},e.prototype.anonymousAuthorize=function(t){return Object(i.b)(this,void 0,void 0,(function(){var e,n,o=this;return Object(i.e)(this,(function(i){return(e=this.getEncoder()).setBodyField({method:"serverless.auth.user.anonymousAuthorize",params:{clientIdentifier:this.appId,isvAppId:this.isvAppId}}),e.sign(this.appSecret),e.setBaseHeaders({"Content-Type":"application/json"}),this.ua&&e.setBaseHeaders({"x-serverless-ua":this.ua}),n=e.encodeAsHTTPRequestObject({timeout:this.timeout,dataType:"json"}),this.pendingRequest=this.httpRequest(n).then((function(e){return o.logger.info("Request accessToken "+(e.body.success?"success":"failed")),e.body&&e.body.result&&(o.authorizeOptions=t,o.accessToken=e.body.result.accessToken,o.currentAuthType=r.ANONYMOUS),o.pendingRequest=null,Promise.resolve(o.accessToken)})),[2,this.pendingRequest]}))}))},e.prototype.getAccessToken=function(t){return void 0===t&&(t=!1),Object(i.b)(this,void 0,void 0,(function(){return Object(i.e)(this,(function(e){if(this.pendingRequest)return this.logger.info("getAccessToken: reuse"),[2,this.pendingRequest];if(!this.accessToken)throw new v(o.ErrorName.UNAUTHORIZED_ERROR,o.ErrorCode.UNAUTHENTICATION,o.ErrorType.COMMON_ERROR,"未进行用户授权，请先调用三方授权或匿名授权");return t&&this.authorizeOptions?(this.logger.info("getAccessToken: start"),this.authorizeOptions.authType===r.ANONYMOUS?[2,this.anonymousAuthorize(this.authorizeOptions)]:[2,this.authorize(this.authorizeOptions)]):[2,this.accessToken]}))}))},e.prototype.upload=function(t,e,n,r,o){return Object(i.b)(this,void 0,void 0,(function(){return Object(i.e)(this,(function(s){switch(s.label){case 0:return this.logger.info("upload with params"),this.logger.info(JSON.stringify(e,null,2)),[4,this.uploadFile({url:t,formData:e,fileName:n,name:n,filePath:r,fileType:"image",header:Object(i.a)(Object(i.a)({},o),{"X-OSS-server-side-encrpytion":"AES256"})})];case 1:return[2,s.sent()]}}))}))},e.prototype.wrap=function(t){var e=this;return function(n){return new Promise((function(r,i){t(Object.assign(n,{complete:function(t){void 0===t&&(t={}),e.logger.info("completed request"),e.logger.info(JSON.stringify(t,null,2));var n=(new E).decode(t);return n.error?i(n):r(n)}}))}))}},e}(o.HTTPTransport),x=n(21),I=n.n(x),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.d)(e,t),e.prototype.forward=function(t,e){return Object(i.b)(this,void 0,void 0,(function(){var n;return Object(i.e)(this,(function(r){switch(r.label){case 0:return(n=this.getEncoder()).setBodyField({method:t,params:e}),[4,this.transport.request(n)];case 1:return[2,r.sent().body]}}))}))},e}(o.BaseService),w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.d)(e,t),e.prototype.uploadFile=function(t){return Object(i.b)(this,void 0,void 0,(function(){var e,n,r,s,a,c,u,p,f,l,d,h;return Object(i.e)(this,(function(i){switch(i.label){case 0:return Object(o.assert)(t.filePath&&"string"==typeof t.filePath,"missing options.filePath"),e=t.filePath.replace(/(.*):\/\//,""),n=e.split(".").pop(),Object(o.assert)(o.WHITELIST_EXTENSIONS.indexOf(n.toLowerCase())>=0,"目前不支持 "+n+" 类型文件"),r=Object.keys(t.meta||{}).reduce((function(e,n){return e["x-oss-meta-"+n]=t.meta[n],e}),{}),s=t.headers?o.OSSUploadHeaderList.reduce((function(e,n){var r=n.replace(/\-[A-Z]/g,(function(t){return t[1]})).replace(/^[A-Z]/,(function(t){return t.toLowerCase()}));return t.headers.hasOwnProperty(r)&&(e[n]=t.headers[r]),e}),{}):{},a=t.fileSize,c=this.transport.getFileInfo,a||!c?[3,2]:[4,c({apFilePath:t.filePath})];case 1:u=i.sent(),a=u.body.size,i.label=2;case 2:return p=t.extension,f=this.transport.getImageInfo,p||!f?[3,4]:[4,f({src:t.filePath})];case 3:l=i.sent(),p=l.body.type,i.label=4;case 4:return[4,this.getOSSUploadOptionsFromPath(e,t.path,a)];case 5:if((d=i.sent()).error)throw new v(o.ErrorName.INTERFACE_ERROR,o.ErrorCode.INTERFACE_RESPONSE_FAILED,o.ErrorType.COMMON_ERROR,d.error.message);return h=Object(o.OSSUploadResponseFormat)(d.result),[4,this.uploadFileToOSS(t,h,s,r)];case 6:return i.sent(),[4,this.reportOSSUpload(h.id,I.a.getType(p))];case 7:return i.sent(),[2,{fileUrl:"https://"+h.cdnDomain+"/"+h.key,filePath:h.key}]}}))}))},e.prototype.uploadFileToOSS=function(t,e,n,r){return Object(i.b)(this,void 0,void 0,(function(){var s,a,c;return Object(i.e)(this,(function(i){switch(i.label){case 0:if(s=["key","policy","Signature","OSSAccessKeyId"].reduce((function(t,n){return t[n]=e[n],t}),{}),a={},t.extension){if(!(c=I.a.getType(t.extension)))throw new v(o.ErrorName.VALIDATION_ERROR,o.ErrorCode.VALIDATION_FAILED,o.ErrorType.COMMON_ERROR,"文件扩展错误，无法解析正确的 MIME");a["Content-Type"]=c}return n["Cache-Control"]="max-age=2592000",e.securityToken&&(n["x-oss-security-token"]=e.securityToken),[4,this.transport.upload("https://"+e.host,Object.assign({success_action_status:200},n,r,s),"file",t.filePath,a)];case 1:return i.sent(),[2]}}))}))},e}(l),S=function(t){function e(e,n){var s=t.call(this,Object(i.a)(Object(i.a)({},n),{httpClient:e,httpTransport:T,logger:e.logger}))||this;return Object(o.assert)(n.clientSecret,"clientSecret is required"),Object(o.assert)(n.appId,"appId is required"),s.db=new f(s.transport),s.user=new d(s.transport),s.file=new w(s.transport),s.function=new h(s.transport),s.network=new _(s.transport),s.user.authorize=function(t){return Object(i.b)(s,void 0,void 0,(function(){var e;return Object(i.e)(this,(function(n){switch(n.label){case 0:return e=this.transport.hasToken(),t.authType!==r.ANONYMOUS?[3,2]:[4,this.transport.anonymousAuthorize(t)];case 1:return n.sent()?[2,{success:!0}]:[2,{success:!1}];case 2:return!e||e&&this.transport.authType!==t.authType?[4,this.transport.authorize(t)]:[3,4];case 3:return n.sent()?[2,{success:!0}]:[2,{success:!1}];case 4:return[2]}}))}))},s}return Object(i.d)(e,t),Object.defineProperty(e.prototype,"version",{get:function(){return"2.3.3"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ua",{get:function(){return"pkg_name:@alicloud/mpserverless-sdk;ver:2.3.3;"},enumerable:!1,configurable:!0}),e.prototype.createTransport=function(e){t.prototype.createTransport.call(this,e),this.transport.setAppSecret(e.clientSecret).setUA(this.ua)},e}(o.Basement)}]).MPServerless}));