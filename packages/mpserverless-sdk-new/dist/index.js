/*! For license information please see index.js.LICENSE.txt */
var regeneratorRuntime;
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.MPServerless=e():t.MPServerless=e()}(this,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};t[n].call(o.exports,o,o.exports,r);o.l=!0;return o.exports}r.m=t;r.c=e;r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})};r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});Object.defineProperty(t,"__esModule",{value:!0})};r.t=function(t,e){1&e&&(t=r(t));if(8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:t});if(2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n};r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};r.d(e,"a",e);return e};r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};r.p="";return r(r.s="./src/index.ts")}({"./node_modules/@alicloud/mpserverless-core/dist/index.js":function(t,e,r){t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};t[n].call(o.exports,o,o.exports,r);o.l=!0;return o.exports}r.m=t;r.c=e;r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})};r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});Object.defineProperty(t,"__esModule",{value:!0})};r.t=function(t,e){1&e&&(t=r(t));if(8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:t});if(2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n};r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};r.d(e,"a",e);return e};r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};r.p="";return r(r.s="./src/index.ts")}({"../../node_modules/_process@0.11.10@process/browser.js":function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout){r=setTimeout;return setTimeout(t,0)}try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}var u,s=[],l=!1,f=-1;function p(){if(l&&u){l=!1;u.length?s=u.concat(s):f=-1;s.length&&h()}}function h(){if(!l){var t=c(p);l=!0;for(var e=s.length;e;){u=s;s=[];for(;++f<e;)u&&u[f].run();f=-1;e=s.length}u=null;l=!1;!function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout){n=clearTimeout;return clearTimeout(t)}try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];s.push(new d(t,e));1!==s.length||l||c(h)};function d(t,e){this.fun=t;this.array=e}d.prototype.run=function(){this.fun.apply(null,this.array)};o.title="browser";o.browser=!0;o.env={};o.argv=[];o.version="";o.versions={};function y(){}o.on=y;o.addListener=y;o.once=y;o.off=y;o.removeListener=y;o.removeAllListeners=y;o.emit=y;o.prependListener=y;o.prependOnceListener=y;o.listeners=function(t){return[]};o.binding=function(t){throw new Error("process.binding is not supported")};o.cwd=function(){return"/"};o.chdir=function(t){throw new Error("process.chdir is not supported")};o.umask=function(){return 0}},"../../node_modules/_util@0.11.1@util/node_modules/inherits/inherits_browser.js":function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e;t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype;t.prototype=new r;t.prototype.constructor=t}},"../../node_modules/_util@0.11.1@util/support/isBufferBrowser.js":function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},"../../node_modules/_util@0.11.1@util/util.js":function(t,e,r){(function(t){var n=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},o=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(c(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(t).replace(o,(function(t){if("%%"===t)return"%";if(r>=i)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}})),u=n[r];r<i;u=n[++r])y(u)||!w(u)?a+=" "+u:a+=" "+c(u);return a};e.deprecate=function(r,n){if(void 0!==t&&!0===t.noDeprecation)return r;if(void 0===t)return function(){return e.deprecate(r,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n);o=!0}return r.apply(this,arguments)}};var i,a={};e.debuglog=function(r){g(i)&&(i=t.env.NODE_DEBUG||"");r=r.toUpperCase();if(!a[r])if(new RegExp("\\b"+r+"\\b","i").test(i)){var n=t.pid;a[r]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",r,n,t)}}else a[r]=function(){};return a[r]};function c(t,r){var n={seen:[],stylize:s};arguments.length>=3&&(n.depth=arguments[2]);arguments.length>=4&&(n.colors=arguments[3]);d(r)?n.showHidden=r:r&&e._extend(n,r);g(n.showHidden)&&(n.showHidden=!1);g(n.depth)&&(n.depth=2);g(n.colors)&&(n.colors=!1);g(n.customInspect)&&(n.customInspect=!0);n.colors&&(n.stylize=u);return l(n,t,n.depth)}e.inspect=c;c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function u(t,e){var r=c.styles[e];return r?"["+c.colors[r][0]+"m"+t+"["+c.colors[r][1]+"m":t}function s(t,e){return t}function l(t,r,n){if(t.customInspect&&r&&x(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,t);m(o)||(o=l(t,o,n));return o}var i=function(t,e){if(g(e))return t.stylize("undefined","undefined");if(m(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return v(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}(t,r);if(i)return i;var a=Object.keys(r),c=function(t){var e={};t.forEach((function(t,r){e[t]=!0}));return e}(a);t.showHidden&&(a=Object.getOwnPropertyNames(r));if(_(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(r);if(0===a.length){if(x(r)){var u=r.name?": "+r.name:"";return t.stylize("[Function"+u+"]","special")}if(b(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(j(r))return t.stylize(Date.prototype.toString.call(r),"date");if(_(r))return f(r)}var s,w="",O=!1,E=["{","}"];if(h(r)){O=!0;E=["[","]"]}x(r)&&(w=" [Function"+(r.name?": "+r.name:"")+"]");b(r)&&(w=" "+RegExp.prototype.toString.call(r));j(r)&&(w=" "+Date.prototype.toUTCString.call(r));_(r)&&(w=" "+f(r));if(0===a.length&&(!O||0==r.length))return E[0]+w+E[1];if(n<0)return b(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special");t.seen.push(r);s=O?function(t,e,r,n,o){for(var i=[],a=0,c=e.length;a<c;++a)k(e,String(a))?i.push(p(t,e,r,n,String(a),!0)):i.push("");o.forEach((function(o){o.match(/^\d+$/)||i.push(p(t,e,r,n,o,!0))}));return i}(t,r,n,c,a):a.map((function(e){return p(t,r,n,c,e,O)}));t.seen.pop();return function(t,e,r){return t.reduce((function(t,e){e.indexOf("\n");return t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}(s,w,E)}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,r,n,o,i){var a,c,u;(u=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?c=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(c=t.stylize("[Setter]","special"));k(n,o)||(a="["+o+"]");c||(t.seen.indexOf(u.value)<0?(c=y(r)?l(t,u.value,null):l(t,u.value,r-1)).indexOf("\n")>-1&&(c=i?c.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+c.split("\n").map((function(t){return"   "+t})).join("\n")):c=t.stylize("[Circular]","special"));if(g(a)){if(i&&o.match(/^\d+$/))return c;if((a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){a=a.substr(1,a.length-2);a=t.stylize(a,"name")}else{a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");a=t.stylize(a,"string")}}return a+": "+c}function h(t){return Array.isArray(t)}e.isArray=h;function d(t){return"boolean"==typeof t}e.isBoolean=d;function y(t){return null===t}e.isNull=y;e.isNullOrUndefined=function(t){return null==t};function v(t){return"number"==typeof t}e.isNumber=v;function m(t){return"string"==typeof t}e.isString=m;e.isSymbol=function(t){return"symbol"==typeof t};function g(t){return void 0===t}e.isUndefined=g;function b(t){return w(t)&&"[object RegExp]"===O(t)}e.isRegExp=b;function w(t){return"object"==typeof t&&null!==t}e.isObject=w;function j(t){return w(t)&&"[object Date]"===O(t)}e.isDate=j;function _(t){return w(t)&&("[object Error]"===O(t)||t instanceof Error)}e.isError=_;function x(t){return"function"==typeof t}e.isFunction=x;e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t};e.isBuffer=r("../../node_modules/_util@0.11.1@util/support/isBufferBrowser.js");function O(t){return Object.prototype.toString.call(t)}function E(t){return t<10?"0"+t.toString(10):t.toString(10)}var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var t=new Date,e=[E(t.getHours()),E(t.getMinutes()),E(t.getSeconds())].join(":");return[t.getDate(),S[t.getMonth()],e].join(" ")}e.log=function(){console.log("%s - %s",P(),e.format.apply(e,arguments))};e.inherits=r("../../node_modules/_util@0.11.1@util/node_modules/inherits/inherits_browser.js");e._extend=function(t,e){if(!e||!w(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(T&&t[T]){var e;if("function"!=typeof(e=t[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');Object.defineProperty(e,T,{value:e,enumerable:!1,writable:!1,configurable:!0});return e}function e(){for(var e,r,n=new Promise((function(t,n){e=t;r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(t,n){t?r(t):e(n)}));try{t.apply(this,o)}catch(t){r(t)}return n}Object.setPrototypeOf(e,Object.getPrototypeOf(t));T&&Object.defineProperty(e,T,{value:e,enumerable:!1,writable:!1,configurable:!0});return Object.defineProperties(e,n(t))};e.promisify.custom=T;function L(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t;t=r}return e(t)}e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var o=r.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,a=function(){return o.apply(i,arguments)};e.apply(this,r).then((function(e){t.nextTick(a,null,e)}),(function(e){t.nextTick(L,e,a)}))}Object.setPrototypeOf(r,Object.getPrototypeOf(e));Object.defineProperties(r,n(e));return r}}).call(this,r("../../node_modules/_process@0.11.10@process/browser.js"))},"./src/index.ts":function(t,e,r){"use strict";r.r(e);r.d(e,"ErrorClass",(function(){return m}));r.d(e,"MPServerlessErrorClass",(function(){return b}));r.d(e,"bizError",(function(){return w}));r.d(e,"assert",(function(){return j}));r.d(e,"camelToLisp",(function(){return _}));r.d(e,"emptyLogger",(function(){return x}));r.d(e,"HTTPMethod",(function(){return O}));r.d(e,"TransportProtocol",(function(){return E}));r.d(e,"SERVERLESS_HEADER_PREFIX",(function(){return S}));r.d(e,"PREFIX",(function(){return P}));r.d(e,"Validator",(function(){return I}));r.d(e,"BaseEncoder",(function(){return Y}));r.d(e,"HTTPRequestEncoder",(function(){return K}));r.d(e,"BaseDecoder",(function(){return it}));r.d(e,"HTTPResponseDecoder",(function(){return at}));r.d(e,"HTTPTransport",(function(){return ht}));r.d(e,"BaseService",(function(){return mt}));r.d(e,"MPServerlessCore",(function(){return _t}));r("./src/thirdParty/runtime.es5.js");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,v(n.key),n)}}function i(t,e,r){e&&o(t.prototype,e);r&&o(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e,r){return e=d(e),function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(t,p()?Reflect.construct(e,r||[],d(t).constructor):e.apply(t,r))}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&h(t,e)}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return f(t,arguments,d(this).constructor)}r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}});return h(r,t)})(t)}function f(t,e,r){if(p())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&h(o,r.prototype),o}function p(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(p=function(){return!!t})()}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t})(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e,r){(e=v(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r;return t}function v(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e);if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==n(e)?e:String(e)}var m=function(t){s(e,t);function e(t,r){var n;a(this,e);y(u(n=c(this,e)),"code",void 0);y(u(n),"message",void 0);Error.captureStackTrace&&Error.captureStackTrace(u(n),n.constructor);n.code=n.constructor.code;n.message=n.constructor.prefix;r&&(n.message+=": ".concat(r));t instanceof Error?n.message="".concat(n.message," << ").concat(t.message):"string"==typeof t&&(n.message="".concat(n.message,": ").concat(t));return n}return i(e)}(l(Error));y(m,"code",void 0);y(m,"prefix",void 0);var g=function(){function t(){a(this,t);y(this,"code",void 0);y(this,"message",void 0)}i(t,[{key:"setCode",value:function(t){this.code=t;return this}},{key:"setMessage",value:function(t){this.message=t;return this}},{key:"build",value:function(){var t,e=this.code,r=this.message;return y(t=function(t){s(e,t);function e(){a(this,e);return c(this,e,arguments)}return i(e)}(m),"code",e),y(t,"prefix",r),t}}]);return t}();function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{code:"MPServerlessError",message:"MPServerless Error"},r=new g;return Object.keys(t).reduce((function(n,o){n[o]=r.setCode(t[o].code||e.code).setMessage(t[o].message||e.message).build();return n}),{})}var w=b({ValidationError:{code:"ValidationFailed",message:"参数校验错误"}});function j(t,e){if(!t)throw new w.ValidationError(e)}function _(t){return t.replace(/[A-Z]/g,(function(t){return"-".concat(t.toLowerCase())}))}var x={log:function(){},info:function(){},warn:function(){},error:function(){},debug:function(){}},O=function(t){t.GET="GET";t.DEL="DELETE";t.POST="POST";return t}({}),E=function(t){t.HTTP="HTTP";return t}({}),S="x-serverless-",P=function(t){t.CLIENT="/client";t.SERVER="/server";t.ANTCLOUD="/antcloud";t.ANTOPENANTCLOUD="/antopen/antcloud";return t}({}),k=r("./src/thirdParty/parameter.es5.js"),T=r.n(k);function L(t){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,B(n.key),n)}}function B(t){var e=function(t,e){if("object"!=L(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==L(e)?e:String(e)}var I=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);!function(t,e,r){(e=B(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"p",void 0);this.p=new T.a(e)}!function(t,e,r){e&&A(t.prototype,e);Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"validate",value:function(t,e){if("object"!==L(e)&&"string"==typeof t){e={field:e};t={field:t}}var r=this.p.validate(t,e);if(!r)return null;var n=r.map((function(t){if(t.field){for(var r=JSON.parse(JSON.stringify(e)),n=t.field.match(/[^\.\[\]]+/g);n.length;){var o=n.shift();if(!r.hasOwnProperty(o))break;r=r[o]}t.value=r}return t}));throw new w.ValidationError(function t(e){return Array.isArray(e)?e.map(t).join("; "):"".concat(e.field," ").concat(e.message)}(n))}}]);return t}();function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function N(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?D(Object(r),!0).forEach((function(e){z(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(t,e){return(M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t})(t,e)}function z(t,e,r){(e=G(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r;return t}function F(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,G(n.key),n)}}function H(t,e,r){e&&F(t.prototype,e);r&&F(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function G(t){var e=function(t,e){if("object"!=R(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==R(e)?e:String(e)}function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Y=H((function t(){U(this,t)})),K=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&M(t,e)}(e,t);function e(t,r){var n;U(this,e);(n=function(t,e,r){return e=C(e),function(t,e){if(e&&("object"===R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return q(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return!!t}()?Reflect.construct(e,r||[],C(t).constructor):e.apply(t,r))}(this,e)).endpoint=t;z(q(n),"body",{});z(q(n),"query",{});z(q(n),"method",O.POST);z(q(n),"prefix","");z(q(n),"baseHeaders",{});z(q(n),"serviceHeaders",{});z(q(n),"serverlessHeaders",{});z(q(n),"baseUrl",void 0);r&&(n.prefix=r);return n}H(e,[{key:"encodeAsHTTPRequestObject",value:function(t){return{url:"",data:{},method:O.POST,headers:{}}}},{key:"sign",value:function(t){}},{key:"url",get:function(){return[this.endpoint+this.prefix].filter((function(t){return!!t})).join("?")}},{key:"headers",get:function(){var t=this,e=Object.keys(this.serverlessHeaders).reduce((function(e,r){e["".concat(S).concat(_(r))]=t.serverlessHeaders[r];return e}),{});return N(N({},this.baseHeaders),e)}},{key:"setBodyField",value:function(t){this.body=Object.assign({},this.body,N({},t));return this}},{key:"setUserId",value:function(t){this.setBodyField({userId:t});return this}},{key:"setBaseHeaders",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.baseHeaders=N(N({},this.baseHeaders),Object.keys(t).reduce((function(e,r){t[r]&&(e[r]=t[r].toString());return e}),{}));return this}},{key:"setServerlessHeaders",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.serverlessHeaders=N(N({},this.serverlessHeaders),Object.keys(t).reduce((function(e,r){t[r]&&(e[r]=t[r].toString());return e}),{}));return this}},{key:"encode",value:function(){this.body.params&&(this.body.params=JSON.stringify(this.body.params));return{url:this.url,data:this.body,method:this.method,headers:this.headers}}}]);return e}(Y);function W(t){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function J(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?V(Object(r),!0).forEach((function(e){tt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $(t,e,r){return e=X(e),function(t,e){if(e&&("object"===W(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Z(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return!!t}()?Reflect.construct(e,r||[],X(t).constructor):e.apply(t,r))}function X(t){return(X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q(t,e){return(Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t})(t,e)}function tt(t,e,r){(e=nt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r;return t}function et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,nt(n.key),n)}}function rt(t,e,r){e&&et(t.prototype,e);r&&et(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function nt(t){var e=function(t,e){if("object"!=W(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==W(e)?e:String(e)}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var it=rt((function t(){ot(this,t)})),at=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&Q(t,e)}(e,t);function e(){var t;ot(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];tt(Z(t=$(this,e,[].concat(n))),"_body",{});tt(Z(t),"_error",void 0);tt(Z(t),"_status",void 0);tt(Z(t),"_headers",{});return t}rt(e,[{key:"setHeaders",value:function(t){this._headers=J(J({},this._headers),t)}},{key:"setStatusAndBody",value:function(t,e){this._status=t;this._body=e}},{key:"setErrorMessage",value:function(t){this._error=new Error(t)}},{key:"setErrorObject",value:function(t){this._error=t}},{key:"decode",value:function(){return{body:this._body||{},error:this._error,status:this._status,headers:this._headers}}}]);return e}(it);function ct(t){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(){ut=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="executing",d="completed",y={};function v(){}function m(){}function g(){}var b={};s(b,a,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,a)&&(b=j);var _=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==ct(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?d:"suspendedYield",s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=d,n.method="throw",n.arg=s.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function L(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ct(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},x(O.prototype),s(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(_),s(_,u,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=L,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function st(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){r(t);return}c.done?e(u):Promise.resolve(u).then(n,o)}function lt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,pt(n.key),n)}}function ft(t,e,r){(e=pt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r;return t}function pt(t){var e=function(t,e){if("object"!=ct(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==ct(e)?e:String(e)}var ht=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.endpoint=e;ft(this,"authType",void 0);ft(this,"protocol",E.HTTP);ft(this,"logger",void 0);ft(this,"appId",void 0);ft(this,"appSecret",void 0);ft(this,"spaceId",void 0);ft(this,"timeout",void 0);ft(this,"ua",void 0)}!function(t,e,r){e&&lt(t.prototype,e);Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"getEncoder",value:function(t){return new K(this.endpoint,t)}},{key:"setAppId",value:function(t){this.appId=t}},{key:"setAppSecret",value:function(t){this.appSecret=t;return this}},{key:"setUA",value:function(t){this.ua=t;return this}},{key:"setLogger",value:function(t){this.logger=t}},{key:"setTimeout",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"5s";if("string"==typeof t){if(t.indexOf("ms")>=0){this.timeout=parseInt(t,10);return}if(t.indexOf("s")>=0){this.timeout=1e3*parseInt(t,10);return}}else if("number"==typeof t){this.timeout=t;return}this.timeout=5e3}},{key:"timeoutOption",get:function(){return this.timeout}},{key:"spaceIdOption",get:function(){return this.spaceId}},{key:"setSpaceId",value:function(t){this.spaceId=t}},{key:"request",value:function(){var t=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){st(i,n,o,a,c,"next",t)}function c(t){st(i,n,o,a,c,"throw",t)}a(void 0)}))}}(ut().mark((function t(e){return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(new at).decode());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]);return t}();function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,vt(n.key),n)}}function vt(t){var e=function(t,e){if("object"!=dt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==dt(e)?e:String(e)}var mt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.transport=e}!function(t,e,r){e&&yt(t.prototype,e);Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"getEncoder",value:function(t){return this.transport.getEncoder(t)}}]);return t}();function gt(t){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,jt(n.key),n)}}function wt(t,e,r){(e=jt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r;return t}function jt(t){var e=function(t,e){if("object"!=gt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==gt(e)?e:String(e)}var _t=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);wt(this,"options",void 0);wt(this,"_debug",void 0);wt(this,"_logger",void 0);wt(this,"transport",void 0);j(e,"options is required");j(e.spaceId,"spaceId is required");j(e.endpoint,"endpoint is required");this._debug=!1;this._logger=e.logger||x;this.options=e;this.createTransport(e)}!function(t,e,r){e&&bt(t.prototype,e);Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"setDebugFlag",value:function(t){this._debug=t;this.transport.setLogger(this.logger)}},{key:"debug",get:function(){return this._debug}},{key:"logger",get:function(){return this._debug?this._logger:x}},{key:"createTransport",value:function(t){var e=t.httpTransport;this.transport=new e(t.endpoint);this.transport.setAppId(t.appId);this.transport.setLogger(this.logger);this.transport.setSpaceId(t.spaceId);this.transport.setTimeout(t.timeout)}}]);return t}()},"./src/thirdParty/parameter.es5.js":function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,n.key,n)}}return function(e,r,n){r&&t(e.prototype,r);n&&t(e,n);return e}}(),i=r("../../node_modules/_util@0.11.1@util/util.js"),a=/^\d{4}\-\d{2}\-\d{2}$/,c=/^\d{4}\-\d{2}\-\d{2} \d{2}:\d{2}:\d{2}$/,u=/^\d+$/,s=/^[a-z0-9\!\#\$\%\&\'\*\+\/\=\?\^\_\`\{\|\}\~\-]+(?:\.[a-z0-9\!\#\$\%\&\'\*\+\/\=\?\^\_\`\{\|\}\~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?$/i,l=/^[\w\`\~\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\]\{\}\|\;\:\'\"\,\<\.\>\/\?]+$/,f=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/i,p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);"function"==typeof(e=e||{}).translate&&(this.translate=e.translate);e.validateRoot&&(this.validateRoot=!0);e.convert&&(this.convert=!0);e.widelyUndefined&&(this.widelyUndefined=!0)}o(t,[{key:"t",value:function(){var t=Array.prototype.slice.call(arguments);return"function"==typeof this.translate?this.translate.apply(this,t):i.format.apply(i,t)}},{key:"validate",value:function(t,e){if("object"!==(void 0===t?"undefined":n(t)))throw new TypeError("need object type rule");if(this.validateRoot&&("object"!==(void 0===e?"undefined":n(e))||!e))return[{message:this.t("the validated value should be a object"),code:this.t("invalid"),field:void 0}];var r=[];for(var o in t){var i=y(t[o]),a=e[o];"string"==typeof a&&!0===i.trim&&(a=e[o]=a.trim());var c=this.widelyUndefined;"widelyUndefined"in i&&(c=i.widelyUndefined);c&&(""===a||null===a||Number.isNaN(a))&&(a=e[o]=void 0);if(null!=a){var u=h[i.type];if(!u)throw new TypeError("rule type must be one of "+Object.keys(h).join(", ")+", but the following type was passed: "+i.type);v(i,e,o,this.convert);var s=u.call(this,i,e[o],e);"string"==typeof s&&r.push({message:s,code:this.t("invalid"),field:o});Array.isArray(s)&&s.forEach((function(t){var e="object"===i.type?".":"";t.field=o+e+t.field;r.push(t)}))}else{!1!==i.required&&r.push({message:this.t("required"),field:o,code:this.t("missing_field")});"default"in i&&(e[o]=i.default)}}return r.length?r:void 0}}]);return t}();t.exports=p;p.prototype.addRule=p.addRule=function(t,e,r,n){if(!t)throw new TypeError("`type` required");if("string"==typeof r||"function"==typeof r){n=r;r=!0}"boolean"!=typeof r&&(r=!0);if(!r&&h[t])throw new TypeError("rule `"+t+"` exists");if(n){if("string"!=typeof n&&"function"!=typeof n)throw new TypeError("convertType should be string or function");p.CONVERT_MAP[t]=n}if("function"!=typeof e){if(!(e instanceof RegExp))throw new TypeError("check must be function or regexp");h[t]=function(t,r){return g.call(this,{format:e},r)}}else h[t]=e};var h=p.TYPE_MAP={number:function(t,e){return"number"!=typeof e||isNaN(e)?this.t("should be a number"):t.hasOwnProperty("max")&&e>t.max?this.t("should smaller than %s",t.max):t.hasOwnProperty("min")&&e<t.min?this.t("should bigger than %s",t.min):void 0},int:m,integer:m,string:g,id:function(t,e){return g.call(this,{format:u,allowEmpty:t.allowEmpty},e)},date:function(t,e){return g.call(this,{format:a,allowEmpty:t.allowEmpty},e)},dateTime:b,datetime:b,boolean:w,bool:w,array:function(t,e){if(!Array.isArray(e))return this.t("should be an array");if(t.hasOwnProperty("max")&&e.length>t.max)return this.t("length should smaller than %s",t.max);if(t.hasOwnProperty("min")&&e.length<t.min)return this.t("length should bigger than %s",t.min);if(t.itemType){var r=this,n=h[t.itemType];if(!n)throw new TypeError("rule type must be one of "+Object.keys(h).join(", ")+", but the following type was passed: "+t.itemType);var o=[],i="object"===t.itemType?t:t.rule||y(t.itemType);e.forEach((function(t,e){var a="["+e+"]",c=n.call(r,i,t);"string"==typeof c&&o.push({field:a,message:c,code:r.t("invalid")});Array.isArray(c)&&(o=o.concat(c.map((function(t){t.field=a+"."+t.field;t.message=t.message;return t}))))}));return o}},object:function(t,e){return"object"!==(void 0===e?"undefined":n(e))||Array.isArray(e)?this.t("should be an object"):t.rule?this.validate(t.rule,e):void 0},enum:function(t,e){if(!Array.isArray(t.values))throw new TypeError("check enum need array type values");if(-1===t.values.indexOf(e))return this.t("should be one of %s",t.values.join(", "))},email:function(t,e){return g.call(this,{format:s,message:t.message||this.t("should be an email"),allowEmpty:t.allowEmpty},e)},password:function(t,e,r){t.min||(t.min=6);t.format=l;var n=g.call(this,t,e);return n||(t.compare&&r[t.compare]!==e?this.t("should equal to %s",t.compare):void 0)},url:function(t,e){return g.call(this,{format:f,message:t.message||this.t("should be a url"),allowEmpty:t.allowEmpty},e)}},d=p.CONVERT_MAP={number:"number",int:"int",integer:"int",string:"string",id:"string",date:"string",dateTime:"string",datetime:"string",boolean:"bool",bool:"bool",email:"string",password:"string",url:"string"};function y(t){"string"==typeof(t=t||{})?t={type:t}:Array.isArray(t)?t={type:"enum",values:t}:t instanceof RegExp&&(t={type:"string",format:t});if(t.type&&"?"===t.type[t.type.length-1]){t.type=t.type.slice(0,-1);t.required=!1}return t}function v(t,e,r,o){var i;o&&(i=d[t.type]);t.convertType&&(i=t.convertType);if(i){var a=e[r];if("object"!==(void 0===a?"undefined":n(a)))if("function"!=typeof i)switch(i){case"int":e[r]=parseInt(a,10);break;case"string":e[r]=String(a);break;case"number":e[r]=Number(e[r]);break;case"bool":case"boolean":e[r]=!!a;break;default:"function"==typeof d[i]&&(e[r]=d[t.type](e[r]))}else e[r]=i(a,e)}}function m(t,e){return"number"!=typeof e||e%1!=0?this.t("should be an integer"):t.hasOwnProperty("max")&&e>t.max?this.t("should smaller than %s",t.max):t.hasOwnProperty("min")&&e<t.min?this.t("should bigger than %s",t.min):void 0}function g(t,e){if("string"!=typeof e)return this.t("should be a string");t.hasOwnProperty("allowEmpty")||!1!==t.required||(t.allowEmpty=!0);var r=t.hasOwnProperty("allowEmpty")?t.allowEmpty:t.empty;if(!e){if(r)return;return this.t("should not be empty")}return t.hasOwnProperty("max")&&e.length>t.max?this.t("length should smaller than %s",t.max):t.hasOwnProperty("min")&&e.length<t.min?this.t("length should bigger than %s",t.min):t.format&&!t.format.test(e)?t.message||this.t("should match %s",t.format):void 0}function b(t,e){return g.call(this,{format:c,allowEmpty:t.allowEmpty},e)}function w(t,e){if("boolean"!=typeof e)return this.t("should be a boolean")}},"./src/thirdParty/runtime.es5.js":function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0});return t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new x(n||[]);i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}r.method=o;r.arg=i;for(;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n){n="completed";throw r.arg}r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){n=r.done?"completed":"suspendedYield";if(u.arg===l)continue;return{value:u.arg,done:r.done}}if("throw"===u.type){n="completed";r.method="throw";r.arg=u.arg}}}}(t,r,a);return i}t.wrap=u;function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}var l={};function f(){}function p(){}function h(){}var d={};c(d,o,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(O([])));v&&v!==e&&r.call(v,o)&&(d=v);var m=h.prototype=f.prototype=Object.create(d);p.prototype=h;c(m,"constructor",h);c(h,"constructor",p);p.displayName=c(h,a,"GeneratorFunction");function g(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))};t.mark=function(t){if(Object.setPrototypeOf)Object.setPrototypeOf(t,h);else{t.__proto__=h;c(t,a,"GeneratorFunction")}t.prototype=Object.create(m);return t};t.awrap=function(t){return{__await:t}};function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t;a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}g(b.prototype);c(b.prototype,i,(function(){return this}));t.AsyncIterator=b;t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))};function w(t,e){var r=t.iterator[e.method];if(void 0===r){e.delegate=null;if("throw"===e.method){if(t.iterator.return){e.method="return";e.arg=void 0;w(t,e);if("throw"===e.method)return l}e.method="throw";e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type){e.method="throw";e.arg=n.arg;e.delegate=null;return l}var o=n.arg;if(!o){e.method="throw";e.arg=new TypeError("iterator result is not an object");e.delegate=null;return l}if(!o.done)return o;e[t.resultName]=o.value;e.next=t.nextLoc;if("return"!==e.method){e.method="next";e.arg=void 0}e.delegate=null;return l}g(m);c(m,a,"Generator");c(m,o,(function(){return this}));c(m,"toString",(function(){return"[object Generator]"}));function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]);if(2 in t){e.finallyLoc=t[2];e.afterLoc=t[3]}this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal";delete e.arg;t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}];t.forEach(j,this);this.reset(!0)}t.keys=function(t){var e=[];for(var r in t)e.push(r);e.reverse();return function r(){for(;e.length;){var n=e.pop();if(n in t){r.value=n;r.done=!1;return r}}r.done=!0;return r}};function O(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n)){e.value=t[n];e.done=!1;return e}e.value=void 0;e.done=!0;return e};return i.next=i}}return{next:E}}t.values=O;function E(){return{value:void 0,done:!0}}x.prototype={constructor:x,reset:function(t){this.prev=0;this.next=0;this.sent=this._sent=void 0;this.done=!1;this.delegate=null;this.method="next";this.arg=void 0;this.tryEntries.forEach(_);if(!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){a.type="throw";a.arg=t;e.next=r;if(n){e.method="next";e.arg=void 0}return!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};a.type=t;a.arg=e;if(i){this.method="next";this.next=i.finallyLoc;return l}return this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;if("break"===t.type||"continue"===t.type)this.next=t.arg;else if("return"===t.type){this.rval=this.arg=t.arg;this.method="return";this.next="end"}else"normal"===t.type&&e&&(this.next=e);return l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t){this.complete(r.completion,r.afterLoc);_(r);return l}}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){this.delegate={iterator:O(t),resultName:e,nextLoc:r};"next"===this.method&&(this.arg=void 0);return l}};return t}(t.exports);try{regeneratorRuntime=n}catch(t){}}})},"./node_modules/@alicloud/mpserverless-miniapp-core/dist/index.js":function(t,e,r){t.exports=function(t,e,r,n,o,i){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};t[n].call(o.exports,o,o.exports,r);o.l=!0;return o.exports}r.m=t;r.c=e;r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})};r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});Object.defineProperty(t,"__esModule",{value:!0})};r.t=function(t,e){1&e&&(t=r(t));if(8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:t});if(2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n};r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};r.d(e,"a",e);return e};r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};r.p="";return r(r.s="./src/index.ts")}({"../../node_modules/crypto-js/core.js":function(t,e,r){t.exports=function(){var t=t||function(t,e){var r=Object.create||function(){function t(){}return function(e){var r;t.prototype=e;r=new t;t.prototype=null;return r}}(),n={},o=n.lib={},i=o.Base={extend:function(t){var e=r(this);t&&e.mixIn(t);e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)});e.init.prototype=e;e.$super=this;return e},create:function(){var t=this.extend();t.init.apply(t,arguments);return t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=o.WordArray=i.extend({init:function(t,e){t=this.words=t||[];this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes,o=t.sigBytes;this.clamp();if(n%4)for(var i=0;i<o;i++){var a=r[i>>>2]>>>24-i%4*8&255;e[n+i>>>2]|=a<<24-(n+i)%4*8}else for(i=0;i<o;i+=4)e[n+i>>>2]=r[i>>>2];this.sigBytes+=o;return this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-r%4*8;e.length=t.ceil(r/4)},clone:function(){var t=i.clone.call(this);t.words=this.words.slice(0);return t},random:function(e){for(var r,n=[],o=function(e){e=e;var r=987654321,n=4294967295;return function(){var o=((r=36969*(65535&r)+(r>>16)&n)<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n;o/=4294967296;return(o+=.5)*(t.random()>.5?1:-1)}},i=0;i<e;i+=4){var c=o(4294967296*(r||t.random()));r=987654071*c();n.push(4294967296*c()|0)}return new a.init(n,e)}}),c=n.enc={},u=c.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],o=0;o<r;o++){var i=e[o>>>2]>>>24-o%4*8&255;n.push((i>>>4).toString(16));n.push((15&i).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new a.init(r,e/2)}},s=c.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],o=0;o<r;o++){var i=e[o>>>2]>>>24-o%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new a.init(r,e)}},l=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(s.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return s.parse(unescape(encodeURIComponent(t)))}},f=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init;this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t));this._data.concat(t);this._nDataBytes+=t.sigBytes},_process:function(e){var r=this._data,n=r.words,o=r.sigBytes,i=this.blockSize,c=o/(4*i),u=(c=e?t.ceil(c):t.max((0|c)-this._minBufferSize,0))*i,s=t.min(4*u,o);if(u){for(var l=0;l<u;l+=i)this._doProcessBlock(n,l);var f=n.splice(0,u);r.sigBytes-=s}return new a.init(f,s)},clone:function(){var t=i.clone.call(this);t._data=this._data.clone();return t},_minBufferSize:0}),p=(o.Hasher=f.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t);this.reset()},reset:function(){f.reset.call(this);this._doReset()},update:function(t){this._append(t);this._process();return this},finalize:function(t){t&&this._append(t);return this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new p.HMAC.init(t,r).finalize(e)}}}),n.algo={});return n}(Math);return t}()},"../../node_modules/crypto-js/hmac-md5.js":function(t,e,r){t.exports=function(t){return t.HmacMD5}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/md5.js"),r("../../node_modules/crypto-js/hmac.js"))},"../../node_modules/crypto-js/hmac.js":function(t,e,r){t.exports=function(t){!function(){var e=t,r=e.lib.Base,n=e.enc.Utf8;e.algo.HMAC=r.extend({init:function(t,e){t=this._hasher=new t.init;"string"==typeof e&&(e=n.parse(e));var r=t.blockSize,o=4*r;e.sigBytes>o&&(e=t.finalize(e));e.clamp();for(var i=this._oKey=e.clone(),a=this._iKey=e.clone(),c=i.words,u=a.words,s=0;s<r;s++){c[s]^=1549556828;u[s]^=909522486}i.sigBytes=a.sigBytes=o;this.reset()},reset:function(){var t=this._hasher;t.reset();t.update(this._iKey)},update:function(t){this._hasher.update(t);return this},finalize:function(t){var e=this._hasher,r=e.finalize(t);e.reset();return e.finalize(this._oKey.clone().concat(r))}})}()}(r("../../node_modules/crypto-js/core.js"))},"../../node_modules/crypto-js/md5.js":function(t,e,r){t.exports=function(t){!function(e){var r=t,n=r.lib,o=n.WordArray,i=n.Hasher,a=r.algo,c=[];!function(){for(var t=0;t<64;t++)c[t]=4294967296*e.abs(e.sin(t+1))|0}();var u=a.MD5=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var n=e+r,o=t[n];t[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i=this._hash.words,a=t[e+0],u=t[e+1],h=t[e+2],d=t[e+3],y=t[e+4],v=t[e+5],m=t[e+6],g=t[e+7],b=t[e+8],w=t[e+9],j=t[e+10],_=t[e+11],x=t[e+12],O=t[e+13],E=t[e+14],S=t[e+15],P=i[0],k=i[1],T=i[2],L=i[3];P=s(P,k,T,L,a,7,c[0]);L=s(L,P,k,T,u,12,c[1]);T=s(T,L,P,k,h,17,c[2]);k=s(k,T,L,P,d,22,c[3]);P=s(P,k,T,L,y,7,c[4]);L=s(L,P,k,T,v,12,c[5]);T=s(T,L,P,k,m,17,c[6]);k=s(k,T,L,P,g,22,c[7]);P=s(P,k,T,L,b,7,c[8]);L=s(L,P,k,T,w,12,c[9]);T=s(T,L,P,k,j,17,c[10]);k=s(k,T,L,P,_,22,c[11]);P=s(P,k,T,L,x,7,c[12]);L=s(L,P,k,T,O,12,c[13]);T=s(T,L,P,k,E,17,c[14]);P=l(P,k=s(k,T,L,P,S,22,c[15]),T,L,u,5,c[16]);L=l(L,P,k,T,m,9,c[17]);T=l(T,L,P,k,_,14,c[18]);k=l(k,T,L,P,a,20,c[19]);P=l(P,k,T,L,v,5,c[20]);L=l(L,P,k,T,j,9,c[21]);T=l(T,L,P,k,S,14,c[22]);k=l(k,T,L,P,y,20,c[23]);P=l(P,k,T,L,w,5,c[24]);L=l(L,P,k,T,E,9,c[25]);T=l(T,L,P,k,d,14,c[26]);k=l(k,T,L,P,b,20,c[27]);P=l(P,k,T,L,O,5,c[28]);L=l(L,P,k,T,h,9,c[29]);T=l(T,L,P,k,g,14,c[30]);P=f(P,k=l(k,T,L,P,x,20,c[31]),T,L,v,4,c[32]);L=f(L,P,k,T,b,11,c[33]);T=f(T,L,P,k,_,16,c[34]);k=f(k,T,L,P,E,23,c[35]);P=f(P,k,T,L,u,4,c[36]);L=f(L,P,k,T,y,11,c[37]);T=f(T,L,P,k,g,16,c[38]);k=f(k,T,L,P,j,23,c[39]);P=f(P,k,T,L,O,4,c[40]);L=f(L,P,k,T,a,11,c[41]);T=f(T,L,P,k,d,16,c[42]);k=f(k,T,L,P,m,23,c[43]);P=f(P,k,T,L,w,4,c[44]);L=f(L,P,k,T,x,11,c[45]);T=f(T,L,P,k,S,16,c[46]);P=p(P,k=f(k,T,L,P,h,23,c[47]),T,L,a,6,c[48]);L=p(L,P,k,T,g,10,c[49]);T=p(T,L,P,k,E,15,c[50]);k=p(k,T,L,P,v,21,c[51]);P=p(P,k,T,L,x,6,c[52]);L=p(L,P,k,T,d,10,c[53]);T=p(T,L,P,k,j,15,c[54]);k=p(k,T,L,P,u,21,c[55]);P=p(P,k,T,L,b,6,c[56]);L=p(L,P,k,T,S,10,c[57]);T=p(T,L,P,k,m,15,c[58]);k=p(k,T,L,P,O,21,c[59]);P=p(P,k,T,L,y,6,c[60]);L=p(L,P,k,T,_,10,c[61]);T=p(T,L,P,k,h,15,c[62]);k=p(k,T,L,P,w,21,c[63]);i[0]=i[0]+P|0;i[1]=i[1]+k|0;i[2]=i[2]+T|0;i[3]=i[3]+L|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;r[o>>>5]|=128<<24-o%32;var i=e.floor(n/4294967296),a=n;r[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);r[14+(o+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);t.sigBytes=4*(r.length+1);this._process();for(var c=this._hash,u=c.words,s=0;s<4;s++){var l=u[s];u[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return c},clone:function(){var t=i.clone.call(this);t._hash=this._hash.clone();return t}});function s(t,e,r,n,o,i,a){var c=t+(e&r|~e&n)+o+a;return(c<<i|c>>>32-i)+e}function l(t,e,r,n,o,i,a){var c=t+(e&n|r&~n)+o+a;return(c<<i|c>>>32-i)+e}function f(t,e,r,n,o,i,a){var c=t+(e^r^n)+o+a;return(c<<i|c>>>32-i)+e}function p(t,e,r,n,o,i,a){var c=t+(r^(e|~n))+o+a;return(c<<i|c>>>32-i)+e}r.MD5=i._createHelper(u);r.HmacMD5=i._createHmacHelper(u)}(Math);return t.MD5}(r("../../node_modules/crypto-js/core.js"))},"./src/index.ts":function(t,e,r){"use strict";r.r(e);r.d(e,"MPHTTPRequestEncoder",(function(){return O}));r.d(e,"MPHTTPResponseDecoder",(function(){return E}));r.d(e,"MPHTTPTransport",(function(){return N}));r.d(e,"HighFileSevice",(function(){return W}));r.d(e,"MPServerlessMiniAppCore",(function(){return st}));var n=r("@alicloud/mpserverless-core"),o=r("../../node_modules/crypto-js/core.js"),i=r.n(o),a=r("../../node_modules/crypto-js/hmac-md5.js"),c=r.n(a),u=Object(n.MPServerlessErrorClass)({UnauthorizedError:{code:"UnauthorizedError",message:"未授权错误"},InterfaceRequestError:{code:"InterfaceRequestError",message:"接口请求错误"}});function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=p(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function p(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){_(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,x(n.key),n)}}function m(t,e,r){e&&v(t.prototype,e);r&&v(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function g(t,e,r){return e=b(e),function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return w(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return!!t}()?Reflect.construct(e,r||[],b(t).constructor):e.apply(t,r))}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&function(t,e){(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t})(t,e)}(t,e)}function _(t,e,r){(e=x(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r;return t}function x(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==s(e)?e:String(e)}var O=function(t){j(e,t);function e(t,r){var o;y(this,e);(o=g(this,e,[t])).spaceId=r;_(w(o),"prefix",n.PREFIX.CLIENT);_(w(o),"serviceHeaders",{});o.setBodyField({spaceId:r});return o}m(e,[{key:"sign",value:function(t){var e=this.body,r=e.spaceId,n=e.method,o=e.params,a=e.token,u=e.userId,s=Date.now();this.setBodyField({timestamp:s});var l="",f={spaceId:r,timestamp:s,method:n,params:JSON.stringify(o),token:a,userId:u};Object.keys(f).sort().forEach((function(t){f[t]&&(l="".concat(l,"&").concat(t,"=").concat(f[t]))}));l=l.slice(1);try{var p=c()(l,t).toString(i.a.enc.Hex);this.setServerlessHeaders({sign:p})}catch(t){throw t}}},{key:"encodeAsHTTPRequestObject",value:function(t){this.body.params&&(this.body.params=JSON.stringify(this.body.params));return d({url:this.url,data:this.body,method:this.method,headers:this.headers,dataType:"json"},t)}},{key:"clone",value:function(){var t=new e(this.endpoint,this.spaceId);t.setBodyField(this.body);t.setBaseHeaders(this.baseHeaders);t.setServerlessHeaders(this.serverlessHeaders);return t}}]);return e}(n.HTTPRequestEncoder),E=function(t){j(e,t);function e(){var t;y(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];_(w(t=g(this,e,[].concat(n))),"ERROR_CODES",[11,12,13,14,19,20]);return t}m(e,[{key:"setStatusAndBody",value:function(t,r){f(b(e.prototype),"setStatusAndBody",this).call(this,t,r);this.ERROR_CODES.indexOf(t)>=0&&(this._error=new u.InterfaceRequestError("错误码 ".concat(t.toString(),", 请参考对应开放平台文档排查问题")))}},{key:"decode",value:function(t){this.setHeaders(t.headers||{});var r=t.data||t.body;"string"==typeof r&&(r=JSON.parse(r));if(r&&"data"in r){if(null==r.data)r.result=null;else if(Number(r.data.affectedDocs)===r.data.affectedDocs)r=Object.assign({},r,d({},r.data));else if("[object Object]"===Object.prototype.toString.call(r.data))r.result=Object.assign({},r.data);else if("[object Array]"===Object.prototype.toString.call(r.data)){var n=function(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);return"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r.data);r.result=n.slice(0)}else r.result=r.data;delete r.data}if(/^request:fail+/.test(t.errMsg)){this.setErrorMessage(t.errMsg);return f(b(e.prototype),"decode",this).call(this)}var o=parseInt(t.error,10);if(o){this.setStatusAndBody(o,r);return f(b(e.prototype),"decode",this).call(this)}var i=t.err;if(i){this.setErrorMessage(i);return f(b(e.prototype),"decode",this).call(this)}if(t instanceof Error){this.setErrorObject(t);return f(b(e.prototype),"decode",this).call(this)}if(r&&"object"===s(r.error)){this.setErrorObject(r.error);return f(b(e.prototype),"decode",this).call(this)}var a=parseInt(t.status||t.statusCode,10);if(a){this.setStatusAndBody(a,r);return f(b(e.prototype),"decode",this).call(this)}this.setStatusAndBody(200,t);return f(b(e.prototype),"decode",this).call(this)}}]);return e}(n.HTTPResponseDecoder);function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(){P=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new A(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="executing",d="completed",y={};function v(){}function m(){}function g(){}var b={};s(b,a,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(B([])));j&&j!==r&&n.call(j,a)&&(b=j);var _=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==S(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?d:"suspendedYield",s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=d,n.method="throw",n.arg=s.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function B(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(S(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},x(O.prototype),s(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(_),s(_,u,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=B,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:B(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function k(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){r(t);return}c.done?e(u):Promise.resolve(u).then(n,o)}function T(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){k(i,n,o,a,c,"next",t)}function c(t){k(i,n,o,a,c,"throw",t)}a(void 0)}))}}function L(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,D(n.key),n)}}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function B(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I(t,e){return(I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t})(t,e)}function R(t,e,r){(e=D(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r;return t}function D(t){var e=function(t,e){if("object"!=S(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==S(e)?e:String(e)}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&I(t,e)}(e,t);function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);R(B(r=function(t,e,r){return e=A(e),function(t,e){if(e&&("object"===S(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return B(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return!!t}()?Reflect.construct(e,r||[],A(t).constructor):e.apply(t,r))}(this,e,[t])),"userService",void 0);R(B(r),"httpRequest",void 0);return r}!function(t,e,r){e&&L(t.prototype,e);Object.defineProperty(t,"prototype",{writable:!1})}(e,[{key:"setUserService",value:function(t){this.userService=t}},{key:"setRequest",value:function(t){Object(n.assert)(t,"初始化时缺少 request 参数");this.httpRequest=t}},{key:"getEncoder",value:function(t){return new O(this.endpoint,this.spaceId)}},{key:"request",value:function(){var t=T(P().mark((function t(e){var r,n,o,i,a,c=arguments;return P().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=c.length>1&&void 0!==c[1]&&c[1];n=e.clone();t.next=4;return this.userService.setRequestToken(e,r);case 4:o=t.sent;this.ua&&o.setBaseHeaders({"x-serverless-ua":this.ua});t.prev=6;i=o.encodeAsHTTPRequestObject({timeout:this.timeout,dataType:"json"});this.logger.info("request encode data",i);t.next=11;return this.httpRequest(i);case 11:a=t.sent;return t.abrupt("return",a);case 15:t.prev=15;t.t0=t.catch(6);this.logger.error("request error",t.t0);if("GATEWAY_INVALID_TOKEN"!==t.t0.error.code&&"InvalidParameter.InvalidToken"!==t.t0.error.code){t.next=25;break}if(!r){t.next=22;break}throw new u.UnauthorizedError("授权 token 已过期，重新获取失败");case 22:t.next=24;return this.request(n,!0);case 24:return t.abrupt("return",t.sent);case 25:if(!t.t0.error){t.next=27;break}throw t.t0.error;case 27:throw t.t0;case 28:case"end":return t.stop()}}),t,this,[[6,15]])})));return function(e){return t.apply(this,arguments)}}()},{key:"wrapApi",value:function(t){var e=this;return function(){var r=T(P().mark((function r(n){var o,i,a;return P().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.next=2;return t(n);case 2:o=r.sent;e.logger.info("completed request");e.logger.info(JSON.stringify(o,null,2));i=new E;if(!(a=i.decode(o)).error){r.next=9;break}throw a;case 9:return r.abrupt("return",a);case 10:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}}]);return e}(n.HTTPTransport);function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(){q=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="executing",d="completed",y={};function v(){}function m(){}function g(){}var b={};s(b,a,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,a)&&(b=j);var _=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==C(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?d:"suspendedYield",s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=d,n.method="throw",n.arg=s.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function L(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(C(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},x(O.prototype),s(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(_),s(_,u,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=L,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function M(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){r(t);return}c.done?e(u):Promise.resolve(u).then(n,o)}function z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,K(n.key),n)}}function F(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H(){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=G(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function G(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U(t)););return t}function U(t){return(U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Y(t,e){return(Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t})(t,e)}function K(t){var e=function(t,e){if("object"!=C(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==C(e)?e:String(e)}var W=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&Y(t,e)}(e,t);function e(t,r){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);!function(t,e,r){(e=K(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(F(o=function(t,e,r){return e=U(e),function(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return F(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return!!t}()?Reflect.construct(e,r||[],U(t).constructor):e.apply(t,r))}(this,e,[t,r])),"getFileUploadInfo",void 0);Object(n.assert)(r.getFileUploadInfo,"[MPFileService]初始化时缺少 getFileUploadInfo 参数");o.getFileUploadInfo=r.getFileUploadInfo;return o}!function(t,e,r){e&&z(t.prototype,e);Object.defineProperty(t,"prototype",{writable:!1})}(e,[{key:"uploadFile",value:function(){var t=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){M(i,n,o,a,c,"next",t)}function c(t){M(i,n,o,a,c,"throw",t)}a(void 0)}))}}(q().mark((function t(r){var o,i,a,c;return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(n.assert)(r,"options required");Object(n.assert)(r.filePath&&"string"==typeof r.filePath,"[MPFileService]调用 uploadFile 缺少 filePath 参数");t.next=4;return this.getFileUploadInfo({filePath:r.filePath});case 4:o=t.sent;i=o.body,a=i.fileSize,c=i.fileExtension;!r.fileSize&&a&&(r.fileSize=a);!r.extension&&c&&(r.extension=c);"string"==typeof r.fileSize&&(r.fileSize=parseInt(r.fileSize));t.next=11;return H(U(e.prototype),"uploadFile",this).call(this,r);case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]);return e}(r("@alicloud/mp-file-service").MPFileService),V=r("@alicloud/mp-proxy-service"),J=r("@alicloud/mp-db-service"),$=r("@alicloud/mp-user-service"),X=r("@alicloud/mp-function-service");function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function tt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(r),!0).forEach((function(e){ct(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,ut(n.key),n)}}function rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nt(){return(nt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=ot(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ot(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=it(t)););return t}function it(t){return(it=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function at(t,e){return(at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t})(t,e)}function ct(t,e,r){(e=ut(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r;return t}function ut(t){var e=function(t,e){if("object"!=Z(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==Z(e)?e:String(e)}var st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&at(t,e)}(e,t);function e(t,r){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);ct(rt(o=function(t,e,r){return e=it(e),function(t,e){if(e&&("object"===Z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return rt(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return!!t}()?Reflect.construct(e,r||[],it(t).constructor):e.apply(t,r))}(this,e,[tt(tt({},r),{},{httpTransport:N,options:t.logger})])),"db",void 0);ct(rt(o),"file",void 0);ct(rt(o),"user",void 0);ct(rt(o),"function",void 0);ct(rt(o),"network",void 0);Object(n.assert)(r.clientSecret,"clientSecret is required");Object(n.assert)(r.appId,"appId is required");o.user=new $.UserService(o.transport,{getAuthCode:o.transport.wrapApi(t.getAuthCode),request:o.transport.wrapApi(t.request),appId:r.appId,appSecret:r.clientSecret,isvAppId:r.isvAppId,ua:o.ua});o.transport.setUserService(o.user);o.transport.setRequest(o.transport.wrapApi(t.request));o.db=new J.DbService(o.transport);o.file=new W(o.transport,{uploadFile:o.transport.wrapApi(t.uploadFile),getFileUploadInfo:o.transport.wrapApi(t.getFileUploadInfo)});o.function=new X.FunctionService(o.transport);o.network=new V.ProxyService(o.transport);return o}!function(t,e,r){e&&et(t.prototype,e);Object.defineProperty(t,"prototype",{writable:!1})}(e,[{key:"version",get:function(){return"3.1.1"}},{key:"ua",get:function(){return"pkg_name:@alicloud/mpserverless-sdk;ver:3.1.1;"}},{key:"createTransport",value:function(t){nt(it(e.prototype),"createTransport",this).call(this,t);this.transport.setAppSecret(t.clientSecret).setUA(this.ua)}}]);return e}(n.MPServerlessCore)},"@alicloud/mp-db-service":function(e,r){e.exports=t},"@alicloud/mp-file-service":function(t,r){t.exports=e},"@alicloud/mp-function-service":function(t,e){t.exports=r},"@alicloud/mp-proxy-service":function(t,e){t.exports=n},"@alicloud/mp-user-service":function(t,e){t.exports=o},"@alicloud/mpserverless-core":function(t,e){t.exports=i}})}(r("./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-db-service/dist/index.js"),r("./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-file-service/dist/index.js"),r("./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-function-service/dist/index.js"),r("./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-proxy-service/dist/index.js"),r("./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-user-service/dist/index.js"),r("./node_modules/@alicloud/mpserverless-core/dist/index.js"))},"./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-db-service/dist/index.js":function(t,e,r){t.exports=function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};t[n].call(o.exports,o,o.exports,r);o.l=!0;return o.exports}r.m=t;r.c=e;r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})};r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});Object.defineProperty(t,"__esModule",{value:!0})};r.t=function(t,e){1&e&&(t=r(t));if(8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:t});if(2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n};r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};r.d(e,"a",e);return e};r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};r.p="";return r(r.s="./src/index.ts")}({"./src/index.ts":function(t,e,r){"use strict";r.r(e);r.d(e,"DbService",(function(){return Jt}));var n=r("@alicloud/mpserverless-core");function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,c(n.key),n)}}function a(t,e,r){e&&i(t.prototype,e);r&&i(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function c(t){var e=function(t,e){if("object"!=f(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==f(e)?e:String(e)}function u(t,e,r){return e=s(e),function(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return!!t}()?Reflect.construct(e,r||[],s(t).constructor):e.apply(t,r))}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&function(t,e){(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t})(t,e)}(t,e)}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var p=["i","m","u","g"];function h(t){return Array.isArray(t)}function d(t){return null!==t&&"object"===f(t)&&!h(t)}function y(t){return"string"==typeof t||function(t,e){return Object.prototype.toString.call(t)==="[object ".concat("String","]")}(t)}var v=function(t){l(e,t);function e(){o(this,e);return u(this,e,arguments)}a(e,[{key:"encode",value:function(t){var e=this;return t instanceof RegExp?this.toRegexp(t):t instanceof Date?this.toDate(t):h(t)?t.map((function(t){return e.encode(t)})):d(t)?Object.keys(t).reduce((function(r,n){r[n]=e.encode(t[n]);return r}),{}):t}},{key:"toDate",value:function(t){return t.toISOString()}},{key:"toRegexp",value:function(t){return"/".concat(t.source.replace(/\\\//g,"/"),"/").concat(t.flags)}}]);return e}(n.BaseEncoder),m=function(t){l(e,t);function e(){o(this,e);return u(this,e,arguments)}a(e,[{key:"decode",value:function(t){var e=this;return this.isDate(t)?this.toDate(t):h(t)?t.map((function(t){return e.decode(t)})):d(t)?Object.keys(t).reduce((function(r,n){r[n]=e.decode(t[n]);return r}),{}):t}},{key:"isDate",value:function(t){return y(t)&&/^\d{4}\-\d{2}\-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/.test(t)&&!isNaN(Date.parse(t))}},{key:"isRegexp",value:function(t){if(y(t)){var e=!0,r=t.split("/"),n=r[r.length-1];n&&(e=n.split("").reduce((function(t,e){return!0===t&&p.indexOf(e)>-1}),!0));return r.length>=2&&e}return!1}},{key:"toDate",value:function(t){return new Date(t)}},{key:"toRegexp",value:function(t){var e=t.indexOf("/"),r=t.lastIndexOf("/");return new RegExp(t.slice(e+1,r),t.slice(r+1))}}]);return e}(n.BaseDecoder);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,w(n.key),n)}}function w(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==g(e)?e:String(e)}var j=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);!function(t,e,r){(e=w(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"name",void 0);this.name=e}!function(t,e,r){e&&b(t.prototype,e);Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"inspect",value:function(){return{collection:this.name}}}]);return t}(),_=function(t){t.READ=".read";t.WRITE=".write";t.CREATE="document.create";t.UPDATE="document.update";t.DELETE="document.delete";t.AGGREGATE=".aggregate";return t}({});function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e,r){return e=E(e),function(t,e){if(e&&("object"===x(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return S(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return!!t}()?Reflect.construct(e,r||[],E(t).constructor):e.apply(t,r))}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&function(t,e){(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t})(t,e)}(t,e)}function k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?k(Object(r),!0).forEach((function(e){I(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,R(n.key),n)}}function B(t,e,r){e&&A(t.prototype,e);r&&A(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function I(t,e,r){(e=R(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r;return t}function R(t){var e=function(t,e){if("object"!=x(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==x(e)?e:String(e)}var D=function(){function t(e){L(this,t);I(this,"name",void 0);I(this,"_schema",{});I(this,"_argMap",{});I(this,"_permission",void 0);this._argMap=e;this._argMap.options||(this._argMap.options={})}B(t,[{key:"permission",get:function(){switch(this._permission){case _.CREATE:case _.UPDATE:case _.DELETE:return _.WRITE;default:return this._permission}}},{key:"argMap",get:function(){return this._argMap}},{key:"schema",get:function(){return this._schema}},{key:"augmentOptions",value:function(t){this.argMap.options=Object.assign({},this.argMap.options,t)}},{key:"inspect",value:function(){return T(T({},function t(e){for(var r=0,n=Object.keys(e);r<n.length;r++){var o=n[r];d(e[o])&&(0===Object.keys(e[o]).length?"{}"!==JSON.stringify(e[o])&&delete e[o]:t(e[o]));void 0===e[o]&&delete e[o]}return e}(JSON.parse(JSON.stringify(this.argMap)))),{},{command:this.name})}}]);return t}(),N=function(t){P(e,t);function e(){var t;L(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];I(S(t=O(this,e,[].concat(n))),"name","aggregate");I(S(t),"_schema",{pipeline:"array",options:{type:"object",required:!1,rule:{explain:{type:"boolean",required:!1},allowDiskUse:{type:"boolean",required:!1},maxTimeMS:{type:"int",required:!1,min:0},bypassDocumentValidation:{type:"boolean",required:!1},raw:{type:"boolean",required:!1},promoteLongs:{type:"boolean",required:!1},promoteValues:{type:"boolean",required:!1},promoteBuffers:{type:"boolean",required:!1},collation:{type:"object",required:!1}}}});I(S(t),"_permission",_.AGGREGATE);return t}return B(e)}(D),C=function(t){P(e,t);function e(){var t;L(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];I(S(t=O(this,e,[].concat(n))),"name","count");I(S(t),"_schema",{query:"object",options:{type:"object",required:!1,rule:{limit:{type:"int",required:!1,min:0},skip:{type:"int",required:!1,min:0},maxTimeMS:{type:"int",required:!1,min:0}}}});I(S(t),"_permission",_.READ);return t}return B(e)}(D),q=function(t){P(e,t);function e(){var t;L(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];I(S(t=O(this,e,[].concat(n))),"name","distinct");I(S(t),"_schema",{key:"string",query:"object",options:{type:"object",required:!1}});I(S(t),"_permission",_.READ);return t}return B(e)}(D),M=function(t){P(e,t);function e(){var t;L(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];I(S(t=O(this,e,[].concat(n))),"name","findOne");I(S(t),"_schema",{query:{type:"object",required:!1},options:{type:"object",required:!1,rule:{limit:{type:"int",required:!1,min:0},skip:{type:"int",required:!1,min:0},maxTimeMS:{type:"int",required:!1,min:0},sort:{type:"sort",required:!1},projection:{type:"projection",required:!1},hint:{type:"object",required:!1}}}});I(S(t),"_permission",_.READ);return t}return B(e)}(D),z=function(t){P(e,t);function e(){var t;L(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];I(S(t=O(this,e,[].concat(n))),"name","find");I(S(t),"_schema",{query:{type:"object",required:!1},options:{type:"object",required:!1,rule:{limit:{type:"int",required:!1,min:0},skip:{type:"int",required:!1,min:0},maxTimeMS:{type:"int",required:!1,min:0},sort:{type:"sort",required:!1},projection:{type:"projection",required:!1},hint:{type:"object",required:!1}}}});I(S(t),"_permission",_.READ);return t}return B(e)}(D),F=function(t){P(e,t);function e(){var t;L(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];I(S(t=O(this,e,[].concat(n))),"name","insertOne");I(S(t),"_schema",{doc:"field",options:{type:"object",required:!1}});I(S(t),"_permission",_.CREATE);return t}return B(e)}(D),H=function(t){P(e,t);function e(){var t;L(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];I(S(t=O(this,e,[].concat(n))),"name","insertMany");I(S(t),"_schema",{docs:"fields",options:{type:"object",required:!1}});I(S(t),"_permission",_.CREATE);return t}return B(e)}(D),G=function(t){P(e,t);function e(){var t;L(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];I(S(t=O(this,e,[].concat(n))),"name","findOneAndUpdate");I(S(t),"_schema",{filter:"object",update:"object",options:{type:"object",required:!1,rule:{maxTimeMS:{type:"int",min:0,required:!1},sort:{type:"sort",required:!1},upsert:{type:"boolean",required:!1},projection:{type:"projection",required:!1},returnNewDocument:{type:"boolean",required:!1}}}});I(S(t),"_permission",_.UPDATE);return t}return B(e)}(D),U=function(t){P(e,t);function e(){var t;L(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];I(S(t=O(this,e,[].concat(n))),"name","updateOne");I(S(t),"_schema",{filter:"object",update:"nobject",options:{type:"object",required:!1,rule:{upsert:{type:"boolean",required:!1}}}});I(S(t),"_permission",_.UPDATE);return t}return B(e)}(D),Y=function(t){P(e,t);function e(){var t;L(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];I(S(t=O(this,e,[].concat(n))),"name","updateMany");I(S(t),"_schema",{filter:"object",update:"nobject",options:{type:"object",required:!1,rule:{upsert:{type:"boolean",required:!1}}}});I(S(t),"_permission",_.UPDATE);return t}return B(e)}(D),K=function(t){P(e,t);function e(){var t;L(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];I(S(t=O(this,e,[].concat(n))),"name","findOneAndReplace");I(S(t),"_schema",{filter:"object",replacement:"object",options:{type:"object",required:!1,rule:{maxTimeMS:{type:"int",min:0,required:!1},sort:{type:"sort",required:!1},upsert:{type:"boolean",required:!1},projection:{type:"projection",required:!1}}}});I(S(t),"_permission",_.UPDATE);return t}return B(e)}(D),W=function(t){P(e,t);function e(){var t;L(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];I(S(t=O(this,e,[].concat(n))),"name","replaceOne");I(S(t),"_schema",{filter:"object",doc:"object",options:{type:"object",required:!1,rule:{upsert:{type:"boolean",required:!1}}}});I(S(t),"_permission",_.UPDATE);return t}return B(e)}(D),V=function(t){P(e,t);function e(){var t;L(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];I(S(t=O(this,e,[].concat(n))),"name","findOneAndDelete");I(S(t),"_schema",{filter:"object",options:{type:"object",required:!1,rule:{maxTimeMS:{type:"int",min:0,required:!1},sort:{type:"sort",required:!1},projection:{type:"object",required:!1}}}});I(S(t),"_permission",_.DELETE);return t}return B(e)}(D),J=function(t){P(e,t);function e(){var t;L(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];I(S(t=O(this,e,[].concat(n))),"name","deleteOne");I(S(t),"_schema",{filter:{type:"object"},options:{type:"object",required:!1}});I(S(t),"_permission",_.DELETE);return t}return B(e)}(D),$=function(t){P(e,t);function e(){var t;L(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];I(S(t=O(this,e,[].concat(n))),"name","deleteMany");I(S(t),"_schema",{filter:{type:"object"},options:{type:"object",required:!1}});I(S(t),"_permission",_.DELETE);return t}return B(e)}(D),X=function(t){P(e,t);function e(){var t;L(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];I(S(t=O(this,e,[].concat(n))),"name","startTransaction");return t}return B(e)}(D),Z=function(t){P(e,t);function e(){var t;L(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];I(S(t=O(this,e,[].concat(n))),"name","commitTransaction");return t}return B(e)}(D),Q=function(t){P(e,t);function e(){var t;L(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];I(S(t=O(this,e,[].concat(n))),"name","abortTransaction");return t}return B(e)}(D);function tt(t){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,nt(n.key),n)}}function rt(t,e,r){(e=nt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r;return t}function nt(t){var e=function(t,e){if("object"!=tt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==tt(e)?e:String(e)}var ot=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);rt(this,"raw",void 0);rt(this,"encoder",new v);rt(this,"decoder",new m);this.raw=this.decoder.decode(e)}!function(t,e,r){e&&et(t.prototype,e);Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"inspect",value:function(){return this.raw}}]);return t}();function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var at=function(t){t.INVALID_TYPE="field type is invalid";t.NOT_ARRAY="field is not an array";t.ILLEGAL="field should not contain illegal character";t.ILLEGAL_VALUE="field should not contain undefined for a value";t.EMPTY_OBJECT="field should not be an empty object";t.NOT_OBJECT="should be an object";t.EMPTY="should not empty";return t}(at||{});function ct(t,e,r){function n(t){if(/[\.\$]/.test(t))return at.ILLEGAL}if(!(e instanceof Object))return at.INVALID_TYPE;if(Array.isArray(e))return at.INVALID_TYPE;for(var o=0,i=Object.keys(e);o<i.length;o++){var a=i[o],c=n(a);if("string"==typeof c)return c;if(e[a]instanceof Object&&!Array.isArray(e[a])){var u=ct(t,e[a]);if(u)return u}}}var ut={ruleOfField:ct,ruleOfFields:function(t,e){if(!Array.isArray(e))return at.NOT_ARRAY;if(0===e.length)return at.EMPTY;for(var r,n=0;!r&&n<e.length;){r=ct(null,e[n],e[n]);n++}return r},ruleOfSort:function(t,e){var r=[1,-1];function n(t){if(/[\$]/.test(t))return at.ILLEGAL}if(!(e instanceof Object))return at.INVALID_TYPE;if("{}"!==JSON.stringify(e)){if(Array.isArray(e))return at.INVALID_TYPE;for(var o=null,i=0,a=Object.keys(e);i<a.length;i++){var c=a[i];if("string"==typeof(o=n(c)))return o;if(!r.includes(e[c]))return at.INVALID_TYPE}return null===o?at.INVALID_TYPE:void 0}},ruleOfProjection:function(t,e){var r=[1,0];function n(t){if(/[\$]/.test(t))return at.ILLEGAL}if(!(e instanceof Object))return at.INVALID_TYPE;if("{}"!==JSON.stringify(e)){if(Array.isArray(e))return at.INVALID_TYPE;for(var o=null,i=0,a=Object.keys(e);i<a.length;i++){var c=a[i];if("string"==typeof(o=n(c)))return o;if(!r.includes(e[c]))return at.INVALID_TYPE}return null===o?at.INVALID_TYPE:void 0}},ruleOfNobject:function(t,e){return"object"!==it(e)?at.NOT_OBJECT:0===Object.keys(e).length?at.EMPTY_OBJECT:void 0}};function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lt(t){return(lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ft(t,e){return(ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t})(t,e)}var pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&ft(t,e)}(e,t);function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);r=function(t,e,r){return e=lt(e),function(t,e){if(e&&("object"===st(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return!!t}()?Reflect.construct(e,r||[],lt(t).constructor):e.apply(t,r))}(this,e,[t]);for(var n=0,o=Object.keys(ut);n<o.length;n++){var i=o[n],a=i.match(/ruleOf([a-zA-Z]+)/)[1];r.p.addRule(a[0].toLowerCase()+a.slice(1),ut[i])}return r}return function(t,e,r){Object.defineProperty(t,"prototype",{writable:!1});return t}(e)}(n.Validator),ht=Object(n.MPServerlessErrorClass)({TransactionError:{code:"TransactionError",message:"事务失败错误"}});function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t,e,r){return e=bt(e),function(t,e){if(e&&("object"===dt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return vt(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return!!t}()?Reflect.construct(e,r||[],bt(t).constructor):e.apply(t,r))}function vt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mt(){return(mt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=gt(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function gt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bt(t)););return t}function bt(t){return(bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wt(t,e){return(wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t})(t,e)}function jt(){jt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="executing",d="completed",y={};function v(){}function m(){}function g(){}var b={};s(b,a,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,a)&&(b=j);var _=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==dt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?d:"suspendedYield",s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=d,n.method="throw",n.arg=s.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function L(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(dt(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},x(O.prototype),s(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(_),s(_,u,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=L,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function _t(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){r(t);return}c.done?e(u):Promise.resolve(u).then(n,o)}function xt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_t(i,n,o,a,c,"next",t)}function c(t){_t(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Et(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,kt(n.key),n)}}function St(t,e,r){e&&Et(t.prototype,e);r&&Et(t,r);Object.defineProperty(t,"prototype",{writable:!1});return t}function Pt(t,e,r){(e=kt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r;return t}function kt(t){var e=function(t,e){if("object"!=dt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==dt(e)?e:String(e)}var Tt=function(t){t.AGGREGATE="aggregate";t.COUNT="count";t.DISTINCT="distinct";t.FIND_ONE="findone";t.FIND="find";t.INSERT_ONE="insertOne";t.INSERT_MANY="insertMany";t.FIND_ONE_AND_UPDATE="findOneAndUpdate";t.UPDATE_ONE="updateOne";t.UPDATE_MANY="updateMany";t.FIND_ONE_AND_REPLACE="findOneAndReplace";t.REPLACE_ONE="replaceOne";t.FIND_ONE_AND_DELETE="findOneAndDelete";t.DELETE_ONE="deleteOne";t.DELETE_MANY="deleteMany";return t}(Tt||{}),Lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&wt(t,e)}(e,t);function e(){var t;Ot(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];Pt(vt(t=yt(this,e,[].concat(n))),"getEncoder",void 0);Pt(vt(t),"getTransport",void 0);return t}St(e,[{key:"execute",value:function(){var t=xt(jt().mark((function t(){var r,n,o;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return mt(bt(e.prototype),"execute",this).call(this);case 2:r=t.sent;n=this.getEncoder().setBodyField({method:"serverless.db.default.execute",params:r});t.next=6;return this.getTransport().request(n);case 6:o=t.sent;return t.abrupt("return",new ot(o.body).inspect());case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]);return e}(function(){function t(){Ot(this,t);Pt(this,"transId",void 0);Pt(this,"coll",void 0);Pt(this,"comm",void 0);Pt(this,"encoder",new v);Pt(this,"decoder",new m)}St(t,[{key:"transaction",value:function(){var t=xt(jt().mark((function t(){var e;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.comm=new X({});t.next=3;return this.execute();case 3:(e=t.sent)&&(this.transId=e.transactionId);return t.abrupt("return",this.transId);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"commit",value:function(){var t=xt(jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.comm=new Z({});return t.abrupt("return",this.execute());case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"rollback",value:function(){var t=xt(jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.comm=new Q({});return t.abrupt("return",this.execute());case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"collection",value:function(t){this.coll=new j(t);return this}},{key:"aggregate",value:function(t,e){this.validateTransactionAction(Tt.AGGREGATE);this.comm=new N({pipeline:t,options:e});return this.execute()}},{key:"count",value:function(t,e){this.validateTransactionAction(Tt.COUNT);this.comm=new C({query:t,options:e});return this.execute()}},{key:"distinct",value:function(t,e,r){this.validateTransactionAction(Tt.DISTINCT);this.comm=new q({key:t,query:e,options:r});return this.execute()}},{key:"findOne",value:function(t,e){this.comm=new M({query:t,options:e});return this.execute()}},{key:"find",value:function(t,e){this.validateTransactionAction(Tt.FIND);this.comm=new z({query:t,options:e});return this.execute()}},{key:"insertOne",value:function(t,e){this.comm=new F({doc:t,options:e});return this.execute()}},{key:"insertMany",value:function(t,e){this.validateTransactionAction(Tt.INSERT_MANY);this.comm=new H({docs:t,options:e});return this.execute()}},{key:"findOneAndUpdate",value:function(t,e,r){this.comm=new G({filter:t,update:e,options:r});return this.execute()}},{key:"updateOne",value:function(t,e,r){this.comm=new U({filter:t,update:e,options:r});return this.execute()}},{key:"updateMany",value:function(t,e,r){this.validateTransactionAction(Tt.UPDATE_MANY);this.comm=new Y({filter:t,update:e,options:r});return this.execute()}},{key:"findOneAndReplace",value:function(t,e,r){this.comm=new K({filter:t,replacement:e,options:r});return this.execute()}},{key:"replaceOne",value:function(t,e,r){this.comm=new W({filter:t,doc:e,options:r});return this.execute()}},{key:"findOneAndDelete",value:function(t,e){this.comm=new V({filter:t,options:e});return this.execute()}},{key:"deleteOne",value:function(t,e){this.comm=new J({filter:t,options:e});return this.execute()}},{key:"deleteMany",value:function(t,e){this.validateTransactionAction(Tt.DELETE_MANY);this.comm=new $({filter:t,options:e});return this.execute()}},{key:"validate",value:function(){var t=new pt;try{t.validate(this.comm.schema,this.encoder.encode(this.comm.argMap))}catch(t){throw t}}},{key:"execute",value:function(){var t=xt(jt().mark((function t(){var e;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(n.assert)(this.comm,"[DBService]缺少 command 参数");this.validate();t.t0=this.comm.permission;t.next=t.t0===_.AGGREGATE||t.t0===_.WRITE||t.t0===_.READ?5:7;break;case 5:Object(n.assert)(this.collection,"[DBService]缺少 collection 参数");return t.abrupt("break",7);case 7:e=Object.assign({},this.coll&&this.coll.inspect(),this.transId&&{transactionId:this.transId},this.comm.inspect());return t.abrupt("return",this.encoder.encode(e));case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"validateTransactionAction",value:function(t){if(this.transId)throw new ht.TransactionError("transaction not support action ["+t+"]")}}]);return t}());function At(t){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bt(){Bt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="executing",d="completed",y={};function v(){}function m(){}function g(){}var b={};s(b,a,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,a)&&(b=j);var _=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==At(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?d:"suspendedYield",s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=d,n.method="throw",n.arg=s.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function L(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(At(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},x(O.prototype),s(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(_),s(_,u,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=L,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function It(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){r(t);return}c.done?e(u):Promise.resolve(u).then(n,o)}function Rt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){It(i,n,o,a,c,"next",t)}function c(t){It(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Dt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,Ct(n.key),n)}}function Nt(t,e,r){(e=Ct(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r;return t}function Ct(t){var e=function(t,e){if("object"!=At(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=At(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==At(e)?e:String(e)}var qt=function(t){t.INIT="init";t.COMMIT="commit";t.ROLLBACK="rollback";return t}({}),Mt=function(){function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);Nt(this,"id",void 0);Nt(this,"status",void 0);Nt(this,"httpTransport",void 0);Nt(this,"httpRequestEncoder",void 0);Nt(this,"queryService",void 0);this.status=qt.INIT;this.httpTransport=e;this.httpRequestEncoder=r;this.queryService=new Lt;this.queryService.getEncoder=function(){return n.httpRequestEncoder};this.queryService.getTransport=function(){return n.httpTransport}}!function(t,e,r){e&&Dt(t.prototype,e);Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"init",value:function(){var t=Rt(Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=2;return this.queryService.transaction();case 2:this.id=t.sent;case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"collection",value:function(t){this.queryService&&this.queryService.collection(t);return this.queryService}},{key:"commit",value:function(){var t=Rt(Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.checkStatus();this.status=qt.COMMIT;return t.abrupt("return",this.queryService.commit());case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"rollback",value:function(){var t=Rt(Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.checkStatus();this.status=qt.ROLLBACK;return t.abrupt("return",this.queryService.rollback());case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"checkStatus",value:function(){if(this.status===qt.COMMIT||this.status===qt.ROLLBACK)throw new ht.TransactionError("transaction already "+this.status)}}]);return t}();function zt(t){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ft(){Ft=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new T(n||[]);return o(a,"_invoke",{value:E(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="executing",d="completed",y={};function v(){}function m(){}function g(){}var b={};s(b,a,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(L([])));j&&j!==r&&n.call(j,a)&&(b=j);var _=g.prototype=v.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==zt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(e,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?d:"suspendedYield",s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=d,n.method="throw",n.arg=s.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function L(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(zt(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},x(O.prototype),s(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new O(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(_),s(_,u,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=L,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function Ht(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){r(t);return}c.done?e(u):Promise.resolve(u).then(n,o)}function Gt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,Yt(n.key),n)}}function Yt(t){var e=function(t,e){if("object"!=zt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==zt(e)?e:String(e)}function Kt(t,e,r){return e=Wt(e),function(t,e){if(e&&("object"===zt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return!!t}()?Reflect.construct(e,r||[],Wt(t).constructor):e.apply(t,r))}function Wt(t){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vt(t,e){return(Vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t})(t,e)}var Jt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&Vt(t,e)}(e,t);function e(){Gt(this,e);return Kt(this,e,arguments)}!function(t,e,r){e&&Ut(t.prototype,e);Object.defineProperty(t,"prototype",{writable:!1})}(e,[{key:"collection",value:function(t){var e=this,r=(new Lt).collection(t);r.getEncoder=function(){return e.getEncoder()};r.getTransport=function(){return e.transport};return r}},{key:"startTransaction",value:function(){var t=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ht(i,n,o,a,c,"next",t)}function c(t){Ht(i,n,o,a,c,"throw",t)}a(void 0)}))}}(Ft().mark((function t(){var e;return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=new Mt(this.transport,this.getEncoder());t.next=3;return e.init();case 3:return t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]);return e}(n.BaseService)},"@alicloud/mpserverless-core":function(e,r){e.exports=t}})}(r("./node_modules/@alicloud/mpserverless-core/dist/index.js"))},"./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-file-service/dist/index.js":function(t,e,r){t.exports=function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};t[n].call(o.exports,o,o.exports,r);o.l=!0;return o.exports}r.m=t;r.c=e;r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})};r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});Object.defineProperty(t,"__esModule",{value:!0})};r.t=function(t,e){1&e&&(t=r(t));if(8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:t});if(2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n};r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};r.d(e,"a",e);return e};r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};r.p="";return r(r.s="./src/index.ts")}({"../../node_modules/crypto-js/aes.js":function(t,e,r){t.exports=function(t){!function(){var e=t,r=e.lib.BlockCipher,n=e.algo,o=[],i=[],a=[],c=[],u=[],s=[],l=[],f=[],p=[],h=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var r=0,n=0;for(e=0;e<256;e++){var d=n^n<<1^n<<2^n<<3^n<<4;d=d>>>8^255&d^99;o[r]=d;i[d]=r;var y=t[r],v=t[y],m=t[v],g=257*t[d]^16843008*d;a[r]=g<<24|g>>>8;c[r]=g<<16|g>>>16;u[r]=g<<8|g>>>24;s[r]=g;g=16843009*m^65537*v^257*y^16843008*r;l[d]=g<<24|g>>>8;f[d]=g<<16|g>>>16;p[d]=g<<8|g>>>24;h[d]=g;if(r){r=y^t[t[t[m^y]]];n^=t[t[n]]}else r=n=1}}();var d=[0,1,2,4,8,16,32,64,128,27,54],y=n.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,r=t.sigBytes/4,n=4*((this._nRounds=r+6)+1),i=this._keySchedule=[],a=0;a<n;a++)if(a<r)i[a]=e[a];else{var c=i[a-1];if(a%r)r>6&&a%r==4&&(c=o[c>>>24]<<24|o[c>>>16&255]<<16|o[c>>>8&255]<<8|o[255&c]);else{c=o[(c=c<<8|c>>>24)>>>24]<<24|o[c>>>16&255]<<16|o[c>>>8&255]<<8|o[255&c];c^=d[a/r|0]<<24}i[a]=i[a-r]^c}for(var u=this._invKeySchedule=[],s=0;s<n;s++){a=n-s;c=s%4?i[a]:i[a-4];u[s]=s<4||a<=4?c:l[o[c>>>24]]^f[o[c>>>16&255]]^p[o[c>>>8&255]]^h[o[255&c]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,a,c,u,s,o)},decryptBlock:function(t,e){var r=t[e+1];t[e+1]=t[e+3];t[e+3]=r;this._doCryptBlock(t,e,this._invKeySchedule,l,f,p,h,i);r=t[e+1];t[e+1]=t[e+3];t[e+3]=r},_doCryptBlock:function(t,e,r,n,o,i,a,c){for(var u=this._nRounds,s=t[e]^r[0],l=t[e+1]^r[1],f=t[e+2]^r[2],p=t[e+3]^r[3],h=4,d=1;d<u;d++){var y=n[s>>>24]^o[l>>>16&255]^i[f>>>8&255]^a[255&p]^r[h++],v=n[l>>>24]^o[f>>>16&255]^i[p>>>8&255]^a[255&s]^r[h++],m=n[f>>>24]^o[p>>>16&255]^i[s>>>8&255]^a[255&l]^r[h++],g=n[p>>>24]^o[s>>>16&255]^i[l>>>8&255]^a[255&f]^r[h++];s=y;l=v;f=m;p=g}y=(c[s>>>24]<<24|c[l>>>16&255]<<16|c[f>>>8&255]<<8|c[255&p])^r[h++],v=(c[l>>>24]<<24|c[f>>>16&255]<<16|c[p>>>8&255]<<8|c[255&s])^r[h++],m=(c[f>>>24]<<24|c[p>>>16&255]<<16|c[s>>>8&255]<<8|c[255&l])^r[h++],g=(c[p>>>24]<<24|c[s>>>16&255]<<16|c[l>>>8&255]<<8|c[255&f])^r[h++];t[e]=y;t[e+1]=v;t[e+2]=m;t[e+3]=g},keySize:8});e.AES=r._createHelper(y)}();return t.AES}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/enc-base64.js"),r("../../node_modules/crypto-js/md5.js"),r("../../node_modules/crypto-js/evpkdf.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/cipher-core.js":function(t,e,r){t.exports=function(t){t.lib.Cipher||function(e){var r=t,n=r.lib,o=n.Base,i=n.WordArray,a=n.BufferedBlockAlgorithm,c=r.enc,u=(c.Utf8,c.Base64),s=r.algo.EvpKDF,l=n.Cipher=a.extend({cfg:o.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,r){this.cfg=this.cfg.extend(r);this._xformMode=t;this._key=e;this.reset()},reset:function(){a.reset.call(this);this._doReset()},process:function(t){this._append(t);return this._process()},finalize:function(t){t&&this._append(t);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?b:m}return function(e){return{encrypt:function(r,n,o){return t(n).encrypt(e,r,n,o)},decrypt:function(r,n,o){return t(n).decrypt(e,r,n,o)}}}}()}),f=(n.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),r.mode={}),p=n.BlockCipherMode=o.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t;this._iv=e}}),h=f.CBC=function(){var t=p.extend();t.Encryptor=t.extend({processBlock:function(t,r){var n=this._cipher,o=n.blockSize;e.call(this,t,r,o);n.encryptBlock(t,r);this._prevBlock=t.slice(r,r+o)}});t.Decryptor=t.extend({processBlock:function(t,r){var n=this._cipher,o=n.blockSize,i=t.slice(r,r+o);n.decryptBlock(t,r);e.call(this,t,r,o);this._prevBlock=i}});function e(t,e,r){var n=this._iv;if(n){var o=n;this._iv=void 0}else o=this._prevBlock;for(var i=0;i<r;i++)t[e+i]^=o[i]}return t}(),d=(r.pad={}).Pkcs7={pad:function(t,e){for(var r=4*e,n=r-t.sigBytes%r,o=n<<24|n<<16|n<<8|n,a=[],c=0;c<n;c+=4)a.push(o);var u=i.create(a,n);t.concat(u)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},y=(n.BlockCipher=l.extend({cfg:l.cfg.extend({mode:h,padding:d}),reset:function(){l.reset.call(this);var t=this.cfg,e=t.iv,r=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=r.createEncryptor;else{n=r.createDecryptor;this._minBufferSize=1}if(this._mode&&this._mode.__creator==n)this._mode.init(this,e&&e.words);else{this._mode=n.call(r,this,e&&e.words);this._mode.__creator=n}},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else{e=this._process(!0);t.unpad(e)}return e},blockSize:4}),n.CipherParams=o.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),v=(r.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,r=t.salt;if(r)var n=i.create([1398893684,1701076831]).concat(r).concat(e);else n=e;return n.toString(u)},parse:function(t){var e=u.parse(t),r=e.words;if(1398893684==r[0]&&1701076831==r[1]){var n=i.create(r.slice(2,4));r.splice(0,4);e.sigBytes-=16}return y.create({ciphertext:e,salt:n})}},m=n.SerializableCipher=o.extend({cfg:o.extend({format:v}),encrypt:function(t,e,r,n){n=this.cfg.extend(n);var o=t.createEncryptor(r,n),i=o.finalize(e),a=o.cfg;return y.create({ciphertext:i,key:r,iv:a.iv,algorithm:t,mode:a.mode,padding:a.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,r,n){n=this.cfg.extend(n);e=this._parse(e,n.format);return t.createDecryptor(r,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),g=(r.kdf={}).OpenSSL={execute:function(t,e,r,n){n||(n=i.random(8));var o=s.create({keySize:e+r}).compute(t,n),a=i.create(o.words.slice(e),4*r);o.sigBytes=4*e;return y.create({key:o,iv:a,salt:n})}},b=n.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:g}),encrypt:function(t,e,r,n){var o=(n=this.cfg.extend(n)).kdf.execute(r,t.keySize,t.ivSize);n.iv=o.iv;var i=m.encrypt.call(this,t,e,o.key,n);i.mixIn(o);return i},decrypt:function(t,e,r,n){n=this.cfg.extend(n);e=this._parse(e,n.format);var o=n.kdf.execute(r,t.keySize,t.ivSize,e.salt);n.iv=o.iv;return m.decrypt.call(this,t,e,o.key,n)}})}()}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/evpkdf.js"))},"../../node_modules/crypto-js/core.js":function(t,e,r){t.exports=function(){var t=t||function(t,e){var r=Object.create||function(){function t(){}return function(e){var r;t.prototype=e;r=new t;t.prototype=null;return r}}(),n={},o=n.lib={},i=o.Base={extend:function(t){var e=r(this);t&&e.mixIn(t);e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)});e.init.prototype=e;e.$super=this;return e},create:function(){var t=this.extend();t.init.apply(t,arguments);return t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=o.WordArray=i.extend({init:function(t,e){t=this.words=t||[];this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes,o=t.sigBytes;this.clamp();if(n%4)for(var i=0;i<o;i++){var a=r[i>>>2]>>>24-i%4*8&255;e[n+i>>>2]|=a<<24-(n+i)%4*8}else for(i=0;i<o;i+=4)e[n+i>>>2]=r[i>>>2];this.sigBytes+=o;return this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-r%4*8;e.length=t.ceil(r/4)},clone:function(){var t=i.clone.call(this);t.words=this.words.slice(0);return t},random:function(e){for(var r,n=[],o=function(e){e=e;var r=987654321,n=4294967295;return function(){var o=((r=36969*(65535&r)+(r>>16)&n)<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n;o/=4294967296;return(o+=.5)*(t.random()>.5?1:-1)}},i=0;i<e;i+=4){var c=o(4294967296*(r||t.random()));r=987654071*c();n.push(4294967296*c()|0)}return new a.init(n,e)}}),c=n.enc={},u=c.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],o=0;o<r;o++){var i=e[o>>>2]>>>24-o%4*8&255;n.push((i>>>4).toString(16));n.push((15&i).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new a.init(r,e/2)}},s=c.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],o=0;o<r;o++){var i=e[o>>>2]>>>24-o%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new a.init(r,e)}},l=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(s.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return s.parse(unescape(encodeURIComponent(t)))}},f=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init;this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t));this._data.concat(t);this._nDataBytes+=t.sigBytes},_process:function(e){var r=this._data,n=r.words,o=r.sigBytes,i=this.blockSize,c=o/(4*i),u=(c=e?t.ceil(c):t.max((0|c)-this._minBufferSize,0))*i,s=t.min(4*u,o);if(u){for(var l=0;l<u;l+=i)this._doProcessBlock(n,l);var f=n.splice(0,u);r.sigBytes-=s}return new a.init(f,s)},clone:function(){var t=i.clone.call(this);t._data=this._data.clone();return t},_minBufferSize:0}),p=(o.Hasher=f.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t);this.reset()},reset:function(){f.reset.call(this);this._doReset()},update:function(t){this._append(t);this._process();return this},finalize:function(t){t&&this._append(t);return this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new p.HMAC.init(t,r).finalize(e)}}}),n.algo={});return n}(Math);return t}()},"../../node_modules/crypto-js/enc-base64.js":function(t,e,r){t.exports=function(t){!function(){var e=t,r=e.lib.WordArray;e.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp();for(var o=[],i=0;i<r;i+=3)for(var a=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,c=0;c<4&&i+.75*c<r;c++)o.push(n.charAt(a>>>6*(3-c)&63));var u=n.charAt(64);if(u)for(;o.length%4;)o.push(u);return o.join("")},parse:function(t){var e=t.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<n.length;i++)o[n.charCodeAt(i)]=i}var a=n.charAt(64);if(a){var c=t.indexOf(a);-1!==c&&(e=c)}return function(t,e,n){for(var o=[],i=0,a=0;a<e;a++)if(a%4){var c=n[t.charCodeAt(a-1)]<<a%4*2,u=n[t.charCodeAt(a)]>>>6-a%4*2;o[i>>>2]|=(c|u)<<24-i%4*8;i++}return r.create(o,i)}(t,e,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}();return t.enc.Base64}(r("../../node_modules/crypto-js/core.js"))},"../../node_modules/crypto-js/enc-utf16.js":function(t,e,r){t.exports=function(t){!function(){var e=t,r=e.lib.WordArray,n=e.enc;n.Utf16=n.Utf16BE={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],o=0;o<r;o+=2){var i=e[o>>>2]>>>16-o%4*8&65535;n.push(String.fromCharCode(i))}return n.join("")},parse:function(t){for(var e=t.length,n=[],o=0;o<e;o++)n[o>>>1]|=t.charCodeAt(o)<<16-o%2*16;return r.create(n,2*e)}};n.Utf16LE={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i+=2){var a=o(e[i>>>2]>>>16-i%4*8&65535);n.push(String.fromCharCode(a))}return n.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>1]|=o(t.charCodeAt(i)<<16-i%2*16);return r.create(n,2*e)}};function o(t){return t<<8&4278255360|t>>>8&16711935}}();return t.enc.Utf16}(r("../../node_modules/crypto-js/core.js"))},"../../node_modules/crypto-js/evpkdf.js":function(t,e,r){t.exports=function(t){!function(){var e=t,r=e.lib,n=r.Base,o=r.WordArray,i=e.algo,a=i.MD5,c=i.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r=this.cfg,n=r.hasher.create(),i=o.create(),a=i.words,c=r.keySize,u=r.iterations;a.length<c;){s&&n.update(s);var s=n.update(t).finalize(e);n.reset();for(var l=1;l<u;l++){s=n.finalize(s);n.reset()}i.concat(s)}i.sigBytes=4*c;return i}});e.EvpKDF=function(t,e,r){return c.create(r).compute(t,e)}}();return t.EvpKDF}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/sha1.js"),r("../../node_modules/crypto-js/hmac.js"))},"../../node_modules/crypto-js/format-hex.js":function(t,e,r){t.exports=function(t){!function(e){var r=t,n=r.lib.CipherParams,o=r.enc.Hex;r.format.Hex={stringify:function(t){return t.ciphertext.toString(o)},parse:function(t){var e=o.parse(t);return n.create({ciphertext:e})}}}();return t.format.Hex}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/hmac.js":function(t,e,r){t.exports=function(t){!function(){var e=t,r=e.lib.Base,n=e.enc.Utf8;e.algo.HMAC=r.extend({init:function(t,e){t=this._hasher=new t.init;"string"==typeof e&&(e=n.parse(e));var r=t.blockSize,o=4*r;e.sigBytes>o&&(e=t.finalize(e));e.clamp();for(var i=this._oKey=e.clone(),a=this._iKey=e.clone(),c=i.words,u=a.words,s=0;s<r;s++){c[s]^=1549556828;u[s]^=909522486}i.sigBytes=a.sigBytes=o;this.reset()},reset:function(){var t=this._hasher;t.reset();t.update(this._iKey)},update:function(t){this._hasher.update(t);return this},finalize:function(t){var e=this._hasher,r=e.finalize(t);e.reset();return e.finalize(this._oKey.clone().concat(r))}})}()}(r("../../node_modules/crypto-js/core.js"))},"../../node_modules/crypto-js/index.js":function(t,e,r){t.exports=function(t){return t}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/x64-core.js"),r("../../node_modules/crypto-js/lib-typedarrays.js"),r("../../node_modules/crypto-js/enc-utf16.js"),r("../../node_modules/crypto-js/enc-base64.js"),r("../../node_modules/crypto-js/md5.js"),r("../../node_modules/crypto-js/sha1.js"),r("../../node_modules/crypto-js/sha256.js"),r("../../node_modules/crypto-js/sha224.js"),r("../../node_modules/crypto-js/sha512.js"),r("../../node_modules/crypto-js/sha384.js"),r("../../node_modules/crypto-js/sha3.js"),r("../../node_modules/crypto-js/ripemd160.js"),r("../../node_modules/crypto-js/hmac.js"),r("../../node_modules/crypto-js/pbkdf2.js"),r("../../node_modules/crypto-js/evpkdf.js"),r("../../node_modules/crypto-js/cipher-core.js"),r("../../node_modules/crypto-js/mode-cfb.js"),r("../../node_modules/crypto-js/mode-ctr.js"),r("../../node_modules/crypto-js/mode-ctr-gladman.js"),r("../../node_modules/crypto-js/mode-ofb.js"),r("../../node_modules/crypto-js/mode-ecb.js"),r("../../node_modules/crypto-js/pad-ansix923.js"),r("../../node_modules/crypto-js/pad-iso10126.js"),r("../../node_modules/crypto-js/pad-iso97971.js"),r("../../node_modules/crypto-js/pad-zeropadding.js"),r("../../node_modules/crypto-js/pad-nopadding.js"),r("../../node_modules/crypto-js/format-hex.js"),r("../../node_modules/crypto-js/aes.js"),r("../../node_modules/crypto-js/tripledes.js"),r("../../node_modules/crypto-js/rc4.js"),r("../../node_modules/crypto-js/rabbit.js"),r("../../node_modules/crypto-js/rabbit-legacy.js"))},"../../node_modules/crypto-js/lib-typedarrays.js":function(t,e,r){t.exports=function(t){!function(){if("function"==typeof ArrayBuffer){var e=t.lib.WordArray,r=e.init;(e.init=function(t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength));if(t instanceof Uint8Array){for(var e=t.byteLength,n=[],o=0;o<e;o++)n[o>>>2]|=t[o]<<24-o%4*8;r.call(this,n,e)}else r.apply(this,arguments)}).prototype=e}}();return t.lib.WordArray}(r("../../node_modules/crypto-js/core.js"))},"../../node_modules/crypto-js/md5.js":function(t,e,r){t.exports=function(t){!function(e){var r=t,n=r.lib,o=n.WordArray,i=n.Hasher,a=r.algo,c=[];!function(){for(var t=0;t<64;t++)c[t]=4294967296*e.abs(e.sin(t+1))|0}();var u=a.MD5=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var n=e+r,o=t[n];t[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i=this._hash.words,a=t[e+0],u=t[e+1],h=t[e+2],d=t[e+3],y=t[e+4],v=t[e+5],m=t[e+6],g=t[e+7],b=t[e+8],w=t[e+9],j=t[e+10],_=t[e+11],x=t[e+12],O=t[e+13],E=t[e+14],S=t[e+15],P=i[0],k=i[1],T=i[2],L=i[3];P=s(P,k,T,L,a,7,c[0]);L=s(L,P,k,T,u,12,c[1]);T=s(T,L,P,k,h,17,c[2]);k=s(k,T,L,P,d,22,c[3]);P=s(P,k,T,L,y,7,c[4]);L=s(L,P,k,T,v,12,c[5]);T=s(T,L,P,k,m,17,c[6]);k=s(k,T,L,P,g,22,c[7]);P=s(P,k,T,L,b,7,c[8]);L=s(L,P,k,T,w,12,c[9]);T=s(T,L,P,k,j,17,c[10]);k=s(k,T,L,P,_,22,c[11]);P=s(P,k,T,L,x,7,c[12]);L=s(L,P,k,T,O,12,c[13]);T=s(T,L,P,k,E,17,c[14]);P=l(P,k=s(k,T,L,P,S,22,c[15]),T,L,u,5,c[16]);L=l(L,P,k,T,m,9,c[17]);T=l(T,L,P,k,_,14,c[18]);k=l(k,T,L,P,a,20,c[19]);P=l(P,k,T,L,v,5,c[20]);L=l(L,P,k,T,j,9,c[21]);T=l(T,L,P,k,S,14,c[22]);k=l(k,T,L,P,y,20,c[23]);P=l(P,k,T,L,w,5,c[24]);L=l(L,P,k,T,E,9,c[25]);T=l(T,L,P,k,d,14,c[26]);k=l(k,T,L,P,b,20,c[27]);P=l(P,k,T,L,O,5,c[28]);L=l(L,P,k,T,h,9,c[29]);T=l(T,L,P,k,g,14,c[30]);P=f(P,k=l(k,T,L,P,x,20,c[31]),T,L,v,4,c[32]);L=f(L,P,k,T,b,11,c[33]);T=f(T,L,P,k,_,16,c[34]);k=f(k,T,L,P,E,23,c[35]);P=f(P,k,T,L,u,4,c[36]);L=f(L,P,k,T,y,11,c[37]);T=f(T,L,P,k,g,16,c[38]);k=f(k,T,L,P,j,23,c[39]);P=f(P,k,T,L,O,4,c[40]);L=f(L,P,k,T,a,11,c[41]);T=f(T,L,P,k,d,16,c[42]);k=f(k,T,L,P,m,23,c[43]);P=f(P,k,T,L,w,4,c[44]);L=f(L,P,k,T,x,11,c[45]);T=f(T,L,P,k,S,16,c[46]);P=p(P,k=f(k,T,L,P,h,23,c[47]),T,L,a,6,c[48]);L=p(L,P,k,T,g,10,c[49]);T=p(T,L,P,k,E,15,c[50]);k=p(k,T,L,P,v,21,c[51]);P=p(P,k,T,L,x,6,c[52]);L=p(L,P,k,T,d,10,c[53]);T=p(T,L,P,k,j,15,c[54]);k=p(k,T,L,P,u,21,c[55]);P=p(P,k,T,L,b,6,c[56]);L=p(L,P,k,T,S,10,c[57]);T=p(T,L,P,k,m,15,c[58]);k=p(k,T,L,P,O,21,c[59]);P=p(P,k,T,L,y,6,c[60]);L=p(L,P,k,T,_,10,c[61]);T=p(T,L,P,k,h,15,c[62]);k=p(k,T,L,P,w,21,c[63]);i[0]=i[0]+P|0;i[1]=i[1]+k|0;i[2]=i[2]+T|0;i[3]=i[3]+L|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;r[o>>>5]|=128<<24-o%32;var i=e.floor(n/4294967296),a=n;r[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);r[14+(o+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);t.sigBytes=4*(r.length+1);this._process();for(var c=this._hash,u=c.words,s=0;s<4;s++){var l=u[s];u[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return c},clone:function(){var t=i.clone.call(this);t._hash=this._hash.clone();return t}});function s(t,e,r,n,o,i,a){var c=t+(e&r|~e&n)+o+a;return(c<<i|c>>>32-i)+e}function l(t,e,r,n,o,i,a){var c=t+(e&n|r&~n)+o+a;return(c<<i|c>>>32-i)+e}function f(t,e,r,n,o,i,a){var c=t+(e^r^n)+o+a;return(c<<i|c>>>32-i)+e}function p(t,e,r,n,o,i,a){var c=t+(r^(e|~n))+o+a;return(c<<i|c>>>32-i)+e}r.MD5=i._createHelper(u);r.HmacMD5=i._createHmacHelper(u)}(Math);return t.MD5}(r("../../node_modules/crypto-js/core.js"))},"../../node_modules/crypto-js/mode-cfb.js":function(t,e,r){t.exports=function(t){t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,o=n.blockSize;r.call(this,t,e,o,n);this._prevBlock=t.slice(e,e+o)}});e.Decryptor=e.extend({processBlock:function(t,e){var n=this._cipher,o=n.blockSize,i=t.slice(e,e+o);r.call(this,t,e,o,n);this._prevBlock=i}});function r(t,e,r,n){var o=this._iv;if(o){var i=o.slice(0);this._iv=void 0}else i=this._prevBlock;n.encryptBlock(i,0);for(var a=0;a<r;a++)t[e+a]^=i[a]}return e}();return t.mode.CFB}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/mode-ctr-gladman.js":function(t,e,r){t.exports=function(t){t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function r(t){if(255==(t>>24&255)){var e=t>>16&255,r=t>>8&255,n=255&t;if(255===e){e=0;if(255===r){r=0;255===n?n=0:++n}else++r}else++e;t=0;t+=e<<16;t+=r<<8;t+=n}else t+=1<<24;return t}var n=e.Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,o=n.blockSize,i=this._iv,a=this._counter;if(i){a=this._counter=i.slice(0);this._iv=void 0}!function(t){0===(t[0]=r(t[0]))&&(t[1]=r(t[1]))}(a);var c=a.slice(0);n.encryptBlock(c,0);for(var u=0;u<o;u++)t[e+u]^=c[u]}});e.Decryptor=n;return e}();return t.mode.CTRGladman}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/mode-ctr.js":function(t,e,r){t.exports=function(t){t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize,o=this._iv,i=this._counter;if(o){i=this._counter=o.slice(0);this._iv=void 0}var a=i.slice(0);r.encryptBlock(a,0);i[n-1]=i[n-1]+1|0;for(var c=0;c<n;c++)t[e+c]^=a[c]}});e.Decryptor=r;return e}();return t.mode.CTR}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/mode-ecb.js":function(t,e,r){t.exports=function(t){t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}});e.Decryptor=e.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}});return e}();return t.mode.ECB}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/mode-ofb.js":function(t,e,r){t.exports=function(t){t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize,o=this._iv,i=this._keystream;if(o){i=this._keystream=o.slice(0);this._iv=void 0}r.encryptBlock(i,0);for(var a=0;a<n;a++)t[e+a]^=i[a]}});e.Decryptor=r;return e}();return t.mode.OFB}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/pad-ansix923.js":function(t,e,r){t.exports=function(t){t.pad.AnsiX923={pad:function(t,e){var r=t.sigBytes,n=4*e,o=n-r%n,i=r+o-1;t.clamp();t.words[i>>>2]|=o<<24-i%4*8;t.sigBytes+=o},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}};return t.pad.Ansix923}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/pad-iso10126.js":function(t,e,r){t.exports=function(t){t.pad.Iso10126={pad:function(e,r){var n=4*r,o=n-e.sigBytes%n;e.concat(t.lib.WordArray.random(o-1)).concat(t.lib.WordArray.create([o<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}};return t.pad.Iso10126}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/pad-iso97971.js":function(t,e,r){t.exports=function(t){t.pad.Iso97971={pad:function(e,r){e.concat(t.lib.WordArray.create([2147483648],1));t.pad.ZeroPadding.pad(e,r)},unpad:function(e){t.pad.ZeroPadding.unpad(e);e.sigBytes--}};return t.pad.Iso97971}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/pad-nopadding.js":function(t,e,r){t.exports=function(t){t.pad.NoPadding={pad:function(){},unpad:function(){}};return t.pad.NoPadding}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/pad-zeropadding.js":function(t,e,r){t.exports=function(t){t.pad.ZeroPadding={pad:function(t,e){var r=4*e;t.clamp();t.sigBytes+=r-(t.sigBytes%r||r)},unpad:function(t){for(var e=t.words,r=t.sigBytes-1;!(e[r>>>2]>>>24-r%4*8&255);)r--;t.sigBytes=r+1}};return t.pad.ZeroPadding}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/pbkdf2.js":function(t,e,r){t.exports=function(t){!function(){var e=t,r=e.lib,n=r.Base,o=r.WordArray,i=e.algo,a=i.SHA1,c=i.HMAC,u=i.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r=this.cfg,n=c.create(r.hasher,t),i=o.create(),a=o.create([1]),u=i.words,s=a.words,l=r.keySize,f=r.iterations;u.length<l;){var p=n.update(e).finalize(a);n.reset();for(var h=p.words,d=h.length,y=p,v=1;v<f;v++){y=n.finalize(y);n.reset();for(var m=y.words,g=0;g<d;g++)h[g]^=m[g]}i.concat(p);s[0]++}i.sigBytes=4*l;return i}});e.PBKDF2=function(t,e,r){return u.create(r).compute(t,e)}}();return t.PBKDF2}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/sha1.js"),r("../../node_modules/crypto-js/hmac.js"))},"../../node_modules/crypto-js/rabbit-legacy.js":function(t,e,r){t.exports=function(t){!function(){var e=t,r=e.lib.StreamCipher,n=e.algo,o=[],i=[],a=[],c=n.RabbitLegacy=r.extend({_doReset:function(){var t=this._key.words,e=this.cfg.iv,r=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],n=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var o=0;o<4;o++)u.call(this);for(o=0;o<8;o++)n[o]^=r[o+4&7];if(e){var i=e.words,a=i[0],c=i[1],s=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),f=s>>>16|4294901760&l,p=l<<16|65535&s;n[0]^=s;n[1]^=f;n[2]^=l;n[3]^=p;n[4]^=s;n[5]^=f;n[6]^=l;n[7]^=p;for(o=0;o<4;o++)u.call(this)}},_doProcessBlock:function(t,e){var r=this._X;u.call(this);o[0]=r[0]^r[5]>>>16^r[3]<<16;o[1]=r[2]^r[7]>>>16^r[5]<<16;o[2]=r[4]^r[1]>>>16^r[7]<<16;o[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++){o[n]=16711935&(o[n]<<8|o[n]>>>24)|4278255360&(o[n]<<24|o[n]>>>8);t[e+n]^=o[n]}},blockSize:4,ivSize:2});function u(){for(var t=this._X,e=this._C,r=0;r<8;r++)i[r]=e[r];e[0]=e[0]+1295307597+this._b|0;e[1]=e[1]+3545052371+(e[0]>>>0<i[0]>>>0?1:0)|0;e[2]=e[2]+886263092+(e[1]>>>0<i[1]>>>0?1:0)|0;e[3]=e[3]+1295307597+(e[2]>>>0<i[2]>>>0?1:0)|0;e[4]=e[4]+3545052371+(e[3]>>>0<i[3]>>>0?1:0)|0;e[5]=e[5]+886263092+(e[4]>>>0<i[4]>>>0?1:0)|0;e[6]=e[6]+1295307597+(e[5]>>>0<i[5]>>>0?1:0)|0;e[7]=e[7]+3545052371+(e[6]>>>0<i[6]>>>0?1:0)|0;this._b=e[7]>>>0<i[7]>>>0?1:0;for(r=0;r<8;r++){var n=t[r]+e[r],o=65535&n,c=n>>>16,u=((o*o>>>17)+o*c>>>15)+c*c,s=((4294901760&n)*n|0)+((65535&n)*n|0);a[r]=u^s}t[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0;t[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0;t[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0;t[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0;t[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0;t[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0;t[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0;t[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.RabbitLegacy=r._createHelper(c)}();return t.RabbitLegacy}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/enc-base64.js"),r("../../node_modules/crypto-js/md5.js"),r("../../node_modules/crypto-js/evpkdf.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/rabbit.js":function(t,e,r){t.exports=function(t){!function(){var e=t,r=e.lib.StreamCipher,n=e.algo,o=[],i=[],a=[],c=n.Rabbit=r.extend({_doReset:function(){for(var t=this._key.words,e=this.cfg.iv,r=0;r<4;r++)t[r]=16711935&(t[r]<<8|t[r]>>>24)|4278255360&(t[r]<<24|t[r]>>>8);var n=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],o=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(r=0;r<4;r++)u.call(this);for(r=0;r<8;r++)o[r]^=n[r+4&7];if(e){var i=e.words,a=i[0],c=i[1],s=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),f=s>>>16|4294901760&l,p=l<<16|65535&s;o[0]^=s;o[1]^=f;o[2]^=l;o[3]^=p;o[4]^=s;o[5]^=f;o[6]^=l;o[7]^=p;for(r=0;r<4;r++)u.call(this)}},_doProcessBlock:function(t,e){var r=this._X;u.call(this);o[0]=r[0]^r[5]>>>16^r[3]<<16;o[1]=r[2]^r[7]>>>16^r[5]<<16;o[2]=r[4]^r[1]>>>16^r[7]<<16;o[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++){o[n]=16711935&(o[n]<<8|o[n]>>>24)|4278255360&(o[n]<<24|o[n]>>>8);t[e+n]^=o[n]}},blockSize:4,ivSize:2});function u(){for(var t=this._X,e=this._C,r=0;r<8;r++)i[r]=e[r];e[0]=e[0]+1295307597+this._b|0;e[1]=e[1]+3545052371+(e[0]>>>0<i[0]>>>0?1:0)|0;e[2]=e[2]+886263092+(e[1]>>>0<i[1]>>>0?1:0)|0;e[3]=e[3]+1295307597+(e[2]>>>0<i[2]>>>0?1:0)|0;e[4]=e[4]+3545052371+(e[3]>>>0<i[3]>>>0?1:0)|0;e[5]=e[5]+886263092+(e[4]>>>0<i[4]>>>0?1:0)|0;e[6]=e[6]+1295307597+(e[5]>>>0<i[5]>>>0?1:0)|0;e[7]=e[7]+3545052371+(e[6]>>>0<i[6]>>>0?1:0)|0;this._b=e[7]>>>0<i[7]>>>0?1:0;for(r=0;r<8;r++){var n=t[r]+e[r],o=65535&n,c=n>>>16,u=((o*o>>>17)+o*c>>>15)+c*c,s=((4294901760&n)*n|0)+((65535&n)*n|0);a[r]=u^s}t[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0;t[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0;t[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0;t[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0;t[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0;t[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0;t[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0;t[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.Rabbit=r._createHelper(c)}();return t.Rabbit}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/enc-base64.js"),r("../../node_modules/crypto-js/md5.js"),r("../../node_modules/crypto-js/evpkdf.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/rc4.js":function(t,e,r){t.exports=function(t){!function(){var e=t,r=e.lib.StreamCipher,n=e.algo,o=n.RC4=r.extend({_doReset:function(){for(var t=this._key,e=t.words,r=t.sigBytes,n=this._S=[],o=0;o<256;o++)n[o]=o;o=0;for(var i=0;o<256;o++){var a=o%r,c=e[a>>>2]>>>24-a%4*8&255;i=(i+n[o]+c)%256;var u=n[o];n[o]=n[i];n[i]=u}this._i=this._j=0},_doProcessBlock:function(t,e){t[e]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var t=this._S,e=this._i,r=this._j,n=0,o=0;o<4;o++){r=(r+t[e=(e+1)%256])%256;var i=t[e];t[e]=t[r];t[r]=i;n|=t[(t[e]+t[r])%256]<<24-8*o}this._i=e;this._j=r;return n}e.RC4=r._createHelper(o);var a=n.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)i.call(this)}});e.RC4Drop=r._createHelper(a)}();return t.RC4}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/enc-base64.js"),r("../../node_modules/crypto-js/md5.js"),r("../../node_modules/crypto-js/evpkdf.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/ripemd160.js":function(t,e,r){t.exports=function(t){!function(e){var r=t,n=r.lib,o=n.WordArray,i=n.Hasher,a=r.algo,c=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),s=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),f=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),h=a.RIPEMD160=i.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=0;r<16;r++){var n=e+r,o=t[n];t[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i,a,h,w,j,_,x,O,E,S,P,k=this._hash.words,T=f.words,L=p.words,A=c.words,B=u.words,I=s.words,R=l.words;_=i=k[0];x=a=k[1];O=h=k[2];E=w=k[3];S=j=k[4];for(r=0;r<80;r+=1){P=i+t[e+A[r]]|0;P+=r<16?d(a,h,w)+T[0]:r<32?y(a,h,w)+T[1]:r<48?v(a,h,w)+T[2]:r<64?m(a,h,w)+T[3]:g(a,h,w)+T[4];P=(P=b(P|=0,I[r]))+j|0;i=j;j=w;w=b(h,10);h=a;a=P;P=_+t[e+B[r]]|0;P+=r<16?g(x,O,E)+L[0]:r<32?m(x,O,E)+L[1]:r<48?v(x,O,E)+L[2]:r<64?y(x,O,E)+L[3]:d(x,O,E)+L[4];P=(P=b(P|=0,R[r]))+S|0;_=S;S=E;E=b(O,10);O=x;x=P}P=k[1]+h+E|0;k[1]=k[2]+w+S|0;k[2]=k[3]+j+_|0;k[3]=k[4]+i+x|0;k[4]=k[0]+a+O|0;k[0]=P},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;e[n>>>5]|=128<<24-n%32;e[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);t.sigBytes=4*(e.length+1);this._process();for(var o=this._hash,i=o.words,a=0;a<5;a++){var c=i[a];i[a]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return o},clone:function(){var t=i.clone.call(this);t._hash=this._hash.clone();return t}});function d(t,e,r){return t^e^r}function y(t,e,r){return t&e|~t&r}function v(t,e,r){return(t|~e)^r}function m(t,e,r){return t&r|e&~r}function g(t,e,r){return t^(e|~r)}function b(t,e){return t<<e|t>>>32-e}r.RIPEMD160=i._createHelper(h);r.HmacRIPEMD160=i._createHmacHelper(h)}(Math);return t.RIPEMD160}(r("../../node_modules/crypto-js/core.js"))},"../../node_modules/crypto-js/sha1.js":function(t,e,r){t.exports=function(t){!function(){var e=t,r=e.lib,n=r.WordArray,o=r.Hasher,i=e.algo,a=[],c=i.SHA1=o.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],o=r[1],i=r[2],c=r[3],u=r[4],s=0;s<80;s++){if(s<16)a[s]=0|t[e+s];else{var l=a[s-3]^a[s-8]^a[s-14]^a[s-16];a[s]=l<<1|l>>>31}var f=(n<<5|n>>>27)+u+a[s];f+=s<20?1518500249+(o&i|~o&c):s<40?1859775393+(o^i^c):s<60?(o&i|o&c|i&c)-1894007588:(o^i^c)-899497514;u=c;c=i;i=o<<30|o>>>2;o=n;n=f}r[0]=r[0]+n|0;r[1]=r[1]+o|0;r[2]=r[2]+i|0;r[3]=r[3]+c|0;r[4]=r[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;e[n>>>5]|=128<<24-n%32;e[14+(n+64>>>9<<4)]=Math.floor(r/4294967296);e[15+(n+64>>>9<<4)]=r;t.sigBytes=4*e.length;this._process();return this._hash},clone:function(){var t=o.clone.call(this);t._hash=this._hash.clone();return t}});e.SHA1=o._createHelper(c);e.HmacSHA1=o._createHmacHelper(c)}();return t.SHA1}(r("../../node_modules/crypto-js/core.js"))},"../../node_modules/crypto-js/sha224.js":function(t,e,r){t.exports=function(t){!function(){var e=t,r=e.lib.WordArray,n=e.algo,o=n.SHA256,i=n.SHA224=o.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=o._doFinalize.call(this);t.sigBytes-=4;return t}});e.SHA224=o._createHelper(i);e.HmacSHA224=o._createHmacHelper(i)}();return t.SHA224}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/sha256.js"))},"../../node_modules/crypto-js/sha256.js":function(t,e,r){t.exports=function(t){!function(e){var r=t,n=r.lib,o=n.WordArray,i=n.Hasher,a=r.algo,c=[],u=[];!function(){function t(t){for(var r=e.sqrt(t),n=2;n<=r;n++)if(!(t%n))return!1;return!0}function r(t){return 4294967296*(t-(0|t))|0}for(var n=2,o=0;o<64;){if(t(n)){o<8&&(c[o]=r(e.pow(n,.5)));u[o]=r(e.pow(n,1/3));o++}n++}}();var s=[],l=a.SHA256=i.extend({_doReset:function(){this._hash=new o.init(c.slice(0))},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],o=r[1],i=r[2],a=r[3],c=r[4],l=r[5],f=r[6],p=r[7],h=0;h<64;h++){if(h<16)s[h]=0|t[e+h];else{var d=s[h-15],y=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,v=s[h-2],m=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;s[h]=y+s[h-7]+m+s[h-16]}var g=n&o^n&i^o&i,b=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),w=p+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&l^~c&f)+u[h]+s[h];p=f;f=l;l=c;c=a+w|0;a=i;i=o;o=n;n=w+(b+g)|0}r[0]=r[0]+n|0;r[1]=r[1]+o|0;r[2]=r[2]+i|0;r[3]=r[3]+a|0;r[4]=r[4]+c|0;r[5]=r[5]+l|0;r[6]=r[6]+f|0;r[7]=r[7]+p|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;r[o>>>5]|=128<<24-o%32;r[14+(o+64>>>9<<4)]=e.floor(n/4294967296);r[15+(o+64>>>9<<4)]=n;t.sigBytes=4*r.length;this._process();return this._hash},clone:function(){var t=i.clone.call(this);t._hash=this._hash.clone();return t}});r.SHA256=i._createHelper(l);r.HmacSHA256=i._createHmacHelper(l)}(Math);return t.SHA256}(r("../../node_modules/crypto-js/core.js"))},"../../node_modules/crypto-js/sha3.js":function(t,e,r){t.exports=function(t){!function(e){var r=t,n=r.lib,o=n.WordArray,i=n.Hasher,a=r.x64.Word,c=r.algo,u=[],s=[],l=[];!function(){for(var t=1,e=0,r=0;r<24;r++){u[t+5*e]=(r+1)*(r+2)/2%64;var n=(2*t+3*e)%5;t=e%5;e=n}for(t=0;t<5;t++)for(e=0;e<5;e++)s[t+5*e]=e+(2*t+3*e)%5*5;for(var o=1,i=0;i<24;i++){for(var c=0,f=0,p=0;p<7;p++){if(1&o){var h=(1<<p)-1;h<32?f^=1<<h:c^=1<<h-32}128&o?o=o<<1^113:o<<=1}l[i]=a.create(c,f)}}();var f=[];!function(){for(var t=0;t<25;t++)f[t]=a.create()}();var p=c.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var r=this._state,n=this.blockSize/2,o=0;o<n;o++){var i=t[e+2*o],a=t[e+2*o+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);(k=r[o]).high^=a;k.low^=i}for(var c=0;c<24;c++){for(var p=0;p<5;p++){for(var h=0,d=0,y=0;y<5;y++){h^=(k=r[p+5*y]).high;d^=k.low}var v=f[p];v.high=h;v.low=d}for(p=0;p<5;p++){var m=f[(p+4)%5],g=f[(p+1)%5],b=g.high,w=g.low;for(h=m.high^(b<<1|w>>>31),d=m.low^(w<<1|b>>>31),y=0;y<5;y++){(k=r[p+5*y]).high^=h;k.low^=d}}for(var j=1;j<25;j++){var _=(k=r[j]).high,x=k.low,O=u[j];O<32?(h=_<<O|x>>>32-O,d=x<<O|_>>>32-O):(h=x<<O-32|_>>>64-O,d=_<<O-32|x>>>64-O);var E=f[s[j]];E.high=h;E.low=d}var S=f[0],P=r[0];S.high=P.high;S.low=P.low;for(p=0;p<5;p++)for(y=0;y<5;y++){var k=r[j=p+5*y],T=f[j],L=f[(p+1)%5+5*y],A=f[(p+2)%5+5*y];k.high=T.high^~L.high&A.high;k.low=T.low^~L.low&A.low}k=r[0];var B=l[c];k.high^=B.high;k.low^=B.low}},_doFinalize:function(){var t=this._data,r=t.words,n=(this._nDataBytes,8*t.sigBytes),i=32*this.blockSize;r[n>>>5]|=1<<24-n%32;r[(e.ceil((n+1)/i)*i>>>5)-1]|=128;t.sigBytes=4*r.length;this._process();for(var a=this._state,c=this.cfg.outputLength/8,u=c/8,s=[],l=0;l<u;l++){var f=a[l],p=f.high,h=f.low;p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8);h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8);s.push(h);s.push(p)}return new o.init(s,c)},clone:function(){for(var t=i.clone.call(this),e=t._state=this._state.slice(0),r=0;r<25;r++)e[r]=e[r].clone();return t}});r.SHA3=i._createHelper(p);r.HmacSHA3=i._createHmacHelper(p)}(Math);return t.SHA3}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/x64-core.js"))},"../../node_modules/crypto-js/sha384.js":function(t,e,r){t.exports=function(t){!function(){var e=t,r=e.x64,n=r.Word,o=r.WordArray,i=e.algo,a=i.SHA512,c=i.SHA384=a.extend({_doReset:function(){this._hash=new o.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var t=a._doFinalize.call(this);t.sigBytes-=16;return t}});e.SHA384=a._createHelper(c);e.HmacSHA384=a._createHmacHelper(c)}();return t.SHA384}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/x64-core.js"),r("../../node_modules/crypto-js/sha512.js"))},"../../node_modules/crypto-js/sha512.js":function(t,e,r){t.exports=function(t){!function(){var e=t,r=e.lib.Hasher,n=e.x64,o=n.Word,i=n.WordArray,a=e.algo;function c(){return o.create.apply(o,arguments)}var u=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],s=[];!function(){for(var t=0;t<80;t++)s[t]=c()}();var l=a.SHA512=r.extend({_doReset:function(){this._hash=new i.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],o=r[1],i=r[2],a=r[3],c=r[4],l=r[5],f=r[6],p=r[7],h=n.high,d=n.low,y=o.high,v=o.low,m=i.high,g=i.low,b=a.high,w=a.low,j=c.high,_=c.low,x=l.high,O=l.low,E=f.high,S=f.low,P=p.high,k=p.low,T=h,L=d,A=y,B=v,I=m,R=g,D=b,N=w,C=j,q=_,M=x,z=O,F=E,H=S,G=P,U=k,Y=0;Y<80;Y++){var K=s[Y];if(Y<16)var W=K.high=0|t[e+2*Y],V=K.low=0|t[e+2*Y+1];else{var J=s[Y-15],$=J.high,X=J.low,Z=($>>>1|X<<31)^($>>>8|X<<24)^$>>>7,Q=(X>>>1|$<<31)^(X>>>8|$<<24)^(X>>>7|$<<25),tt=s[Y-2],et=tt.high,rt=tt.low,nt=(et>>>19|rt<<13)^(et<<3|rt>>>29)^et>>>6,ot=(rt>>>19|et<<13)^(rt<<3|et>>>29)^(rt>>>6|et<<26),it=s[Y-7],at=it.high,ct=it.low,ut=s[Y-16],st=ut.high,lt=ut.low;W=(W=(W=Z+at+((V=Q+ct)>>>0<Q>>>0?1:0))+nt+((V+=ot)>>>0<ot>>>0?1:0))+st+((V+=lt)>>>0<lt>>>0?1:0);K.high=W;K.low=V}var ft,pt=C&M^~C&F,ht=q&z^~q&H,dt=T&A^T&I^A&I,yt=L&B^L&R^B&R,vt=(T>>>28|L<<4)^(T<<30|L>>>2)^(T<<25|L>>>7),mt=(L>>>28|T<<4)^(L<<30|T>>>2)^(L<<25|T>>>7),gt=(C>>>14|q<<18)^(C>>>18|q<<14)^(C<<23|q>>>9),bt=(q>>>14|C<<18)^(q>>>18|C<<14)^(q<<23|C>>>9),wt=u[Y],jt=wt.high,_t=wt.low,xt=G+gt+((ft=U+bt)>>>0<U>>>0?1:0),Ot=mt+yt;G=F;U=H;F=M;H=z;M=C;z=q;C=D+(xt=(xt=(xt=xt+pt+((ft+=ht)>>>0<ht>>>0?1:0))+jt+((ft+=_t)>>>0<_t>>>0?1:0))+W+((ft+=V)>>>0<V>>>0?1:0))+((q=N+ft|0)>>>0<N>>>0?1:0)|0;D=I;N=R;I=A;R=B;A=T;B=L;T=xt+(vt+dt+(Ot>>>0<mt>>>0?1:0))+((L=ft+Ot|0)>>>0<ft>>>0?1:0)|0}d=n.low=d+L;n.high=h+T+(d>>>0<L>>>0?1:0);v=o.low=v+B;o.high=y+A+(v>>>0<B>>>0?1:0);g=i.low=g+R;i.high=m+I+(g>>>0<R>>>0?1:0);w=a.low=w+N;a.high=b+D+(w>>>0<N>>>0?1:0);_=c.low=_+q;c.high=j+C+(_>>>0<q>>>0?1:0);O=l.low=O+z;l.high=x+M+(O>>>0<z>>>0?1:0);S=f.low=S+H;f.high=E+F+(S>>>0<H>>>0?1:0);k=p.low=k+U;p.high=P+G+(k>>>0<U>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;e[n>>>5]|=128<<24-n%32;e[30+(n+128>>>10<<5)]=Math.floor(r/4294967296);e[31+(n+128>>>10<<5)]=r;t.sigBytes=4*e.length;this._process();return this._hash.toX32()},clone:function(){var t=r.clone.call(this);t._hash=this._hash.clone();return t},blockSize:32});e.SHA512=r._createHelper(l);e.HmacSHA512=r._createHmacHelper(l)}();return t.SHA512}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/x64-core.js"))},"../../node_modules/crypto-js/tripledes.js":function(t,e,r){t.exports=function(t){!function(){var e=t,r=e.lib,n=r.WordArray,o=r.BlockCipher,i=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],s=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],f=i.DES=o.extend({_doReset:function(){for(var t=this._key.words,e=[],r=0;r<56;r++){var n=a[r]-1;e[r]=t[n>>>5]>>>31-n%32&1}for(var o=this._subKeys=[],i=0;i<16;i++){var s=o[i]=[],l=u[i];for(r=0;r<24;r++){s[r/6|0]|=e[(c[r]-1+l)%28]<<31-r%6;s[4+(r/6|0)]|=e[28+(c[r+24]-1+l)%28]<<31-r%6}s[0]=s[0]<<1|s[0]>>>31;for(r=1;r<7;r++)s[r]=s[r]>>>4*(r-1)+3;s[7]=s[7]<<5|s[7]>>>27}var f=this._invSubKeys=[];for(r=0;r<16;r++)f[r]=o[15-r]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,e,r){this._lBlock=t[e];this._rBlock=t[e+1];p.call(this,4,252645135);p.call(this,16,65535);h.call(this,2,858993459);h.call(this,8,16711935);p.call(this,1,1431655765);for(var n=0;n<16;n++){for(var o=r[n],i=this._lBlock,a=this._rBlock,c=0,u=0;u<8;u++)c|=s[u][((a^o[u])&l[u])>>>0];this._lBlock=a;this._rBlock=i^c}var f=this._lBlock;this._lBlock=this._rBlock;this._rBlock=f;p.call(this,1,1431655765);h.call(this,8,16711935);h.call(this,2,858993459);p.call(this,16,65535);p.call(this,4,252645135);t[e]=this._lBlock;t[e+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function p(t,e){var r=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=r;this._lBlock^=r<<t}function h(t,e){var r=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=r;this._rBlock^=r<<t}e.DES=o._createHelper(f);var d=i.TripleDES=o.extend({_doReset:function(){var t=this._key.words;this._des1=f.createEncryptor(n.create(t.slice(0,2)));this._des2=f.createEncryptor(n.create(t.slice(2,4)));this._des3=f.createEncryptor(n.create(t.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e);this._des2.decryptBlock(t,e);this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e);this._des2.encryptBlock(t,e);this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=o._createHelper(d)}();return t.TripleDES}(r("../../node_modules/crypto-js/core.js"),r("../../node_modules/crypto-js/enc-base64.js"),r("../../node_modules/crypto-js/md5.js"),r("../../node_modules/crypto-js/evpkdf.js"),r("../../node_modules/crypto-js/cipher-core.js"))},"../../node_modules/crypto-js/x64-core.js":function(t,e,r){t.exports=function(t){!function(e){var r=t,n=r.lib,o=n.Base,i=n.WordArray,a=r.x64={};a.Word=o.extend({init:function(t,e){this.high=t;this.low=e}}),a.WordArray=o.extend({init:function(t,e){t=this.words=t||[];this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,r=[],n=0;n<e;n++){var o=t[n];r.push(o.high);r.push(o.low)}return i.create(r,this.sigBytes)},clone:function(){for(var t=o.clone.call(this),e=t.words=this.words.slice(0),r=e.length,n=0;n<r;n++)e[n]=e[n].clone();return t}})}();return t}(r("../../node_modules/crypto-js/core.js"))},"../../node_modules/mime/Mime.js":function(t,e,r){"use strict";function n(){this._types=Object.create(null);this._extensions=Object.create(null);for(let t=0;t<arguments.length;t++)this.define(arguments[t]);this.define=this.define.bind(this);this.getType=this.getType.bind(this);this.getExtension=this.getExtension.bind(this)}n.prototype.define=function(t,e){for(let r in t){let n=t[r].map((function(t){return t.toLowerCase()}));r=r.toLowerCase();for(let t=0;t<n.length;t++){const o=n[t];if("*"!==o[0]){if(!e&&o in this._types)throw new Error('Attempt to change mapping for "'+o+'" extension from "'+this._types[o]+'" to "'+r+'". Pass `force=true` to allow this, otherwise remove "'+o+'" from the list of extensions for "'+r+'".');this._types[o]=r}}if(e||!this._extensions[r]){const t=n[0];this._extensions[r]="*"!==t[0]?t:t.substr(1)}}};n.prototype.getType=function(t){let e=(t=String(t)).replace(/^.*[/\\]/,"").toLowerCase(),r=e.replace(/^.*\./,"").toLowerCase(),n=e.length<t.length;return(r.length<e.length-1||!n)&&this._types[r]||null};n.prototype.getExtension=function(t){return(t=/^\s*([^;\s]*)/.test(t)&&RegExp.$1)&&this._extensions[t.toLowerCase()]||null};t.exports=n},"../../node_modules/mime/lite.js":function(t,e,r){"use strict";let n=r("../../node_modules/mime/Mime.js");t.exports=new n(r("../../node_modules/mime/types/standard.js"))},"../../node_modules/mime/types/standard.js":function(t,e){t.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}},"./src/index.ts":function(t,e,r){"use strict";r.r(e);r.d(e,"OSSUploadResponseFormat",(function(){return L}));r.d(e,"OSSUploadHeaderList",(function(){return A}));r.d(e,"WHITELIST_EXTENSIONS",(function(){return B}));r.d(e,"MPFileService",(function(){return R}));var n=r("@alicloud/mpserverless-core"),o=function(t){t.INVALID_FILEID="fileId type error, required string or string array";t.EMPTY_ARRAY="need at least one member in fileId array";return t}(o||{}),i={ruleOfFileId:function(t,e){if("string"!=typeof e&&!Array.isArray(e))return o.INVALID_FILEID;if(Array.isArray(e)){if(0===e.length)return o.EMPTY_ARRAY;if(!e.every((function(t){return"string"==typeof t})))return o.INVALID_FILEID}}},a={options:{type:"object",rule:{fileSize:{type:"int",required:!1,min:0},filePath:{type:"string"},env:{type:"enum",required:!1,values:["public"]},timeout:{type:"int",required:!1,min:0},headers:{type:"object",required:!1,rules:{cacheControl:{type:"string",required:!1},contentDisposition:{type:"string",required:!1},contentEncoding:{type:"string",required:!1},expires:{type:"string",required:!1}}},meta:{type:"object",required:!1},cloudPath:{type:"string",required:!1}}}},c={url:"string"},u={fileIds:{type:"fileId",required:!0},options:{type:"object",required:!1,rule:{maxAge:{type:"int",require:!1}}}};function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t})(t,e)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&f(t,e)}(e,t);function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);r=function(t,e,r){return e=l(e),function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return!!t}()?Reflect.construct(e,r||[],l(t).constructor):e.apply(t,r))}(this,e,[t]);for(var n=0,o=Object.keys(i);n<o.length;n++){var a=o[n],c=a.match(/ruleOf([a-zA-Z]+)/)[1];r.p.addRule(c[0].toLowerCase()+c.slice(1),i[a])}return r}return function(t,e,r){Object.defineProperty(t,"prototype",{writable:!1});return t}(e)}(n.Validator),h=r("../../node_modules/mime/lite.js"),d=r.n(h),y=r("../../node_modules/crypto-js/index.js"),v=r.n(y),m=Object(n.MPServerlessErrorClass)({InterfaceError:{code:"InterfaceError",message:"接口响应失败"},PlatformError:{code:"PlatformError",message:"上传 URL 不在平台白名单中"}});function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){k(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function j(){j=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new A(n||[]);return o(a,"_invoke",{value:P(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="executing",d="completed",y={};function v(){}function m(){}function b(){}var w={};s(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(B([])));x&&x!==r&&n.call(x,a)&&(w=x);var O=b.prototype=v.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==g(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?d:"suspendedYield",s.arg===y)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=d,n.method="throw",n.arg=s.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function B(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(g(e)+" is not iterable")}return m.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:m,configurable:!0}),m.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(O),s(O,u,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=B,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:B(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function _(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){r(t);return}c.done?e(u):Promise.resolve(u).then(n,o)}function x(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_(i,n,o,a,c,"next",t)}function c(t){_(i,n,o,a,c,"throw",t)}a(void 0)}))}}function O(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,T(n.key),n)}}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(t,e){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t})(t,e)}function k(t,e,r){(e=T(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r;return t}function T(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==g(e)?e:String(e)}function L(t){return{id:t.id,key:t.ossPath,host:t.host,policy:t.policy,Signature:t.signature,OSSAccessKeyId:t.accessKeyId,securityToken:t.securityToken,cdnDomain:t.cdnDomain,ossCallbackUrl:t.ossCallbackUrl}}var A=["Expires","Cache-Control","Content-Type","Content-Encoding","Content-Disposition"],B=["jpg","jpeg","png","gif","webp","bmp","wbmp","svg","image","audio","au","mp2","mp3","3gpp","mp4","mpeg","flv","avi","video","wmv","mpg","mpga","pdf","xls","xlsx","doc","docx","ppt","pptx","txt"],I=function(t){t.PUBLIC="public";t.PRIVATE="private";return t}(I||{}),R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&P(t,e)}(e,t);function e(t,r){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);k(S(o=function(t,e,r){return e=E(e),function(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return S(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return!!t}()?Reflect.construct(e,r||[],E(t).constructor):e.apply(t,r))}(this,e,[t])),"upload",void 0);Object(n.assert)(r,"[MPFileService]初始化时缺少参数");Object(n.assert)(r.uploadFile,"[MPFileService]初始化时缺少 uploadFile 参数");o.upload=r.uploadFile;return o}!function(t,e,r){e&&O(t.prototype,e);Object.defineProperty(t,"prototype",{writable:!1})}(e,[{key:"deleteFile",value:function(){var t=x(j().mark((function t(e){var r,n;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.validate(c,{url:e});(r=this.getEncoder()).setBodyField({method:"serverless.file.resource.delete",params:{id:e}});t.next=5;return this.transport.request(r);case 5:n=t.sent;return t.abrupt("return",n.body);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"uploadFile",value:function(){var t=x(j().mark((function t(e){var r,o,i,c,u,s,l,f,p,h,y,g;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.validate(a,{options:e});o=e.filePath.replace(/(.*):\/\//,"");i=o.split(".").pop();Object(n.assert)(B.indexOf(i.toLowerCase())>=0,"[MPFileService]目前不支持 ".concat(i," 类型文件"));c=Object.keys(e.meta||{}).reduce((function(t,r){t["x-oss-meta-".concat(r)]=e.meta[r];return t}),{});u=e.headers?A.reduce((function(t,r){var n=r.replace(/\-[A-Z]/g,(function(t){return t[1]})).replace(/^[A-Z]/,(function(t){return t.toLowerCase()}));e.headers.hasOwnProperty(n)&&(t[r]=e.headers[n]);return t}),{}):{};t.next=8;return this.getOSSUploadOptionsFromPath(o,e.path,e.fileSize,e.cloudPath);case 8:if(!(s=t.sent).error){t.next=11;break}throw new m.InterfaceError;case 11:l=L(s.result);f=["key","policy","Signature","OSSAccessKeyId"].reduce((function(t,e){t[e]=l[e];return t}),{});p={"X-OSS-server-side-encrpytion":"AES256"};if(e.extension){h=d.a.getType(e.extension);p["Content-Type"]=h}u["Cache-Control"]="max-age=2592000";l.securityToken&&(u["x-oss-security-token"]=l.securityToken);if(l.ossCallbackUrl){y=JSON.stringify({callbackUrl:l.ossCallbackUrl,callbackBody:JSON.stringify({fileId:l.id,spaceId:this.transport.spaceIdOption,contentType:d.a.getType(o)}),callbackBodyType:"application/json"});u.callback=v.a.enc.Utf8.parse(y).toString(v.a.enc.Base64)}t.next=20;return this.upload({url:"https://".concat(l.host),formData:Object.assign({success_action_status:200},u,c,f),name:"file",fileName:"file",filePath:e.filePath,fileType:"image",header:p});case 20:if(!(g=t.sent)||null==g||null===(r=g.body)||void 0===r||!r.errMsg){t.next=23;break}throw new m.PlatformError(g.body.errMsg);case 23:if(l.ossCallbackUrl){t.next=26;break}t.next=26;return this.reportOSSUpload(l.id,d.a.getType(e.extension));case 26:return t.abrupt("return",{fileUrl:"https://".concat(l.cdnDomain,"/").concat(l.key),filePath:l.key,fileId:l.id});case 27:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"info",value:function(){var t=x(j().mark((function t(e,r){var n,o,i;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.validate(u,{fileIds:e,options:r});n="string"==typeof e?e:e.join(",");(o=this.getEncoder()).setBodyField({method:"serverless.file.resource.info",params:w({id:n},r||{})});t.next=6;return this.transport.request(o);case 6:i=t.sent;return t.abrupt("return",i.body&&i.body.result||[]);case 8:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"getOSSUploadOptionsFromPath",value:function(){var t=x(j().mark((function t(e,r,n,o){var i,a,c;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i={env:I.PUBLIC}).filename=e.split("/").pop();i.size=n;r&&(i.targetPath=r);o&&(i.fileId=o);(a=this.getEncoder()).setBodyField({method:"serverless.file.resource.generateProximalSign",params:i});t.next=9;return this.transport.request(a);case 9:c=t.sent;return t.abrupt("return",c.body);case 11:case"end":return t.stop()}}),t,this)})));return function(e,r,n,o){return t.apply(this,arguments)}}()},{key:"reportOSSUpload",value:function(){var t=x(j().mark((function t(e,r){var n,o;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.transport.getEncoder();o={id:e};r&&(o.contentType=r);n.setBodyField({method:"serverless.file.resource.report",params:o});t.next=6;return this.transport.request(n);case 6:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"validate",value:function(t,e){var r=new p;try{r.validate(t,e)}catch(t){throw t}}}]);return e}(n.BaseService)},"@alicloud/mpserverless-core":function(e,r){e.exports=t}})}(r("./node_modules/@alicloud/mpserverless-core/dist/index.js"))},"./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-function-service/dist/index.js":function(t,e,r){t.exports=function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};t[n].call(o.exports,o,o.exports,r);o.l=!0;return o.exports}r.m=t;r.c=e;r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})};r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});Object.defineProperty(t,"__esModule",{value:!0})};r.t=function(t,e){1&e&&(t=r(t));if(8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:t});if(2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n};r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};r.d(e,"a",e);return e};r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};r.p="";return r(r.s="./src/index.ts")}({"./src/index.ts":function(t,e,r){"use strict";r.r(e);r.d(e,"FunctionService",(function(){return m}));var n=r("@alicloud/mpserverless-core"),o={functionTarget:{type:"string",allowEmpty:!1}};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(){a=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new A(n||[]);return o(a,"_invoke",{value:P(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var d="suspendedStart",y="executing",v="completed",m={};function g(){}function b(){}function w(){}var j={};f(j,u,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(B([])));x&&x!==r&&n.call(x,u)&&(j=x);var O=w.prototype=g.prototype=Object.create(j);function E(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,a,c,u){var s=h(t[o],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==i(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return r("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function P(e,r,n){var o=d;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=h(e,r,n);if("normal"===s.type){if(o=n.done?v:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function B(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(i(e)+" is not iterable")}return b.prototype=w,o(O,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=f(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,f(t,l,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(S.prototype),f(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(p(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(O),f(O,l,"Generator"),f(O,u,(function(){return this})),f(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=B,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:B(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){(e=h(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r;return t}function l(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){r(t);return}c.done?e(u):Promise.resolve(u).then(n,o)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,h(n.key),n)}}function h(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==i(e)?e:String(e)}function d(t,e,r){return e=y(e),function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return!!t}()?Reflect.construct(e,r||[],y(t).constructor):e.apply(t,r))}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t})(t,e)}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&v(t,e)}(e,t);function e(){f(this,e);return d(this,e,arguments)}!function(t,e,r){e&&p(t.prototype,e);Object.defineProperty(t,"prototype",{writable:!1})}(e,[{key:"invoke",value:function(){var t=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){l(i,n,o,a,c,"next",t)}function c(t){l(i,n,o,a,c,"throw",t)}a(void 0)}))}}(a().mark((function t(e){var r,i,c,s=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=s.length>1&&void 0!==s[1]?s[1]:{};this.validate(o,{functionTarget:e});if(!("number"==typeof r&&isNaN(r)||null==r)){t.next=4;break}throw new n.bizError.ValidationError;case 4:(i=this.getEncoder()).setBodyField({method:"serverless.function.runtime.invoke",params:{functionTarget:e,functionArgs:r}});t.next=8;return this.transport.request(i);case 8:c=t.sent;return t.abrupt("return",u(u({},c.body),{},{requestId:c.headers["request-id"]}));case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"validate",value:function(t,e){var r=new n.Validator;try{r.validate(t,e)}catch(t){throw t}}}]);return e}(n.BaseService)},"@alicloud/mpserverless-core":function(e,r){e.exports=t}})}(r("./node_modules/@alicloud/mpserverless-core/dist/index.js"))},"./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-proxy-service/dist/index.js":function(t,e,r){t.exports=function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};t[n].call(o.exports,o,o.exports,r);o.l=!0;return o.exports}r.m=t;r.c=e;r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})};r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});Object.defineProperty(t,"__esModule",{value:!0})};r.t=function(t,e){1&e&&(t=r(t));if(8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:t});if(2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n};r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};r.d(e,"a",e);return e};r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};r.p="";return r(r.s="./src/index.ts")}({"./src/index.ts":function(t,e,r){"use strict";r.r(e);r.d(e,"ProxyService",(function(){return p}));function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){o=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,i=Object.create(o.prototype),c=new A(n||[]);return a(i,"_invoke",{value:P(t,r,c)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var d="suspendedStart",y="executing",v="completed",m={};function g(){}function b(){}function w(){}var j={};f(j,u,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(B([])));x&&x!==r&&i.call(x,u)&&(j=x);var O=w.prototype=g.prototype=Object.create(j);function E(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,a,c,u){var s=h(t[o],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&i.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return r("throw",t,c,u)}))}u(s.arg)}var o;a(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}})}function P(e,r,n){var o=d;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=h(e,r,n);if("normal"===s.type){if(o=n.done?v:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function B(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=w,a(O,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=f(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,f(t,l,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(S.prototype),f(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(p(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(O),f(O,l,"Generator"),f(O,u,(function(){return this})),f(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=B,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:B(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function i(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){r(t);return}c.done?e(u):Promise.resolve(u).then(n,o)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,u(n.key),n)}}function u(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e);if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==n(e)?e:String(e)}function s(t,e,r){return e=l(e),function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return!!t}()?Reflect.construct(e,r||[],l(t).constructor):e.apply(t,r))}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t})(t,e)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&f(t,e)}(e,t);function e(){a(this,e);return s(this,e,arguments)}!function(t,e,r){e&&c(t.prototype,e);Object.defineProperty(t,"prototype",{writable:!1})}(e,[{key:"forward",value:function(){var t=function(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)}))}}(o().mark((function t(e,r){var n,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=this.getEncoder()).setBodyField({method:e,params:r});t.next=4;return this.transport.request(n);case 4:i=t.sent;return t.abrupt("return",i.body);case 6:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()}]);return e}(r("@alicloud/mpserverless-core").BaseService)},"@alicloud/mpserverless-core":function(e,r){e.exports=t}})}(r("./node_modules/@alicloud/mpserverless-core/dist/index.js"))},"./node_modules/@alicloud/mpserverless-miniapp-core/node_modules/@alicloud/mp-user-service/dist/index.js":function(t,e,r){t.exports=function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};t[n].call(o.exports,o,o.exports,r);o.l=!0;return o.exports}r.m=t;r.c=e;r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})};r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});Object.defineProperty(t,"__esModule",{value:!0})};r.t=function(t,e){1&e&&(t=r(t));if(8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);r.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:t});if(2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n};r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};r.d(e,"a",e);return e};r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};r.p="";return r(r.s="./src/index.ts")}({"./src/index.ts":function(t,e,r){"use strict";r.r(e);r.d(e,"AuthType",(function(){return b}));r.d(e,"UserService",(function(){return w}));var n=r("@alicloud/mpserverless-core"),o={options:{type:"object",rule:{authType:{type:"enum",required:!1,values:["anonymous",""]},authProvider:{type:"enum",required:!1,values:["alipay_openapi","wechat_openapi","dingtalk_openapi"]}}}},i={options:{type:"object",required:!1,rule:{authProvider:{type:"enum",required:!1,values:["alipay_openapi","wechat_openapi","dingtalk_openapi"]}}}},a=Object(n.MPServerlessErrorClass)({UnauthorizedError:{code:"UnauthorizedError",message:"未授权错误"}});function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(){l=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new A(n||[]);return o(a,"_invoke",{value:P(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var d="suspendedStart",y="executing",v="completed",m={};function g(){}function b(){}function w(){}var j={};f(j,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(B([])));x&&x!==r&&n.call(x,a)&&(j=x);var O=w.prototype=g.prototype=Object.create(j);function E(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,u){var s=h(t[o],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==c(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=d;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=h(e,r,n);if("normal"===s.type){if(o=n.done?v:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function B(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(c(e)+" is not iterable")}return b.prototype=w,o(O,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=f(w,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,f(t,s,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(S.prototype),f(S.prototype,u,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(p(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(O),f(O,s,"Generator"),f(O,a,(function(){return this})),f(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=B,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:B(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function f(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){r(t);return}c.done?e(u):Promise.resolve(u).then(n,o)}function p(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){f(i,n,o,a,c,"next",t)}function c(t){f(i,n,o,a,c,"throw",t)}a(void 0)}))}}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,g(n.key),n)}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t})(t,e)}function m(t,e,r){(e=g(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r;return t}function g(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==c(e)?e:String(e)}var b=function(t){t.ANONYMOUS="anonymous";t.DEFAULT="";return t}({}),w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&v(t,e)}(e,t);function e(t,r){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);m(y(o=function(t,e,r){return e=d(e),function(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return!!t}()?Reflect.construct(e,r||[],d(t).constructor):e.apply(t,r))}(this,e,[t])),"pendingRequest",void 0);m(y(o),"scope","auth_base");m(y(o),"appId",void 0);m(y(o),"appSecret",void 0);m(y(o),"isvAppId",void 0);m(y(o),"ua",void 0);m(y(o),"authorizeOptions",void 0);m(y(o),"accessToken",void 0);m(y(o),"getAuthCode",void 0);m(y(o),"httpRequest",void 0);m(y(o),"currentAuthType",void 0);Object(n.assert)(r.getAuthCode,"[UserService]初始化时缺少 getAuthCode 参数");Object(n.assert)(r.request,"[UserService]初始化时缺少 request 参数");Object(n.assert)(r.appId,"[UserService]初始化时缺少 appId 参数");Object(n.assert)(r.appSecret,"[UserService]初始化时缺少 appSecret 参数");o.getAuthCode=r.getAuthCode;o.httpRequest=r.request;o.appId=r.appId;o.appSecret=r.appSecret;o.isvAppId=r.isvAppId;o.ua=r.ua;return o}!function(t,e,r){e&&h(t.prototype,e);Object.defineProperty(t,"prototype",{writable:!1})}(e,[{key:"authorize",value:function(){var t=p(l().mark((function t(){var e,r=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=r.length>0&&void 0!==r[0]?r[0]:{authType:b.DEFAULT,authProvider:"alipay_openapi"};this.validate(o,{options:e});if(e.authType!==b.ANONYMOUS){t.next=10;break}t.next=5;return this.anonymousAuthorizeHandler(e);case 5:if(!this.accessToken){t.next=7;break}return t.abrupt("return",{success:!0});case 7:return t.abrupt("return",{success:!1});case 10:if(this.accessToken&&(!this.accessToken||this.currentAuthType===e.authType)){t.next=16;break}t.next=13;return this.authorizeHandler(e);case 13:if(!this.accessToken){t.next=15;break}return t.abrupt("return",{success:!0});case 15:return t.abrupt("return",{success:!1});case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getInfo",value:function(){var t=p(l().mark((function t(e){var r,n,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.validate(i,{options:e});r=this.getEncoder();n={};this.authorizeOptions&&(n=s({},this.authorizeOptions));e&&(n=s({},e));this.currentAuthType&&(n={authType:this.currentAuthType});r.setBodyField({method:"serverless.auth.user.getProfileInfo",params:n});t.next=9;return this.transport.request(r);case 9:o=t.sent;return t.abrupt("return",o.body);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"setRequestToken",value:function(){var t=p(l().mark((function t(e){var r,n=arguments;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.length>1&&void 0!==n[1]&&n[1];if(!this.pendingRequest){t.next=5;break}this.transport.logger.info("[UserService]pendingRequest...");t.next=5;return this.pendingRequest;case 5:if(this.accessToken){t.next=7;break}throw new a.UnauthorizedError("[UserService]未进行用户授权，请先手动调用三方授权或匿名授权方法");case 7:if(!r||!this.authorizeOptions){t.next=16;break}this.transport.logger.info("getAccessToken: start");if(this.authorizeOptions.authType!==b.ANONYMOUS){t.next=14;break}t.next=12;return this.anonymousAuthorizeHandler(this.authorizeOptions);case 12:t.next=16;break;case 14:t.next=16;return this.authorizeHandler(this.authorizeOptions);case 16:e.setBodyField({token:this.accessToken});e.sign(this.appSecret);e.setBaseHeaders({"Content-Type":"application/json","x-basement-token":this.accessToken});return t.abrupt("return",e);case 20:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"authorizeHandler",value:function(){var t=p(l().mark((function t(e){var r=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.pendingRequest=this.getAuthCode({scopes:this.scope}).then((function(t){r.transport.logger.info("[UserService]Request authcode is ".concat(t.body.authCode," "));return t.body.authCode})).then((function(t){var n=r.getEncoder();n.setBodyField({method:"serverless.auth.user.authorize",params:{authProvider:e.authProvider||"alipay_openapi",clientIdentifier:r.appId,authCode:t,isvAppId:r.isvAppId}});n.sign(r.appSecret);n.setBaseHeaders({"Content-Type":"application/json"});r.ua&&n.setBaseHeaders({"x-serverless-ua":r.ua});var o=n.encodeAsHTTPRequestObject({timeout:r.transport.timeoutOption,dataType:"json"});return r.httpRequest(o)})).then((function(t){r.transport.logger.info("[UserService]Request accessToken "+(t.body.success?"success":"failed"));if(t.body&&t.body.result){r.authorizeOptions=e;r.accessToken=t.body.result.accessToken;r.currentAuthType=b.DEFAULT}r.pendingRequest=null;return Promise.resolve(r.accessToken)}));return t.abrupt("return",this.pendingRequest);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"anonymousAuthorizeHandler",value:function(){var t=p(l().mark((function t(e){var r,n,o=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=this.getEncoder()).setBodyField({method:"serverless.auth.user.anonymousAuthorize",params:{clientIdentifier:this.appId,isvAppId:this.isvAppId}});r.sign(this.appSecret);r.setBaseHeaders({"Content-Type":"application/json"});this.ua&&r.setBaseHeaders({"x-serverless-ua":this.ua});n=r.encodeAsHTTPRequestObject({timeout:this.transport.timeoutOption,dataType:"json"});this.pendingRequest=this.httpRequest(n).then((function(t){o.transport.logger.info("[UserService]Request accessToken "+(t.body.success?"success":"failed"));if(t.body&&t.body.result){o.authorizeOptions=e;o.accessToken=t.body.result.accessToken;o.currentAuthType=b.ANONYMOUS}o.pendingRequest=null;return Promise.resolve(o.accessToken)}));return t.abrupt("return",this.pendingRequest);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"validate",value:function(t,e){var r=new n.Validator;try{r.validate(t,e)}catch(t){throw t}}}]);return e}(n.BaseService)},"@alicloud/mpserverless-core":function(e,r){e.exports=t}})}(r("./node_modules/@alicloud/mpserverless-core/dist/index.js"))},"./src/index.ts":function(t,e,r){"use strict";r.r(e);r.d(e,"MPServerless",(function(){return x}));var n=r("./node_modules/@alicloud/mpserverless-miniapp-core/dist/index.js"),o=r("./node_modules/@alicloud/mpserverless-core/dist/index.js"),i=Object(o.MPServerlessErrorClass)({UnsupportPlatformError:{code:"UnsupportPlatformError",message:"无支持平台错误"}});function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(){s=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),c=new A(n||[]);return o(a,"_invoke",{value:P(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var d="suspendedStart",y="executing",v="completed",m={};function g(){}function b(){}function w(){}var j={};f(j,c,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(B([])));x&&x!==r&&n.call(x,c)&&(j=x);var O=w.prototype=g.prototype=Object.create(j);function E(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,c,u){var s=h(t[o],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==a(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return r("throw",t,c,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=d;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=k(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var s=h(e,r,n);if("normal"===s.type){if(o=n.done?v:"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function k(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function B(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(a(e)+" is not iterable")}return b.prototype=w,o(O,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=f(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,f(t,l,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},E(S.prototype),f(S.prototype,u,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(p(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(O),f(O,l,"Generator"),f(O,c,(function(){return this})),f(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=B,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:B(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function l(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){r(t);return}c.done?e(u):Promise.resolve(u).then(n,o)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){l(i,n,o,a,c,"next",t)}function c(t){l(i,n,o,a,c,"throw",t)}a(void 0)}))}}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(t,g(n.key),n)}}function h(t,e,r){return e=d(e),function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return y(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],d(t).constructor):e.apply(t,r))}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t,e){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t})(t,e)}function m(t,e,r){(e=g(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r;return t}function g(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a(e)?e:String(e)}var b=function(t){t.WECHAT="wechat";t.ALIPAY="alipay";t.DINGTALK="dingtalk";return t}(b||{}),w=function(){return"undefined"!=typeof dd&&dd&&0!==Object.keys(dd).length?b.DINGTALK:"undefined"!=typeof wx&&wx&&0!==Object.keys(wx).length?b.WECHAT:"undefined"!=typeof my&&my&&0!==Object.keys(my).length?b.ALIPAY:void 0},j=function(t){switch(t){case b.ALIPAY:return my.getAuthCode;case b.DINGTALK:return dd.getAuthCode;default:return null}},_=function(t){if("string"==typeof t)return t;switch(w()){case b.ALIPAY:return t.alipay;case b.WECHAT:return t.wechat;case b.DINGTALK:return t.dingtalk;default:throw new i.UnsupportPlatformError("[MPServerless SDK]当前 SDK 并未支持该小程序平台，敬请期待")}},x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&v(t,e)}(e,t);function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);m(y(n=h(this,e,[{request:function(e){w()===b.DINGTALK&&(e.data=JSON.stringify(e.data));e.header=e.header||e.headers;var r=t.request||t.httpRequest;return n.wrap(r)(e)},getAuthCode:function(){var e=f(s().mark((function e(r){var o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=j(w())||t.getAuthCode||t.login;e.next=3;return n.wrap(o)(r);case 3:(i=e.sent).authCode=i.authCode||i.code;return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),uploadFile:function(e){return n.wrap(t.uploadFile)(e)},getFileUploadInfo:function(e){var r=0,o="";return(t.getFileInfo&&n.wrap(t.getFileInfo)||function(){return new Promise((function(t){return t({size:0})}))})({filePath:e.filePath,apFilePath:e.filePath}).then((function(o){o.size&&(r=o.size);return n.wrap(t.getImageInfo)({src:e.filePath})})).then((function(t){t.type&&(o=t.type);return{fileSize:r,fileExtension:o}})).catch((function(t){throw t}))}},u(u({},r),{},{appId:_(r.appId)})])),"platform",void 0);n.platform=w();return n}!function(t,e,r){e&&p(t.prototype,e);r&&p(t,r);Object.defineProperty(t,"prototype",{writable:!1})}(e,[{key:"authProvider",get:function(){switch(this.platform){case b.ALIPAY:return"alipay_openapi";case b.WECHAT:return"wechat_openapi";case b.DINGTALK:return"dingtalk_openapi";default:throw new i.UnsupportPlatformError("[MPServerless SDK]当前 SDK 并未支持该小程序平台，敬请期待")}}},{key:"init",value:function(){var t=f(s().mark((function t(e){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e&&"anonymous"===e.authorType||e&&"anonymous"===e.authType)){t.next=6;break}t.next=3;return this.user.authorize({authType:"anonymous"});case 3:return t.abrupt("return",t.sent);case 6:t.next=8;return this.user.authorize({authProvider:this.authProvider});case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"wrap",value:function(t){return function(e){return new Promise((function(r){t(Object.assign(e,{complete:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.headers=t.headers||t.header;return r(t)}}))}))}}}]);return e}(n.MPServerlessMiniAppCore);e.default=x}}).MPServerless}));